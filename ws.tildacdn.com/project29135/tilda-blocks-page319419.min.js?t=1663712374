function t199_showMenu(recid){var rec=document.getElementById('rec'+recid);if(!rec)return;var menuList=rec.querySelectorAll('.t199__js__menu');var togglerList=rec.querySelectorAll('.t199__js__menu-toggler');Array.prototype.forEach.call(menuList,function(menu){var menuItemList=menu.querySelectorAll('.t199__menu-item');Array.prototype.forEach.call(menuItemList,function(menuItem){var href=menuItem.getAttribute('href');if(href&&href.indexOf('#')!==-1&&href.substring(0,9)!=='#submenu:'){menuItem.addEventListener('click',function(){document.body.classList.remove('t199__is__menu')})}});var menuLinkList=menu.querySelectorAll('.t199__menu-item-wrap .t-menusub__link-item');Array.prototype.forEach.call(menuLinkList,function(menuLink){menuLink.addEventListener('click',function(){document.body.classList.remove('t199__is__menu')})})});Array.prototype.forEach.call(togglerList,function(toggler){toggler.addEventListener('click',function(e){e.stopPropagation();e.preventDefault();document.body.classList.toggle('t199__is__menu')})});document.addEventListener('click',function(e){if(!e.target.closest('.t199__js__menu')){document.body.classList.remove('t199__is__menu')}});var allMenu=document.querySelectorAll('.t199__mmenu');Array.prototype.forEach.call(allMenu,function(menu){if(typeof jQuery!=='undefined'){$(menu).bind('clickedAnchorInTooltipMenu',function(){$('body').removeClass('t199__is__menu')})}else{menu.addEventListener('clickedAnchorInTooltipMenu',function(){document.body.classList.remove('t199__is__menu')})}})}
function t199_positionHeader(recid){var rec=document.getElementById('rec'+recid);if(!rec)return;var header=rec.querySelector('.t199__js__header');var bgColor=header?header.style.backgroundColor||window.getComputedStyle(header).backgroundColor:'';t199_positionHeaderOnScroll(header,bgColor);window.addEventListener('scroll',function(){t199_positionHeaderOnScroll(header,bgColor)})}
function t199_positionHeaderOnScroll(header,bgColor){if(window.pageYOffset<=0){if(header)header.classList.remove('t199__is__active');if(header)header.style.backgroundColor=bgColor}else if(header&&!header.classList.contains('t199__is__active')){header.classList.add('t199__is__active');header.style.backgroundColor=''}}
function t398_init(recid){t398_addArrow(recid);t398_highlight();$('#rec'+recid).find(".t398").each(function(){var $hook=$(this).attr('data-tooltip-hook');var $margin=$(this).attr('data-tooltip-margin');if($hook!==''){var $obj=$('a[href="'+$hook+'"]');var $content=$(this).find('.t398__content').html();if($hook.charAt(0)=='#'){var touchDevices=!0}else{var touchDevices=!1}
var position=$(this).attr('data-tooltip-position');if(position!==''){}else{position='top'}
$obj.click(function(e){e.preventDefault()});t398_onFuncLoadTooltip(function(){$obj.tooltipster({'theme':'t398__tooltipster-noir t398__tooltipster-noir_'+recid+'','contentAsHTML':!0,'content':$content,interactive:!0,touchDevices:touchDevices,position:position,functionReady:function(origin,tooltip){$(".t398__tooltipster-noir_"+recid+"").css("margin-top",$margin)}})})}})}
function t398_addArrow(recid){$('#rec'+recid).find(".t398").each(function(){var $hook=$(this).attr('data-tooltip-hook');var $obj=$('a[href="'+$hook+'"]');var arrow=$(this).attr('data-add-arrow');var arrow_height=$obj.height();if($hook!==''&&arrow!==''){$obj.append("<div class=\"t398__arrow t398__arrow_"+recid+"\" style=\"height: "+arrow_height+"\px;\"></div>")}})}
function t398_highlight(){var url=window.location.href;var pathname=window.location.pathname;if(url.substr(url.length-1)=="/"){url=url.slice(0,-1)}
if(pathname.substr(pathname.length-1)=="/"){pathname=pathname.slice(0,-1)}
if(pathname.charAt(0)=="/"){pathname=pathname.slice(1)}
if(pathname==""){pathname="/"}
$(".t398__list_item a[href='"+url+"']").addClass("t-active");$(".t398__list_item a[href='"+url+"/']").addClass("t-active");$(".t398__list_item a[href='"+pathname+"']").addClass("t-active");$(".t398__list_item a[href='/"+pathname+"']").addClass("t-active");$(".t398__list_item a[href='"+pathname+"/']").addClass("t-active");$(".t398__list_item a[href='/"+pathname+"/']").addClass("t-active")}
function t398_onFuncLoadTooltip(okFunc){if(typeof $.fn.tooltipster==='function'){okFunc()}else{setTimeout(function checkFuncExist(){if(typeof $.fn.tooltipster==='function'){okFunc();return}
if(document.readyState==='complete'&&typeof $.fn.tooltipster!=='function'){throw new Error('$.fn.tooltipster'+' is undefined')}
setTimeout(checkFuncExist,100)})}}
function t260_init(){$(".t260").each(function(){var el=$(this);if(el.attr('data-block-init')=='yes'){}else{el.attr('data-block-init','yes');var toggler=el.find(".t260__header");var content=el.find(".t260__content");toggler.click(function(){$(this).toggleClass("t260__opened");if($(this).hasClass("t260__opened")==!0){content.slideDown()}else{content.slideUp()}})}})}
function t854_init(recid){var rec=document.querySelector('#rec'+recid);if(!rec)return;var btnNews=rec.querySelector('.t854__news-btn');var newsContent=rec.querySelector('.t854__news-content');var attrKeyTelegram=newsContent.getAttribute('data-telegram-key');var keyTelegram=attrKeyTelegram&&attrKeyTelegram.length?attrKeyTelegram:'V1J5MnVkSWJ2UW5nN1JZM';var attrCountNews=newsContent.getAttribute('data-telegram-news-amount');var symbolsAttr=newsContent.getAttribute('data-telegram-symbols-preview');var countNews=attrCountNews&&attrCountNews.length?+attrCountNews:5;var dateFormat=newsContent.getAttribute('data-telegram-date');var currentFromNews=0;var currentShlop=0;var symbolsAmount=40;if(symbolsAttr===''){symbolsAmount=200}else if(symbolsAttr<40){symbolsAmount=40}else if(symbolsAttr>1000){symbolsAmount=1000}else{symbolsAmount=symbolsAttr}
var totalNews=t854_showNews(rec,newsContent,keyTelegram,countNews,currentFromNews,currentShlop,dateFormat,symbolsAmount);newsContent.removeAttribute('data-telegram-key');newsContent.removeAttribute('data-telegram-news-amount');newsContent.removeAttribute('data-telegram-symbols-preview');newsContent.removeAttribute('data-telegram-date');t854_hideBtn(btnNews,totalNews,currentFromNews,countNews);btnNews.addEventListener('click',function(event){event.preventDefault();currentFromNews=currentFromNews+countNews;currentShlop=event.target.closest('.t854__news-wrap').getAttribute('data-news-shlop');t854_hideBtn(btnNews,totalNews,currentFromNews,countNews);if(currentFromNews<totalNews){t854_showNews(rec,newsContent,keyTelegram,countNews,currentFromNews,currentShlop,dateFormat,symbolsAmount)}})}
function t854_hideBtn(btnNews,totalNews,currentFromNews,countNews){if(totalNews-currentFromNews<=countNews){btnNews.style.display='none'}}
function t854_formatDate(date,dateFormat){var dateParts=date.split('-');var newDate=new Date(dateParts[0],dateParts[1]-1,dateParts[2]);var newMonth=newDate.getMonth();var newDay=newDate.getDay();var dayOfWeek=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];var month=['January','February','March','April','May','June','July','August','September','October','November','December'];switch(+dateFormat){case 1:return dateParts[1]+'-'+dateParts[2]+'-'+dateParts[0];case 2:return dateParts[2]+'-'+dateParts[1]+'-'+dateParts[0];case 3:return dateParts[2]+'/'+dateParts[1]+'/'+dateParts[0];case 4:return dateParts[2]+'.'+dateParts[1]+'.'+dateParts[0];case 5:return month[newMonth]+' '+dateParts[2]+', '+dateParts[0];default:return dayOfWeek[newDay]+', '+month[newMonth]+' '+dateParts[2]}}
function t854_getNews(rec,keyTelegram,count,from,shlop,symbolsAmount){var language=window.navigator?window.navigator.language||window.navigator.systemLanguage||window.navigator.userLanguage:'ru';language=language.substr(0,2).toLowerCase();var btnNews=rec.querySelector('.t854__news-btn');var newsWrap=rec.querySelector('.t854__news-wrap');var newsContainer=rec.querySelector('.t854__news-wrap-container');var loader=rec.querySelector('.t854__news-loader');var urlNews='https://news.tildacdn.com/feed/'+keyTelegram+'/'+count+'/'+(parseInt(from)+parseInt(shlop))+'/'+symbolsAmount;var dataJSON='';loader.classList.add('t854__news-btn-loader_show');if(keyTelegram.indexOf('telegram')===-1){if(language=='ru'){newsWrap.innerHTML='<div style="font-family:Georgia,serif;font-size:20px;color:red;">Вы ввели неправильный ключ</div>'}
return}
var request=new XMLHttpRequest();request.open('GET',urlNews,!1);request.onload=function(){var data=request.response;if(this.status>=200&&this.status<400){try{dataJSON=JSON.parse(data)}catch(e){}
newsWrap.setAttribute('data-news-shlop',dataJSON.shlop);if(dataJSON.status=='fail'){console.log('You entered an '+dataJSON.error);btnNews.style.display='none';if(language=='ru'){newsWrap.innerHTML='<div style="font-family:Georgia,serif;font-size:20px;color:red;">Вы ввели неправильный ключ</div>'}else{newsWrap.innerHTML='<div style="font-family:Georgia,serif;font-size:20px;color:red;">You entered an '+dataJSON.error+'</div>'}}
if(dataJSON.total==0){console.log('You haven\'t a publication')}
loader.classList.remove('t854__news-btn-loader_show');newsContainer.style.opacity=1;loader.style.display='none'}};request.onerror=function(){console.log('Error!')};request.send();return dataJSON}
function t854_showNews(rec,newsContent,keyTelegram,count,from,shlop,dateFormat,symbolsAmount){var news=t854_getNews(rec,keyTelegram,count,from,shlop,symbolsAmount);if(!news)return;var newsMessages=news.messages;var totalNews=news.total;if(newsMessages){for(var i=0;i<newsMessages.length;i++){var dateNews=newsMessages[i].date.split(' ');var dayNews=dateNews[0];var textNews=newsMessages[i].text;var shortTextNews=newsMessages[i].short_text;var imageIdNews=newsMessages[i].files;var timeHTML='<div class="t854__news-time t-descr t-descr_xxs">'+t854_formatDate(dayNews,dateFormat)+'</div>';var blockImageArr=[];var imagesHTML=t854_addImage(newsMessages[i],imageIdNews,blockImageArr);var textHTML=t854_addText(textNews,shortTextNews);if(shortTextNews){if(imageIdNews.length!==1){newsContent.innerHTML+='<div class="t854__news-message t854__news-message_popup t854__news-message_short">'+timeHTML+imagesHTML+textHTML+'</div>'}else{newsContent.innerHTML+='<div class="t854__news-message t854__news-message_popup t854__news-message_short">'+timeHTML+'<div class="t854__news-message-flex">'+imagesHTML+textHTML+'</div>'+'</div>'}}else if(imageIdNews.length!==1){newsContent.innerHTML+='<div class="t854__news-message">'+timeHTML+imagesHTML+textHTML+'</div>'}else{newsContent.innerHTML+='<div class="t854__news-message">'+timeHTML+'<div class="t854__news-message-flex">'+imagesHTML+textHTML+'</div>'+'</div>'}}
t854_addPopup(rec);t854_closePopup(rec)}
return totalNews}
function t854_addText(textNews,shortTextNews){var textHTML;if(textNews.length===0){textHTML=''}else if(shortTextNews){textHTML='<div class="t854__news-text t-descr t-descr_xs">'+shortTextNews+'</div><div class="t854__news-text_short-hide t-descr t-descr_xs">'+textNews+'</div>'}else{textHTML='<div class="t854__news-text t-descr t-descr_xs">'+textNews+'</div>'}
return textHTML}
function t854_addImage(item,imageIdNews,blockImageArr){var images='';var imgHTML='';var imageUrl;if(item.files[0]){imageUrl='https://news.tildacdn.com/'+item.files[0]}
for(var i=0;i<imageIdNews.length;i++){imageUrl='https://news.tildacdn.com/'+imageIdNews[i]+'/-/resize/x900/';var blockImage='<div class="t854__news-image-wrap"><img src="'+imageUrl+'" class="t854__news-image"></div>';blockImageArr.push(blockImage)}
if(blockImageArr.length!==0){for(var i=0;i<blockImageArr.length;i++){images+=blockImageArr[i];if(blockImageArr.length>2){imgHTML='<div class="t854__news-images t854__news-images_col3">'+images+'</div>'}else{imgHTML='<div class="t854__news-images">'+images+'</div>'}}}
return imgHTML}
function t854_addPopup(rec){var popupBlock=rec.querySelectorAll('.t854__news_publish.t854__news_short .t854__news-message');var wrapTextPopup=rec.querySelector('.t854__news-popup-bg');var textPopup=rec.querySelector('.t854__news-popup');var messageWrap=rec.querySelector('.t854__news_publish .t854__news-popup-message-wrap');Array.prototype.forEach.call(popupBlock,function(popup){var textShortLength=popup.querySelector('.t854__news-text_short-hide');popup.addEventListener('click',function(event){document.querySelector('body').classList.add('t854__body_overflow');if(wrapTextPopup)wrapTextPopup.style.display='block';if(textPopup&&textShortLength){textPopup.classList.add('t854__news-popup_short')}
var popupShortContent=popup.innerHTML;messageWrap.innerHTML=popupShortContent;event.preventDefault()});var link=popup.querySelector('a');if(link){link.addEventListener('click',function(event){event.stopPropagation()})}})}
function t854_closePopup(rec){var wrapTextPopup=rec.querySelector('.t854__news-popup-bg');var textPopup=rec.querySelector('.t854__news-popup');var contentTextPopup=rec.querySelector('.t854__news-popup-content');var close=rec.querySelector('.t854__news-popup-close');if(wrapTextPopup){wrapTextPopup.addEventListener('click',function(event){t854_closeContent(wrapTextPopup,contentTextPopup,textPopup);event.preventDefault()})}
if(textPopup){textPopup.onclick=function(event){event.stopPropagation()}}
if(close){close.addEventListener('click',function(event){t854_closeContent(wrapTextPopup,contentTextPopup,textPopup);event.preventDefault()})}
document.querySelector('body').addEventListener('keyup',function(event){if(event.keyCode==27){t854_closeContent(wrapTextPopup,contentTextPopup,textPopup);event.preventDefault()}})}
function t854_closeContent(wrapTextPopup,contentTextPopup,textPopup){document.querySelector('body').classList.remove('t854__body_overflow');if(wrapTextPopup)wrapTextPopup.style.display='none';textPopup.classList.remove('t854__news-popup_short');if(contentTextPopup)contentTextPopup.innerHTML=''}
if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector}
if(!Element.prototype.closest){Element.prototype.closest=function(s){var el=this;while(el&&el.nodeType===1){if(Element.prototype.matches.call(el,s)){return el}
el=el.parentElement||el.parentNode}
return null}}