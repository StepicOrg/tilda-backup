function t_appendGoogleMap(recid,key){var runfunc,langPreferences,mapLang,tildaMapElement,tildaMapElLang,script,mapKey;"object"==typeof google&&"object"==typeof google.maps?t_handleGoogleApiReady(recid):window.googleapiiscalled?setTimeout(function(){t_appendGoogleMap(recid,key)},1e3):(runfunc="window.t_handleGoogleApiReady_"+recid+' = function () { t_handleGoogleApiReady("'+recid+'") }',eval(runfunc),langPreferences="",mapLang="",tildaMapElement=document.querySelector("#rec"+recid+" .t-map"),tildaMapElLang=tildaMapElement.getAttribute("data-map-language"),tildaMapElement&&(mapLang=tildaMapElLang||""),mapLang&&2===mapLang.length&&(langPreferences="&language="+mapLang),script=document.createElement("script"),script.type="text/javascript",mapKey=key?key.trim():"",script.src="https://maps.google.com/maps/api/js?key="+mapKey+"&callback=t_handleGoogleApiReady_"+recid+langPreferences,document.body.appendChild(script),window.googleapiiscalled=!0)}function t_handleGoogleApiReady(recid){var gmaps=document.querySelectorAll("#rec"+recid+" .t-map");if(!gmaps.length)return!1;Array.prototype.forEach.call(gmaps,function(gmap){var arMarkers=window["arMapMarkers"+recid],mapstyle="[]";window.isDragMap=!window.isMobile;var mapStyleAttr=gmap.getAttribute("data-map-style");mapStyleAttr&&(mapstyle=eval(mapStyleAttr));var mapZoomAttr=gmap.getAttribute("data-map-zoom"),myLatLng=0<arMarkers.length&&new google.maps.LatLng(parseFloat(arMarkers[0].lat),parseFloat(arMarkers[0].lng)),myOptions={zoom:parseInt(mapZoomAttr,10),center:myLatLng,scrollwheel:!1,gestureHandling:"cooperative",zoomControl:!0,styles:mapstyle},map=new google.maps.Map(gmap,myOptions),bounds=new google.maps.LatLngBounds,marker,listener;function t_map__attachInfoMessage(e,a){var t=document.createElement("textarea");t.innerHTML=a;var o=new google.maps.InfoWindow({content:t.textContent});e.addListener("click",function(){o.open(e.get("map"),e)})}Array.prototype.forEach.call(arMarkers,function(e){myLatLng=new google.maps.LatLng(parseFloat(e.lat),parseFloat(e.lng)),marker=new google.maps.Marker({position:myLatLng,map:map,title:e.title}),bounds.extend(myLatLng),e.descr?t_map__attachInfoMessage(marker,e.descr):t_map__attachInfoMessage(marker,e.title)}),1<arMarkers.length&&(map.fitBounds(bounds),listener=google.maps.event.addListener(map,"idle",function(){(map.getZoom()>parseInt(mapZoomAttr,10)||0===map.getZoom())&&map.setZoom(parseInt(mapZoomAttr,10)),16<map.getZoom()&&map.setZoom(16),google.maps.event.removeListener(listener)})),google.maps.event.addDomListener(window,"resize",function(){var e=map.getCenter(),a=parseInt(mapZoomAttr,10);google.maps.event.trigger(map,"resize"),map.setCenter(e),0<arMarkers.length&&(map.fitBounds(bounds),0<a&&(map.getZoom()>a||0==map.getZoom())&&map.setZoom(a))}),gmap.addEventListener("displayChanged",function(){google.maps.event.trigger(map,"resize")}),gmap.addEventListener("sizechange",function(){google.maps.event.trigger(map,"resize")})})}function t_appendYandexMap(recid,key){var runfunc,mapLang,tildaMapElement,tildaMapElAttr,script;"object"==typeof ymaps&&"function"==typeof ymaps.Map?t_handleYandexApiReady(recid):window.yandexmapsapiiscalled?setTimeout(function(){t_appendYandexMap(recid,key)},1e3):(runfunc="window.t_handleYandexApiReady_"+recid+' = function () { return t_handleYandexApiReady("'+recid+'") }',eval(runfunc),mapLang="",tildaMapElement=document.querySelector("#rec"+recid+" .t-map"),tildaMapElAttr=tildaMapElement.getAttribute("data-map-language"),tildaMapElement&&(mapLang="EN"===tildaMapElAttr?"en_US":"ru_RU"),script=document.createElement("script"),script.type="text/javascript",script.src="https://api-maps.yandex.ru/2.1/?lang="+mapLang+"&coordorder=latlong&onload=t_handleYandexApiReady_"+recid,key&&(script.src+="&apikey="+key),document.body.appendChild(script),window.yandexmapsapiiscalled=!0)}function t_handleYandexApiReady(m){var e=document.querySelectorAll("#rec"+m+" .t-map");if(!e.length)return!1;Array.prototype.forEach.call(e,function(e){var a=window["arMapMarkers"+m],t=e.getAttribute("data-map-zoom");window.isDragMap=!window.isMobile;var o=0<a.length&&[parseFloat(a[0].lat),parseFloat(a[0].lng)],o={zoom:parseInt(t,10),center:o,scrollZoom:!1,controls:["typeSelector","zoomControl"],drag:window.isDragMap},n=new ymaps.Map(e,o),r=new ymaps.GeoObjectCollection({}),p=n.panes.get("events").getElement(),i={EN:"Use two fingers to move the map",RU:"Чтобы переместить карту проведите по ней двумя пальцами",FR:"Utilisez deux doigts pour déplacer la carte",DE:"Verschieben der Karte mit zwei Fingern",ES:"Para mover el mapa, utiliza dos dedos",PT:"Use dois dedos para mover o mapa",UK:"Переміщуйте карту двома пальцями",JA:"地図を移動させるには指 2 本で操作します",ZH:"使用双指移动地图",PL:"Przesuń mapę dwoma palcami",KK:"Картаны екі саусақпен жылжытыңыз",IT:"Utilizza due dita per spostare la mappa",LV:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem"},l={alignItems:"center",boxSizing:"border-box",color:"white",display:"flex",justifyContent:"center",fontSize:"22px",fontFamily:"Arial,sans-serif",opacity:"0.0",padding:"25px",textAlign:"center",transition:"opacity .3s",touchAction:"auto"};Array.prototype.forEach.call(Object.keys(l),function(e){p.style[e]=l[e]}),n.behaviors.disable("scrollZoom"),window.isMobile&&(n.behaviors.disable("drag"),ymaps.domEvent.manager.add(p,"touchmove",function(e){1===e.get("touches").length&&(p.style.transition="opacity .3s",p.style.background="rgba(0, 0, 0, .45)",p.textContent=i[window.browserLang]||i.EN,p.style.opacity="1")}),ymaps.domEvent.manager.add(p,"touchend",function(){p.style.transition="opacity .8s",p.style.opacity="0"})),Array.prototype.forEach.call(a,function(e){var a=[parseFloat(e.lat),parseFloat(e.lng)],t=document.createElement("textarea");t.innerHTML=e.descr,r.add(new ymaps.Placemark(a,{hintContent:e.title,balloonContent:e.descr?t.textContent:e.title}))}),n.geoObjects.add(r);var s=parseInt(t,10);1<a.length?n.setBounds(r.getBounds(),{checkZoomRange:!0,callback:function(e){e||0<s&&(0==n.getZoom()||n.getZoom()>s)&&n.setZoom(s)}}):0<s&&(0==n.getZoom()||n.getZoom()>s)&&n.setZoom(s),n.events.add("sizechange",function(){n.container.fitToViewport(),1<a.length?n.setBounds(r.getBounds(),{checkZoomRange:!0,callback:function(e){e||0<s&&(0==n.getZoom()||n.getZoom()>s)&&n.setZoom(s)}}):0<s&&(0==n.getZoom()||n.getZoom()>s)&&n.setZoom(s)})})}