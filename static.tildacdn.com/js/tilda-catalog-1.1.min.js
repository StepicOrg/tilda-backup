window.tStoreIsSearchBot=/Bot/i.test(navigator.userAgent),window.tStoreIsMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),window.tStoreBrowserLang=(window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2),window.t_store_endpoint="store.tildacdn.com";var t_store_POPUP_SHOWED_EVENT_NAME="catalog:popupShowed",t_store_POPUP_CLOSED_EVENT_NAME="catalog:popupClosed";function t_store_fixImgs(){var isSafari16_3,recTypes;/Version\/16\.3/.test(navigator.userAgent)&&/Safari/.test(navigator.userAgent)&&["754","776","778","786","1025"].forEach((function(recType){var imgs=document.querySelectorAll('[data-record-type="'+recType+'"] .t-img');Array.prototype.forEach.call(imgs,(function(img){img.style.objectFit="contain"}))}))}function t_store_init(recid,options){var rec=document.getElementById("rec"+recid),recordObserver;rec&&(window.tStoreInit||(window.tStoreInit={}),window.tStoreInit[recid]=!0,"IntersectionObserver"in window&&Object.keys(window.tStoreInit).length>7?(window.tStoreInit[recid]="lazy",new IntersectionObserver((function(entries,observer){entries.forEach((function(entry){if(entry.isIntersecting){var target=entry.target;observer.unobserve(target),"lazy"===window.tStoreInit[recid]&&(t_store_lazyInit(recid,options),window.tStoreInit[recid]=!0)}}))}),{rootMargin:"150px 0px"}).observe(rec)):t_store_lazyInit(recid,options))}function t_store_lazyInit(recid,options){var rec=document.getElementById("rec"+recid),isSnippet;document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"))||t_store_initRouting(),window.tStoreDict||t_store_getDictObj();var el_store=rec.querySelector(".js-store"),prodPopup=t_store_get_productPopup_html(recid,options);el_store&&el_store.insertAdjacentHTML("beforeend",prodPopup);var pageMode=document.getElementById("allrecords").getAttribute("data-tilda-mode");options.isPublishedPage="edit"!==pageMode&&"preview"!==pageMode,options.isPublishedPage&&t_store_checkUrl(options,recid);var recParent=document.getElementById("record"+recid),off;if(recParent&&!options.isPublishedPage&&"y"==recParent.getAttribute("off"))return;var gridPreloader=rec.querySelector(".js-store-grid-cont-preloader");if(""!==options.storepart){setTimeout((function(){gridPreloader&&gridPreloader.classList.remove("t-store__grid-cont-preloader_hidden")}),1e3);var slice=1,customUrlParams=t_store_paramsToObj(recid,options);if(customUrlParams[recid]){var optsBasedOnURL=t_store_updateOptionsBasedOnUrl(options,customUrlParams,recid);optsBasedOnURL&&(options=optsBasedOnURL)}if(options.sidebar){var el_filterWrapper=rec.querySelector(".js-store-parts-select-container"),el_sidebarWrapper;if(el_filterWrapper)el_filterWrapper.querySelector(".t951__sidebar")||el_filterWrapper.insertAdjacentHTML("afterbegin",'<div class="t951__sidebar-wrapper"></div>')}var drawAllProductsGrid=function(){customUrlParams[recid]&&customUrlParams[recid].page&&(slice=Array.isArray(customUrlParams[recid].page)?customUrlParams[recid].page.join(""):customUrlParams[recid].page),t_store_loadProducts("",recid,options,slice),t_store_mobileHoriz_checkBtnVisibility(recid,options)},onLoadFilters=function(){customUrlParams[recid]&&optsBasedOnURL&&rec.addEventListener("controlsDrawn",(function(){t_store_filters_render_selected(options,recid)})),options.sidebar&&rec.addEventListener("controlsDrawn",(function(){t_store_filters_opts_sort(options,recid)})),slice=1,drawAllProductsGrid()},onDoneGetFilters=function(data){if(window.tStoreFilters||(window.tStoreFilters={}),data&&(data.filters&&data.filters.length>0||data.search||data.sort)){window.tStoreFilters[recid]=data;var fileName="tilda-catalog-filters-1.0";if(document.head.querySelector('script[src*="'+fileName+'"]'))t_store_onFuncLoad("t_store_filters_init",(function(){onLoadFilters()}));else{var script=document.createElement("script");script.type="text/javascript",script.src="https://static.tildacdn.com/js/"+fileName+".min.js",script.onload=onLoadFilters,script.onerror=function(){console.error("Failed to load tilda-catalog-filters: ",this.src),drawAllProductsGrid()},document.head.appendChild(script)}if(!document.head.querySelector('link[href*="'+fileName+'"]')){var link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://static.tildacdn.com/css/"+fileName+".min.css",link.media="all",document.head.appendChild(link)}}else drawAllProductsGrid()};if(t_store_loadFilters(options,onDoneGetFilters,(function(error){t_store_changeEndpoint(error,(function(){t_store_loadFilters(options,onDoneGetFilters)}))})),options.isHorizOnMob){var handIcon=t_store_get_handIcon_html(recid);gridPreloader&&gridPreloader.insertAdjacentHTML("beforebegin",handIcon)}if(options.tabs){var fileName="tilda-catalog-tabs-1.0",script,link;if(!document.head.querySelector('script[src*="'+fileName+'"]'))(script=document.createElement("script")).type="text/javascript",script.src="https://static.tildacdn.com/js/"+fileName+".min.js",script.onerror=function(){console.error("Failed to load tilda-catalog-tabs: ",this.src)},document.head.appendChild(script);if(!document.head.querySelector('link[href*="'+fileName+'"]'))(link=document.createElement("link")).rel="stylesheet",link.type="text/css",link.href="https://static.tildacdn.com/css/"+fileName+".min.css",link.media="all",document.head.appendChild(link)}if(options.showPagination&&"on"===options.showPagination){var fileName="tilda-catalog-pagination-1.0",script,link;if(!document.head.querySelector('script[src*="'+fileName+'"]'))(script=document.createElement("script")).type="text/javascript",script.src="https://static.tildacdn.com/js/"+fileName+".min.js",script.onerror=function(){console.error("Failed to load tilda-catalog-pagination: ",this.src)},document.head.appendChild(script);if(!document.head.querySelector('link[href*="'+fileName+'"]'))(link=document.createElement("link")).rel="stylesheet",link.type="text/css",link.href="https://static.tildacdn.com/css/"+fileName+".min.css",link.media="all",document.head.appendChild(link)}window.addEventListener("resize",t_throttle((function(){rec&&("1025"==options.prodCard.blockId?t_store_unifyCardsWidth(recid):t_store_unifyCardsHeights(recid,options),t_store_loadMoreBtn_display(recid),(options.sidebar||Object.keys(options.filters||{}).length>1)&&t_store_moveSearhSort(recid,options),options.showPagination&&"on"===options.showPagination&&t_store_onFuncLoad("t_store_pagination_display",(function(){t_store_pagination_display(recid)})))})));var tStore=rec.querySelector(".t-store");tStore&&tStore.addEventListener("displayChanged",(function(){setTimeout((function(){t_store_unifyCardsHeights(recid,options)}))})),tStore&&tStore.addEventListener("displayChanged",(function(){setTimeout((function(){t_store_unifyCardsWidth(recid)}))}));try{options.verticalAlignButtons&&(window.addEventListener("resize",t_throttle((function(){t_store_verticalAlignButtons(recid,options)}),500)),tStore&&tStore.addEventListener("displayChanged",(function(){t_store_verticalAlignButtons(recid,options)})))}catch(e){console.log("verticalAlignButtons error: "+e)}options.popup_opts.fixedButton&&t_store_fixedPopupButton(recid)}else if(gridPreloader.style.display="none",options.sidebar){var t951GridContainer=rec.querySelector(".t951__grid-cont");t951GridContainer&&t951GridContainer.classList.remove("t951__grid-cont_hidden")}}function t_store_history_pushState(state,title,url){try{void 0!==history.pushState&&window.history.pushState(state,title,url)}catch(error){}}function t_store_productInit(recid,options,product){t_store_snippet_initProduct(recid,options,product)}function t_store_snippet_initProduct(recid,options,product){var rec=document.querySelector("#rec"+recid),el_product=rec.querySelector(".t-store__product-snippet.js-store-product"),urlSearch=t_store_snippet_getJsonFromUrl();if("100"===options.popup_opts.popupContainer){var productContainer=el_product.querySelector(".t-container");productContainer.classList.add("t-container_fluid"),productContainer.style.maxWidth="100%",productContainer.firstElementChild&&productContainer.firstElementChild.classList.add("t-container_fluid")}t_store_snippet_removeSizesFromStyles(recid,options),t_store_drawProdPopup_drawGallery(recid,el_product,product,options);var addOptionsAndChooseEdition=function(){t_store_addProductOptions(recid,product,el_product,options,"largecard"),t_store_snippet_chooseEditionFromUrl(recid,product,el_product,options),t_store_onFuncLoad("t_prod__init",(function(){t_prod__init(recid)}))},allRecords=document.getElementById("allrecords");if(allRecords){var projectLang=allRecords.getAttribute("data-tilda-project-lang");projectLang&&(window.tStoreBrowserLang=projectLang)}window.tStoreDict||t_store_getDictObj();var storeProdSKU=el_product.querySelector(".js-store-prod-sku");if(storeProdSKU&&"none"!==storeProdSKU.style.display&&storeProdSKU.insertAdjacentHTML("beforebegin",window.tStoreDict.sku+": "),el_product.setAttribute("data-product-gen-uid",product.uid),el_product.setAttribute("data-product-part-uid",product.partuids?product.partuids.join(","):""),options.tabs){var fileName="tilda-catalog-tabs-1.0";if(document.head.querySelector('script[src*="'+fileName+'"]'))t_onFuncLoad("t_store_tabs_initSnippet",(function(){t_store_tabs_initSnippet(recid,options,el_product,product),addOptionsAndChooseEdition()}));else{var script=document.createElement("script");script.type="text/javascript",script.src="https://static.tildacdn.com/js/"+fileName+".min.js",script.onload=function(){t_onFuncLoad("t_store_tabs_initSnippet",(function(){t_store_tabs_initSnippet(recid,options,el_product,product),addOptionsAndChooseEdition()}))},script.onerror=function(){console.error("Failed to load tilda-catalog-tabs: ",this.src)},document.head.appendChild(script)}if(!document.head.querySelector('link[href*="'+fileName+'"]')){var link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://static.tildacdn.com/css/"+fileName+".min.css",link.media="all",document.head.appendChild(link)}}else t_store_initTextAndCharacteristics(el_product,product),addOptionsAndChooseEdition();if(t_triggerEvent(document.body,"twishlist_addbtn"),!options.relevants_slider){var mobileRow=rec.querySelector(".t-store__relevants-grid-cont.t-store__grid-cont_mobile-one-row");if(mobileRow){var handIcon=t_store_get_handIcon_html(recid);mobileRow.insertAdjacentHTML("beforebegin",handIcon)}}setTimeout((function(){!window.tStoreIsSearchBot&&window.Tilda&&"function"==typeof Tilda.sendEcommerceEvent&&(urlSearch.editionuid?product.editions.forEach((function(cur){cur.uid===urlSearch.editionuid&&Tilda.sendEcommerceEvent("detail",[{id:""+cur.uid,uid:""+cur.uid,price:""+cur.price,sku:cur.sku?cur.sku:"",name:product.title}])})):Tilda.sendEcommerceEvent("detail",[{id:""+(product.id?product.id:product.uid),uid:""+product.uid,price:""+(product.price_min?product.price_min:product.price),sku:product.sku?product.sku:"",name:product.title}]))}),3e3)}function t_store_initRouting(){window.onpopstate=function(){if(window.history.state&&window.history.state.productData){var productPopupData=window.history.state.productData,recid,options,productObj,isRelevantsShow;t_store_openProductPopup(productPopupData.recid,productPopupData.opts,productPopupData.productObj,productPopupData.isRelevantsShow)}}}function t_store_verticalAlignButtons(recid,options){var rec=document.getElementById("rec"+recid);if(rec){var gridContainer=rec.querySelector(".js-store-grid-cont");gridContainer&&gridContainer.classList.add("t-store__valign-buttons");var wrappers=rec.querySelectorAll(".js-store-grid-cont .t-store__card__textwrapper"),maxHeight=0,itemsInRow=parseInt(options.blocksInRow,10),mobileView=window.innerWidth<=480,tableView=window.innerWidth<=960&&window.innerWidth>480,mobileOneRow=!!(window.innerWidth<=960&&rec.querySelector(".js-store-grid-cont.t-store__grid-cont_mobile-one-row")),mobileTwoItemsInRow=!!(window.innerWidth<=480&&rec.querySelector(".t-store__mobile-two-columns"));mobileView&&(itemsInRow=1),tableView&&(itemsInRow=2),mobileTwoItemsInRow&&(itemsInRow=2),mobileOneRow&&(itemsInRow=999999);var i=1,wrappersInRow=[];if(wrappers&&Array.prototype.forEach.call(wrappers,(function(element){element.style.height="unset",1===itemsInRow?element.style.height="auto":(wrappersInRow.push(element),element.offsetHeight>maxHeight&&(maxHeight=element.offsetHeight),Array.prototype.forEach.call(wrappersInRow,(function(wrapper){wrapper.style.height=maxHeight+"px"})),i===itemsInRow&&(i=0,maxHeight=0,wrappersInRow=[]),i++)})),options.showRelevants){var relevantWrappers=rec.querySelectorAll(".js-product-relevant .t-store__card__textwrapper"),relevantMaxHeight=0,relevantWrappersInRow=[];Array.prototype.forEach.call(relevantWrappers,(function(element){element.style.height="unset"})),Array.prototype.forEach.call(relevantWrappers,(function(element){relevantWrappersInRow.push(element),element.offsetHeight>relevantMaxHeight&&(relevantMaxHeight=element.offsetHeight),Array.prototype.forEach.call(relevantWrappersInRow,(function(wrapper){wrapper.style.height=relevantMaxHeight+"px"}))}))}}}function t_store_hoverZoom_init(recid){var rec;if(document.getElementById("rec"+recid).querySelector("[data-hover-zoom]")){var head=document.head,script=document.createElement("script");script.type="text/javascript",script.src="https://static.tildacdn.com/js/tilda-hover-zoom-1.0.min.js",script.onload=function(){t_hoverZoom_init(recid)},script.onerror=function(textStatus){console.log("Upload script error: "+textStatus)},head.appendChild(script)}}function t_store_loadProducts(method,recid,options,slice,relevantsOpts){window.tStoreProductsRequested=!0;var showRelevants="relevants"===method,c=Date.now(),storepartuid=options.storepart,isFirstSlice=!slice||1===parseInt(slice,10),rec=document.getElementById("rec"+recid);if(rec){var gridContainer=showRelevants?rec.querySelector(".js-store-relevants-grid-cont"):rec.querySelector(".js-store-grid-cont"),isT973="973"===rec.getAttribute("data-record-type"),dataObj,gridContainer;if(showRelevants)dataObj={storepartuid:storepartuid,productuid:relevantsOpts.currentProductUid,quantity:relevantsOpts.relevantsQuantity,method:relevantsOpts.relevantsMethod,sort:relevantsOpts.relevantsSort},(gridContainer=rec.querySelector(".t-store__relevants-grid-cont"))&&(gridContainer.style.opacity=0);else dataObj={storepartuid:storepartuid,recid:recid,c:c};if(isFirstSlice&&(dataObj.getparts=!0,dataObj.getoptions=!0),slice&&(dataObj.slice=slice),options.filters&&(dataObj.filters=options.filters,dataObj.getparts=!0),options.sort&&!showRelevants&&(dataObj.sort=options.sort),options.size&&options.size>0&&(dataObj.size=options.size),options&&options.defaultSort&&options.defaultSort.in_stock&&showRelevants&&(dataObj.filters||(dataObj.filters={}),dataObj.filters.quantity="y"),!window.t_store_endpoint){window.t_store_endpoint="store.tildacdn.com";try{var rootzoneapi=document.getElementById("allrecords").getAttribute("data-tilda-root-zone");rootzoneapi&&(window.t_store_endpoint="store.tildaapi."+rootzoneapi)}catch(e){}}var apiUrl="https://"+window.t_store_endpoint+"/api"+(showRelevants?"/getrelevantproducts/":"/getproductslist/");if(!options.isPublishedPage){var domainParts=window.location.hostname.split("."),link="tilda."+domainParts[domainParts.length-1];dataObj.projectid=document.getElementById("allrecords").getAttribute("data-tilda-project-id"),apiUrl="https://"+link+"/projects/store"+(showRelevants?"/getrelevantproducts/":"/getproductslist/")}var ts=Date.now();window.tStoreXHR||(window.tStoreXHR={}),window.tStoreXHR[recid]&&(window.tStoreXHR[recid].abort(),delete window.tStoreXHR[recid]);var xhr=new XMLHttpRequest;window.tStoreXHR[recid]=xhr,xhr.onload=function(){if(xhr.readyState===xhr.DONE&&200===xhr.status){var data=xhr.responseText;clearTimeout(rec.getAttribute("data-preloader-timeout"));var gridPreloader=rec.querySelector(".js-store-grid-cont-preloader");if(gridPreloader&&(gridPreloader.style.display="none"),options.sidebar){var t951GridContainer=rec.querySelector(".t951__grid-cont");t951GridContainer&&t951GridContainer.classList.remove("t951__grid-cont_hidden")}if(isFirstSlice&&gridContainer&&(gridContainer.innerHTML=""),"string"==typeof data&&"{"!==data.substring(0,1)&&(-1!==data.indexOf("ERROR:")||-1!==data.indexOf("Wrong"))){var el_errorBox=t_store_get_errorBox(options,data);return gridContainer.insertAdjacentHTML("beforeend",el_errorBox),void t_store__fadeIn(rec.querySelector(".js-store-error-msg"))}if(""===data)return;var obj={};try{(obj=JSON.parse(data)).partlinks&&(options.linksSizeChart=obj.partlinks)}catch(e){console.log(data)}if("object"!=typeof obj)return;var productsArr=showRelevants?obj.relevants:obj.products;if(obj.options&&obj.options.length>=1&&(window.tStoreOptionsList=obj.options),t_store_process(productsArr,recid,options,!!slice,showRelevants,obj),obj.parts&&obj.parts.length>1&&!rec.querySelector(".js-store-parts-switcher")&&!options.hideStoreParts){var onLoadFilters=function(){t_store_onFuncLoad("t_store_addStoreParts",(function(){t_store_addStoreParts(recid,options,obj.parts),t_store_setActiveStorePart(recid)}))},fileName="tilda-catalog-filters-1.0";if(document.head.querySelector('script[src*="'+fileName+'"]'))onLoadFilters();else{var script=document.createElement("script");script.type="text/javascript",script.src="https://static.tildacdn.com/js/"+fileName+".min.js",script.onload=onLoadFilters,script.onerror=function(){console.error("Failed to load tilda-catalog-filters: ",this.src)},document.head.appendChild(script)}if(!document.head.querySelector('link[href*="'+fileName+'"]')){var link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href="https://static.tildacdn.com/css/"+fileName+".min.css",link.media="all",document.head.appendChild(link)}}window.tStoreFilters||(window.tStoreFilters={});var data=window.tStoreFilters[recid];if("y"===obj.filter&&!options.hideFilters&&data)data&&(data.filters&&data.filters.length>0||data.search||data.sort)&&t_store_onFuncLoad("t_store_filters_init",(function(){t_store_filters_init(recid,options,data),showRelevants||t_store_filters_prodsNumber_update(rec,options,obj)}));else if(options.sidebar&&!showRelevants&&obj.parts&&0===obj.parts.length){var el_sidebar=rec.querySelector(".t951__sidebar");if(el_sidebar){el_sidebar.classList.add("t951__sidebar_empty");var text="RU"===window.tStoreBrowserLang?'Пожалуйста, добавьте хотя бы один фильтр каталога для отображения боковой панели магазина. <a href="https://help-ru.tilda.cc/online-store-payments/filters" target="_blank" rel="nofollow noopener">Справка</a>':'Please <a href="https://help.tilda.cc/online-store-payments/filters" target="_blank" rel="nofollow noopener">add at least one catalog filter</a> to display the store sidebar';el_sidebar.innerHTML='<span class="t-text t-text_xxs">'+text+"</span>"}}if(t_store_isQueryInAddressBar("tstore")&&window.t_store__scrollToBlock){var hashArr=decodeURI(window.location.hash).split("/"),storeuidIndex=hashArr.indexOf("r")+1,storeuid;hashArr[storeuidIndex]===recid&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:0,top:rec.getBoundingClientRect().top+window.pageYOffset-50,behavior:"smooth"}):window.scrollTo(0,rec.getBoundingClientRect().top+window.pageYOffset-50),window.t_store__scrollToBlock=null)}var loadMoreBtn=rec.querySelector(".js-store-load-more-btn");loadMoreBtn&&loadMoreBtn.classList.remove("t-btn_sending");var loadMoreScrollEvent=t_throttle((function(){if(!window.tStoreProductsRequested&&window.innerWidth<960){var scrollWidth=gridContainer.scrollWidth,scrollLeft=gridContainer.scrollLeft,offsetWidth;gridContainer.offsetWidth+scrollLeft+20>scrollWidth&&"none"!==loadMoreBtn.style.display&&(loadMoreBtn.click(),gridContainer.removeEventListener("scroll",loadMoreScrollEvent))}})),isMobileOneRow=gridContainer&&gridContainer.classList.contains("t-store__grid-cont_mobile-one-row");if(obj.nextslice){if(!loadMoreBtn){var pagination;if(loadMoreBtn=t_store_get_loadMoreBtn_html(rec,options),options.sidebar)rec.querySelector(".t951__cont-w-filter .t951__cont-wrapper + .t-store__pagination")||rec.querySelector(".t951__cont-w-filter").insertAdjacentHTML("beforeend",loadMoreBtn);else if(!showRelevants){var gridCont=rec.querySelector(".js-store-grid-cont");gridCont&&gridCont.insertAdjacentHTML("afterend",loadMoreBtn)}loadMoreBtn=rec.querySelector(".js-store-load-more-btn")}if(loadMoreBtn){loadMoreBtn.style.display="";var loadMoreBtnClickEvent=function(){window.tStoreProductsRequested||(loadMoreBtn.classList.add("t-btn_sending"),t_store_loadProducts("",recid,options,obj.nextslice))};loadMoreBtn.parentNode.replaceChild(loadMoreBtn.cloneNode(!0),loadMoreBtn),(loadMoreBtn=rec.querySelector(".js-store-load-more-btn")).addEventListener("click",loadMoreBtnClickEvent)}isMobileOneRow&&gridContainer.addEventListener("scroll",loadMoreScrollEvent)}else showRelevants||(loadMoreBtn&&(loadMoreBtn.style.display="none"),gridContainer&&gridContainer.removeEventListener("scroll",loadMoreScrollEvent));if(options.showPagination&&"on"===options.showPagination&&!showRelevants&&t_store_onFuncLoad("t_store_pagination_draw",(function(){t_store_pagination_draw(recid,options,slice,obj.total)})),isMobileOneRow){var curMode=document.getElementById("allrecords").getAttribute("data-tilda-mode");gridContainer&&"edit"!==curMode&&"preview"!==curMode&&("y"!==window.lazy&&"yes"!==document.getElementById("allrecords").getAttribute("data-tilda-lazy")||t_store_onFuncLoad("t_lazyload_update",(function(){gridContainer.addEventListener("scroll",t_throttle((function(){t_lazyload_update()})))})))}if(showRelevants){rec.querySelector(".t-store__relevants-grid-cont").style.opacity=1;var blocksInRowForRelevant=4;options.relevants_slider&&(productsArr.length>4||window.innerWidth<=960)&&t_store_onFuncLoad("t_sldsInit",(function(){t_sldsInit(recid+" .js-store-relevants-grid-cont")}))}isT973&&!showRelevants&&t_store_onFuncLoad("t_sldsInit",(function(){t_sldsInit(recid+" .js-store-grid-cont")})),options.verticalAlignButtons&&t_store_verticalAlignButtons(recid,options),options.verticalAlignButtons&&("complete"===document.readyState?t_store_verticalAlignButtons(recid,options):window.addEventListener("load",(function(){t_store_verticalAlignButtons(recid,options)}))),options.itemsAnim&&options.previewmode&&t_store_onFuncLoad("t_animate__startAnimation",(function(){t_animate__startAnimation()})),gridContainer.style.height="",t_triggerEvent(document.body,"twishlist_addbtn"),t_triggerEvent(gridContainer,"tStoreRendered"),window.tStoreProductsRequested=!1}},xhr.ontimeout=xhr.onerror=function(error){if(-1!==window.t_store_endpoint.indexOf("store.tilda"))t_store_changeEndpoint(error,(function(){t_store_loadProducts(method,recid,options,slice,relevantsOpts)}));else{var loadMoreBtn=rec.querySelector(".js-store-load-more-btn");loadMoreBtn&&loadMoreBtn.classList.remove("t-btn_sending");var ts_delta=Date.now()-ts;0===xhr.status&&ts_delta<100&&console.log("Request error (get store products). Please check internet connection..."),window.tStoreProductsRequested=!1;var gridPreloader=rec.querySelector(".js-store-grid-cont-preloader");gridPreloader&&(gridPreloader.style.display="none");var el_errorBox=t_store_get_errorBox(options,'Request timeout (40s). Please check internet connection and <a href="javascript:window.location.reload();" style="text-decoration:underline">reload the page</a>. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a catalog" style="text-decoration:underline">team@tilda.cc</a>.');gridContainer.insertAdjacentHTML("beforeend",el_errorBox),t_store__fadeIn(rec.querySelector(".js-store-error-msg"))}},xhr.open("GET",apiUrl+"?"+t_store__serializeData(dataObj)),xhr.timeout=2e4,xhr.send()}}function t_store_loadOneProduct(recid,options,curProdUid,onDone,onFail){var c=Date.now(),storepartuid,dataObj={storepartuid:options.storepart,recid:recid,productuid:curProdUid,c:c},xhr=new XMLHttpRequest;if(xhr.onload=function(){xhr.readyState===xhr.DONE&&200===xhr.status&&onDone()},xhr.ontimeout=xhr.onerror=function(error){console.log("Can't get product with uid = "+curProdUid+" in storepart = "+options.storepart),"function"==typeof onFail&&onFail(error)},!window.t_store_endpoint){window.t_store_endpoint="store.tildacdn.com";try{var rootzoneapi=document.getElementById("allrecords").getAttribute("data-tilda-root-zone");rootzoneapi&&(window.t_store_endpoint="store.tildaapi."+rootzoneapi)}catch(e){}}xhr.open("GET","https://"+window.t_store_endpoint+"/api/getproduct/?"+t_store__serializeData(dataObj)),xhr.timeout=2e4,xhr.send()}function t_store_loadProducts_byId(idArr,options,onDone,onFail){var c=Date.now(),dataObj={productsuid:idArr,c:c};if(!window.t_store_endpoint){window.t_store_endpoint="store.tildacdn.com";try{var rootzoneapi=document.getElementById("allrecords").getAttribute("data-tilda-root-zone");rootzoneapi&&(window.t_store_endpoint="store.tildaapi."+rootzoneapi)}catch(e){}}var apiUrl="https://"+window.t_store_endpoint+"/api/getproductsbyuid/";if(options&&!options.isPublishedPage){dataObj.projectid=document.getElementById("allrecords").getAttribute("data-tilda-project-id");var domainParts=window.location.hostname.split("."),link;apiUrl="https://"+("tilda."+domainParts[domainParts.length-1])+"/projects/store/getproductsbyuid/"}dataObj=JSON.stringify(dataObj);var xhr=new XMLHttpRequest;xhr.onload=function(){xhr.readyState===xhr.DONE&&200===xhr.status&&("string"==typeof xhr.responseText&&"{"===xhr.responseText.substring(0,1)||console.log("Can't get products array by uid list"),onDone(JSON.parse(xhr.responseText)))},xhr.ontimeout=xhr.onerror=function(error){console.log("Can't get getproductsbyuid. Requesting idArr: "+idArr),"function"==typeof onFail&&onFail(error)},xhr.open("POST",apiUrl),xhr.timeout=2e4,xhr.send(dataObj)}function t_store_loadFilters(options,onDone,onFail){var c=Date.now(),storepartuid,dataObj={storepartuid:options.storepart,c:c};if(!window.t_store_endpoint){window.t_store_endpoint="store.tildacdn.com";try{var rootzoneapi=document.getElementById("allrecords").getAttribute("data-tilda-root-zone");rootzoneapi&&(window.t_store_endpoint="store.tildaapi."+rootzoneapi)}catch(e){}}var apiUrl="https://"+window.t_store_endpoint+"/api/getfilters/";if(!options.isPublishedPage){var allRecords=document.getElementById("allrecords");allRecords&&(dataObj.projectid=allRecords.getAttribute("data-tilda-project-id"));var domainParts=window.location.hostname.split("."),link;apiUrl="https://"+("tilda."+domainParts[domainParts.length-1])+"/projects/store/getfilters/"}var xhr=new XMLHttpRequest;xhr.onload=function(){if(xhr.readyState===xhr.DONE&&200===xhr.status)try{onDone(JSON.parse(xhr.responseText))}catch(e){onDone()}},xhr.ontimeout=xhr.onerror=function(error){console.log("Can't get filters in storepart = "+options.storepart),"function"==typeof onFail&&onFail(error)},xhr.open("GET",apiUrl+"?"+t_store__serializeData(dataObj)),xhr.timeout=2e4,xhr.send()}function t_store_process(productsArr,recid,options,isNextSlice,isRelevantsShow,obj){var rec=document.getElementById("rec"+recid);if(rec){var gridContainer=rec.querySelector(".js-store-grid-cont");if(gridContainer){var isT973="973"===rec.getAttribute("data-record-type"),isT1025="1025"===options.prodCard.blockId,isST310=!!options.prodCard.hasWrap,isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"));isRelevantsShow&&(gridContainer=rec.querySelector(".js-store-relevants-grid-cont"));var separator=t_store_get_horizSeparator_html(options),obj_products={},countProducts=gridContainer.querySelectorAll(".t-store__card").length;if(0===productsArr.length){var el_emptyMsg=t_store_get_emptyMsg_html(options);return gridContainer.insertAdjacentHTML("beforeend",el_emptyMsg),void t_store__fadeIn(rec.querySelector(".js-store-empty-part-msg"))}if(isRelevantsShow&&options.relevants_slider&&options.prodCard.shadowSize&&options.prodCard.shadowSize.length){var paddingStyle="",shadowSize=parseInt(options.prodCard.shadowSize,10);shadowSize=shadowSize>10?10:shadowSize,isNaN(shadowSize)&&(shadowSize=0);var shadowSizeHover=parseInt(options.prodCard.shadowSizeHover,10);shadowSizeHover=shadowSizeHover>40?40:shadowSizeHover,isNaN(shadowSizeHover)&&(shadowSizeHover=0);var shadowOpacityHover=options.prodCard.shadowOpacityHover,shadowShiftyHover=options.prodCard.shadowShiftyHover,maxSize=Math.max(shadowSizeHover,shadowSize);paddingStyle+="<style>\n",shadowSizeHover&&shadowOpacityHover&&isST310&&(paddingStyle+="#rec"+recid+" .t-store .t-store__relevants__container .t-store__relevants-grid-cont .t-store__card__wrap_all:hover {",paddingStyle+="box-shadow: 0px "+("sm"===shadowShiftyHover?"10px":"md"===shadowShiftyHover?"20px":"0px")+" "+(shadowSizeHover?shadowSizeHover+"px":"20px")+" 0px rgba(0, 0, 0, "+(shadowOpacityHover?"0."+shadowOpacityHover:"0.3")+") !important;",paddingStyle+="}\n"),paddingStyle+="@media screen and (max-width:960px) {\n",paddingStyle+="#rec"+recid+" .t-store .t-store__relevants__container .t-store__relevants-grid-cont .t-store__card__wrap_all {\n",paddingStyle+="margin: "+shadowSize+"px;\n",paddingStyle+="}\n",paddingStyle+="}\n",paddingStyle+="@media screen and (min-width:961px) {\n",paddingStyle+="#rec"+recid+" .t-store .t-store__relevants__container .t-store__relevants-grid-cont .t-slds__items-wrapper {\n",paddingStyle+="padding-top: "+maxSize+"px;\n",paddingStyle+="padding-bottom: "+maxSize+"px;\n",paddingStyle+="}\n",paddingStyle+="#rec"+recid+" .t-store .t-store__relevants__container .t-store__relevants__title-wrapper .t-store__relevants__title {\n",paddingStyle+="margin-bottom: "+(40-maxSize)+"px;\n",paddingStyle+="}\n",paddingStyle+="}\n",paddingStyle+="</style>";var relevantsPopup=rec.querySelector(".t-popup .t-store__relevants__container");if(relevantsPopup&&relevantsPopup.insertAdjacentHTML("beforebegin",paddingStyle),isSnippet){var relevantsSnippet=rec.querySelector(".t-store__product-snippet + .t-store__relevants__container");relevantsSnippet&&(relevantsSnippet.insertAdjacentHTML("beforebegin",paddingStyle),options.isFlexCols&&relevantsSnippet.classList.add("t-store__grid-cont_col-width_stretch"))}}var productsHtml="",blocksInRowForRelevant=4,blocksInRow=isRelevantsShow?4:options.blocksInRow,storeTailGap;if(isRelevantsShow&&options.relevants_slider&&(productsArr.length>4||window.innerWidth<=960)||!isRelevantsShow&&isT973){var animationduration="",animationspeed="300";"fast"===options.slider_opts.anim_speed&&(animationduration="t-slds_animated-fast"),"slow"===options.slider_opts.anim_speed&&(animationduration="t-slds_animated-slow",animationspeed="500"),productsHtml+='<div class="t-slds" style="visibility: hidden;">',productsHtml+='<div class="t-slds__main t-container">',productsHtml+='<div class="t-slds__container">',productsHtml=(productsHtml+='<div class="t-slds__items-wrapper '+animationduration+'" data-slider-items-in-row="'+(!isRelevantsShow&&isT973?blocksInRow:4)+'" data-slider-transition="'+animationspeed+'" data-slider-with-cycle="true" data-slider-cycle="yes" data-slider-correct-height="'+(!isRelevantsShow&&isT973?"true":"false")+'" data-auto-correct-mobile-width="false">').replace("[[noCycleClass]]",options.slider_opts.cycle?"":"t-slds__nocycle").replace("[[isCycled]]",options.slider_opts.cycle?"true":"false")}if(Array.prototype.forEach.call(productsArr,(function(product){var minPrice=null,maxPrice=null;t_store_onFuncLoad("t_store__cleanPrice",(function(){product.editions.forEach((function(edition){if(edition.price&&""!==edition.price){var price=t_store__cleanPrice(edition.price);minPrice=null===minPrice?price:Math.min(minPrice,price),maxPrice=null===maxPrice?price:Math.max(maxPrice,price)}}))})),product.minPrice=minPrice,product.maxPrice=maxPrice})),Array.prototype.forEach.call(productsArr,(function(product,i){(!isRelevantsShow&&!isT973&&!isT1025||isRelevantsShow&&!options.relevants_slider)&&countProducts>0&&countProducts%blocksInRow==0&&(productsHtml+=separator),productsHtml+=t_store_get_productCard_html(rec,product,options,isRelevantsShow,i,productsArr),obj_products[product.uid]=product,countProducts++})),isRelevantsShow&&options.relevants_slider&&(productsArr.length>4||window.innerWidth<=960)||!isRelevantsShow&&isT973){var arrowsTplEl,arrowsTpl=rec.querySelector(".js-store-tpl-slider-arrows").innerHTML;if(productsHtml+="</div>",productsHtml+="</div>",arrowsTpl&&!isRelevantsShow&&isT973&&(productsHtml+=arrowsTpl,gridContainer.classList.remove("t-container"),gridContainer.classList.remove("t-store__grid-cont_mobile-grid")),!isRelevantsShow&&isT973){var strBullets='<div class="t-slds__bullet_wrapper">';Array.prototype.forEach.call(productsArr,(function(product,i){var key=i+1;strBullets+='<div class="t-slds__bullet'+(1===key?" t-slds__bullet_active":"")+'" data-slide-bullet-for="'+key+'"><div class="t-slds__bullet_body" style="background-color: transparent;"></div></div>'})),productsHtml+=strBullets+="</div>"}productsHtml+="</div>",productsHtml+="</div>",arrowsTpl&&isRelevantsShow&&(productsHtml+=arrowsTpl)}if(t_store_process_appendAndShowProducts(rec,gridContainer,productsHtml),-1===productsHtml.indexOf('data-animate-style="fadeinleft"')||gridContainer.classList.contains("t-store__grid-cont_mobile-one-row")||(gridContainer.style.overflowX="hidden"),Array.prototype.forEach.call(productsArr,(function(productObj){var el_product=isRelevantsShow?rec.querySelector('.t-store__relevants__container .js-product.t-item[data-product-gen-uid="'+productObj.uid+'"]'):rec.querySelector('.t-store__grid-cont .js-product.t-item[data-product-gen-uid="'+productObj.uid+'"]'),isSoldOut;el_product.setAttribute("data-card-size","small"),productObj=obj_products[productObj.uid],parseInt(productObj.quantity,10)<=0||"both"!==options.showStoreBtnQuantity&&"list"!==options.showStoreBtnQuantity||t_store_addProductQuantity(el_product,productObj,options),t_store_addProductOptions(recid,productObj,el_product,options),t_store_option_handleOnChange(el_product),t_store_option_handleOnChange_custom(recid,el_product,options),t_store_onFuncLoad("t_prod__initProduct",(function(){t_prod__initProduct(el_product,options)}))})),!isRelevantsShow&&window.tStoreFilters&&"object"==typeof window.tStoreFilters&&window.tStoreFilters[recid]&&"object"==typeof window.tStoreFilters[recid]&&window.tStoreCustomUrlParams&&"object"==typeof window.tStoreCustomUrlParams&&window.tStoreCustomUrlParams[recid]&&"object"==typeof window.tStoreCustomUrlParams[recid]&&Array.prototype.forEach.call(productsArr,(function(productObj){var el_product=rec.querySelector('.t-store__grid-cont .js-product.t-item[data-product-gen-uid="'+productObj.uid+'"]');Array.prototype.forEach.call(el_product.querySelectorAll(".js-product-edition-option"),(function(editionOption){var valueIsChanged=!1,select=editionOption.querySelector("select");select&&Object.keys(window.tStoreCustomUrlParams[recid]).forEach((function(key){Array.prototype.slice.call(window.tStoreFilters[recid].filters).forEach((function(filter){if(filter.name===key&&filter.name.indexOf("charact")<0){var values=window.tStoreCustomUrlParams[recid][key];"object"==typeof values&&values.slice().reverse().forEach((function(value){if(!valueIsChanged)if(value!==select.value){var option=select.querySelector('[value="'+t_store_escapeQuote(value)+'"]');option&&!option.getAttribute("disabled")&&(select.value=value,t_triggerEvent(select,"change"),valueIsChanged=!0)}else t_triggerEvent(select,"change"),valueIsChanged=!0}))}}))}))}))})),!isNextSlice&&options.isFlexCols&&options.isHorizOnMob)t_store__removeElement(gridContainer.querySelector(".t-store__tail-gap")),gridContainer.insertAdjacentHTML("beforeend",'<div class="t-store__tail-gap"></div>');if("y"!==window.lazy&&"yes"!==document.getElementById("allrecords").getAttribute("data-tilda-lazy")||(options.relevants_slider?setTimeout((function(){t_store_onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()}))}),100):t_store_onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()}))),document.querySelector(".t706__cartwin")||document.querySelector(".t706__sidebar")?"function"==typeof tcart__addEvent__links&&tcart__addEvent__links(recid):console.log("Warning: cart block is not added to this page"),t_store_initPopup(recid,obj_products,options,isRelevantsShow,obj),"1025"==options.prodCard.blockId?t_store_unifyCardsWidth(recid):(setTimeout((function(){t_store_unifyCardsHeights(recid,options),options.verticalAlignButtons&&t_store_verticalAlignButtons(recid,options)}),1),document.fonts&&document.fonts.ready?document.fonts.ready.then((function(){setTimeout((function(){t_store_unifyCardsHeights(recid,options)}),1e3)})):setTimeout((function(){t_store_unifyCardsHeights(recid,options)}),1e3),options.verticalAlignButtons&&("complete"===document.readyState?t_store_verticalAlignButtons(recid,options):window.addEventListener("load",(function(){t_store_verticalAlignButtons(recid,options)})))),!options.previewmode)try{addEditFieldEvents_new(recid)}catch(e){console.log(e.message)}}}}function t_store_process_appendAndShowProducts(el_rec,gridContainer,productsHtml){gridContainer.insertAdjacentHTML("beforeend",productsHtml),!0===el_rec.getAttribute("data-already-loaded-first-products")?setTimeout((function(){Array.prototype.forEach.call(el_rec.querySelectorAll(".t-store__card"),(function(card){card.classList.remove("t-store__card_hidden")}))}),10):(Array.prototype.forEach.call(el_rec.querySelectorAll(".t-store__card"),(function(card){card.classList.remove("t-store__card_hidden")})),el_rec.setAttribute("data-already-loaded-first-products",!0))}function t_store_mobileHoriz_checkBtnVisibility(recid,options){var hideLoadBtn=function(recid,opts){var rec=document.getElementById("rec"+recid),loadMoreBtn;window.innerWidth<960&&opts.hasMobileHorizScroll&&t_store__removeElement(rec.querySelector(".js-store-load-more-btn"))};hideLoadBtn(recid,options),window.addEventListener("resize",t_throttle((function(){hideLoadBtn(recid,options)}),500))}function t_store_get_productPopup_html(recid,options){var str="",statAttr=options.popup_opts.popupStat?'data-track-popup="'+options.popup_opts.popupStat+'"':"",popupStyle=options.popup_opts.overlayBgColorRgba?'style="background-color:'+options.popup_opts.overlayBgColorRgba+'"':"",containerClass="t-popup__container t-popup__container-static ",verticalAlignClass=options.verticalAlignButtons?"t-store__valign-buttons":"",showRelevants=options.showRelevants,titleRelevants=options.titleRelevants?options.titleRelevants:window.tStoreDict.seeAlso,mobileOneRowClass=options.relevants_slider?"":"t-store__grid-cont_mobile-one-row",anotherGalleryStyle=options.galleryStyle&&""!==options.galleryStyle&&parseInt(options.popup_opts.columns,10)+parseInt(options.popup_opts.columns2,10)<=12;options.popup_opts.isVertical&&(containerClass+="t-store__popup-container_8-cols ");var containerStyle="",sliderClass=options.popup_opts.isVertical?"":"t-store__prod-popup__col-left t-col t-col_"+options.popup_opts.columns,infoAlignClass,infoClass="t-align_"+("center"===options.popup_opts.align?"center":"left")+" "+(options.popup_opts.isVertical?"":"t-store__prod-popup__col-right t-col t-col_"+options.popup_opts.columns2),productElClass="js-store-product js-product t-store__product-popup ";options.popup_opts.containerBgColor&&(containerStyle+="background-color:"+options.popup_opts.containerBgColor+";"),"100"===options.popup_opts.popupContainer&&(containerStyle+="max-width:100%;",productElClass+="t-container_fluid "),str+='<div class="t-popup" '+statAttr+" "+popupStyle+">",str+=t_store_get_productPopup_closeIcon_html(options),str+=t_store_get_productPopup_closeText_html(options),str+='<div class="'+containerClass+'" style="'+containerStyle+'" >',str+="<div>",str+='<div class="t-store__prod-popup__container">',str+='<div class="'+productElClass+'">';var popupContainerClasses=[];return"100"===options.popup_opts.popupContainer&&popupContainerClasses.push("t-container_fluid"),options.popup_opts.mobileGalleryStyle&&popupContainerClasses.push("t-store__popup-with-mobile-gallery"),str+=popupContainerClasses.length?'<div class="'+popupContainerClasses.join(" ")+'">':"<div>",anotherGalleryStyle&&(str+='<div class="t-store__prod-popup__gallery-column js-store-prod-gallery-column '+sliderClass+' t-store__prod-popup__col_fixed"></div>'),str+='<div class="t-store__prod-popup__slider js-store-prod-slider '+sliderClass+'"></div>',options.popup_opts.mobileGalleryStyle&&(str+='<div class="t-store__prod-popup__mobile-custom-gallery js-store-mobile-custom-gallery '+sliderClass+'"></div>'),str+='<div class="t-store__prod-popup__info '+infoClass+(anotherGalleryStyle?" t-store__prod-popup__col_fixed":"")+'">',str+=t_store_get_productPopup_titleText_html(),str+='<div class="js-store-price-wrapper t-store__prod-popup__price-wrapper">',str+=t_store_get_productPopup_onePrice_html(options,"current"),str+=t_store_get_productPopup_onePrice_html(options,"old"),str+="</div>",str+='<div class="js-product-controls-wrapper"></div>',str+=t_store_get_productPopup_linksSizeChart_html(),str+=t_store_get_productPopup_buyBtn_html(options),str+=t_store_get_productPopup_text_html(),str+="</div>",str+="</div>",str+="</div>",showRelevants&&(str+='                <div class="t-store__relevants__container">',str+='                    <div class="t-store__relevants__title-wrapper">',str+='                        <div class="t-store__relevants__title t-uptitle t-uptitle_xxl"'+(Object.prototype.hasOwnProperty.call(options.typo,"title")?'style = "'+options.typo.title+'"':"")+">"+titleRelevants+"</div>",str+="                    </div>",options.relevants_slider||(str+=t_store_get_handIcon_html(recid)),str+='                    <div class="t-store__relevants-grid-cont js-store-relevants-grid-cont '+verticalAlignClass+" "+mobileOneRowClass+'"></div>',str+="                </div>"),str+="            </div>",str+="        </div>",str+="    </div>",str+="</div>"}function t_store_get_productPopup_text_html(){var str="";return str+='<div class="js-store-prod-text t-store__prod-popup__text t-typography__descr t-descr t-descr_xxs"></div>'}function t_store_get_productPopup_linksSizeChart_html(){var str="";return str+='<div class="t-store__prod-popup__links-wrapper"></div>'}function t_store_get_productPopup_buyBtn_html(options){var str="",btnStyle=options.btn1_style,btnTitle=options.popup_opts.btnTitle;return""!==btnTitle&&(str+='<div class="t-store__prod-popup__btn-wrapper js-store-buttons-wrapper">',str+='<a href="#order" class="t-store__prod-popup__btn t-btn t-btn_sm" style="'+btnStyle+'">',str+='<table style="width:100%; height:100%;"><tr><td class="js-store-prod-popup-buy-btn-txt">',str+=btnTitle,str+="</td></tr></table>",str+="</a>",str+="</div>"),str}function t_store_get_productPopup_onePrice_html(options,type){var str="",priceStylingClass="current"===type?"js-store-prod-price t-store__prod-popup__price":"js-store-prod-price-old t-store__prod-popup__price_old",shouldUseInlineStyleForPrice=Object.prototype.hasOwnProperty.call(options.price,"fontWeight")&&Object.prototype.hasOwnProperty.call(options.price,"fontSize"),styleAttr,styleStr="",color="current"===type?options.price.color:options.price.colorOld,popupContainerBgColor=options.popup_opts.containerBgColor;0===Math.abs(t_store_getLightnessColor(color)-t_store_getLightnessColor(popupContainerBgColor))&&(color=t_store_luma_rgb(popupContainerBgColor),shouldUseInlineStyleForPrice||(styleStr+=color?"color:"+color+";":"")),shouldUseInlineStyleForPrice&&(styleStr+=color?"color:"+color+";":"",styleStr+=options.price.fontWeight?"font-weight:"+options.price.fontWeight+";":""),styleAttr=""!==styleStr?'style = "'+styleStr+'"':"";var currency=options.currencyTxt?'<div class="t-store__prod-popup__price-currency" translate="no">'+options.currencyTxt+"</div>":"",jsProdClass="current"===type?"js-product-price js-store-prod-price-val":"js-store-prod-price-old-val";return str+='<div class="'+priceStylingClass+' t-store__prod-popup__price-item t-name t-name_md" '+styleAttr+">",str+="r"!==options.currencySide&&currency?currency:"",str+='<div class="'+jsProdClass+' t-store__prod-popup__price-value" translate="no"></div>',str+="r"===options.currencySide&&currency?currency:"",str+="</div>"}function t_store_get_productPopup_titleText_html(){var str="";return str+='<div class="t-store__prod-popup__title-wrapper">',str+='    <div class="js-store-prod-name js-product-name t-store__prod-popup__name t-typography__title t-name t-name_xl"></div>',str+='    <div class="t-store__prod-popup__brand t-typography__sku t-descr t-descr_xxs"></div>',str+='    <div class="t-store__prod-popup__sku t-typography__sku t-descr t-descr_xxs">',str+=window.tStoreDict.sku+": ",str+='<span class="js-store-prod-sku js-product-sku">',str+="</span>",str+="    </div>",str+="</div>"}function t_store_get_productPopup_closeIcon_html(options){var str="",iconFillColor=options.popup_opts.iconColor?options.popup_opts.iconColor:"#000000",bgColor=options.popup_opts.overlayBgColorRgba?t_store_removeRgbOpacity(options.popup_opts.overlayBgColorRgba):options.popup_opts.containerBgColor,containerFillColor=bgColor&&bgColor.length?bgColor:"#ffffff",color;options.popup_opts.overlayBgColorRgba&&!options.popup_opts.iconColor&&(iconFillColor=t_store_luma_rgb(t_store_removeRgbOpacity(options.popup_opts.overlayBgColorRgba)));return str+='<div class="t-popup__close" style="background-color: '+containerFillColor+'">',str+='    <div class="t-popup__close-wrapper">',str+='<svg class="t-popup__close-icon t-popup__close-icon_arrow" width="26px" height="26px" viewBox="0 0 26 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">',str+='<path d="M10.4142136,5 L11.8284271,6.41421356 L5.829,12.414 L23.4142136,12.4142136 L23.4142136,14.4142136 L5.829,14.414 L11.8284271,20.4142136 L10.4142136,21.8284271 L2,13.4142136 L10.4142136,5 Z" fill="'+iconFillColor+'"></path>',str+="</svg>",str+='        <svg class="t-popup__close-icon t-popup__close-icon_cross" width="23px" height="23px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">',str+='            <g stroke="none" stroke-width="1" fill="'+iconFillColor+'" fill-rule="evenodd">',str+='                <rect transform="translate(11.313708, 11.313708) rotate(-45.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect>',str+='                <rect transform="translate(11.313708, 11.313708) rotate(-315.000000) translate(-11.313708, -11.313708) " x="10.3137085" y="-3.6862915" width="2" height="30"></rect>',str+="            </g>",str+="        </svg>",str+="    </div>",str+="</div>"}function t_store_get_productPopup_closeIcon_color(recid,options){var iconFillColor=options.popup_opts.iconColor?options.popup_opts.iconColor:"#000000",bgColor=options.popup_opts.overlayBgColorRgba?t_store_removeRgbOpacity(options.popup_opts.overlayBgColorRgba):options.popup_opts.containerBgColor,containerFillColor=bgColor&&bgColor.length?bgColor:"#ffffff",color;options.popup_opts.overlayBgColorRgba&&!options.popup_opts.iconColor&&(iconFillColor=t_store_luma_rgb(color=t_store_removeRgbOpacity(options.popup_opts.overlayBgColorRgba)));var rec=document.getElementById("rec"+recid),isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet")),wrapper=isSnippet?rec.querySelector(".t-store__prod-snippet__container"):rec.querySelector(".t-popup"),el_close;wrapper.querySelector(".t-popup__close").style.backgroundColor=containerFillColor;var el_icon_cross=wrapper.querySelector(".t-popup__close-icon_cross"),el_icon_arrow;if(isSnippet&&!options.popup_opts.iconColor&&Math.abs(t_store_getLightnessColor(iconFillColor)-t_store_getLightnessColor(t_store_removeRgbOpacity(containerFillColor)))>.1){var color=t_store_removeRgbOpacity(options.popup_opts.containerBgColor)||"rgb(255,255,255)";el_icon_cross.querySelector("g").setAttribute("fill",t_store_luma_rgb(color))}else el_icon_cross.querySelector("g").setAttribute("fill",iconFillColor);wrapper.querySelector(".t-popup__close-icon_arrow").querySelector("path").setAttribute("fill",iconFillColor)}function t_store_get_productPopup_closeText_html(options){if(!options.popup_opts.closeText)return"";var closeRichText=t_store_unescapeHtml(options.popup_opts.closeText),iconFillColor=options.popup_opts.iconColor?options.popup_opts.iconColor:"#000000",containerFillColor=options.popup_opts.containerBgColor&&options.popup_opts.containerBgColor.length?options.popup_opts.containerBgColor:"#ffffff",rgbColor;options.popup_opts.containerBgColor&&!options.popup_opts.iconColor&&(iconFillColor=t_store_luma_rgb(t_store_hexToRgb(containerFillColor)));var style,str="";return str+='<div class="t-store__prod-popup__close-txt-wr">',str+='    <div class="js-store-close-text t-store__prod-popup__close-txt t-descr t-descr_xxs" '+('style="color:'+iconFillColor+'"')+">",str+=closeRichText,str+="    </div>",str+="</div>"}function t_store_get_loadMoreBtn_html(el_rec,options){var str="",isMobileOneRow,className,btnSizeClass;return str+='<div class="t-store__load-more-btn-wrap t-align_center'+(!!(window.innerWidth<960&&el_rec.querySelector(".js-store-grid-cont.t-store__grid-cont_mobile-one-row"))?" t-store__load-more-btn-wrap_hidden ":"")+'">',str+='    <div class="js-store-load-more-btn t-store__load-more-btn t-btn '+("sm"===options.btnSize?"t-btn_xs":"t-btn_sm")+'" style="'+options.btn1_style+'display:none;">',str+='        <table style="width:100%; height:100%;"><tr><td>'+window.tStoreDict.loadmore+"</td></tr></table>",str+="    </div>",str+="</div>"}function t_store_get_handIcon_html(recid){var str="",rec=document.getElementById("rec"+recid),size="42",cardFill="rgba(190,190,190,0.3)",handFill="rgba(190,190,190,1)",blendMode="mix-blend-mode: multiply;",blockColorRGB,blockColor=rec.getAttribute("data-bg-color"),isSnippet,luma;(blockColor&&(blockColorRGB=t_store_hexToRgb(blockColor)),document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"))&&(blockColorRGB=rec.style.backgroundColor),blockColorRGB)&&("white"===t_store_luma_rgb(blockColorRGB)&&(blendMode="mix-blend-mode: lighten;"));return str+='<div class="t-store__scroll-icon-wrapper" style="'+blendMode+'">',str+='<?xml version="1.0" encoding="UTF-8"?>',str+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 300" height="42" width="42"> <rect class="tooltip-horizontal-scroll-icon_card" x="480" width="200" height="200" rx="5" fill="'+cardFill+'"></rect> <rect class="tooltip-horizontal-scroll-icon_card" y="0" width="200" height="200" rx="5" fill="'+cardFill+'"></rect> <rect class="tooltip-horizontal-scroll-icon_card" x="240" width="200" height="200" rx="5" fill="'+cardFill+'"></rect> <path class="tooltip-horizontal-scroll-icon_hand" d="M78.9579 285.7C78.9579 285.7 37.8579 212.5 20.5579 180.8C-2.44209 138.6 -6.2422 120.8 9.6579 112C19.5579 106.5 33.2579 108.8 41.6579 123.4L61.2579 154.6V32.3C61.2579 32.3 60.0579 0 83.0579 0C107.558 0 105.458 32.3 105.458 32.3V91.7C105.458 91.7 118.358 82.4 133.458 86.6C141.158 88.7 150.158 92.4 154.958 104.6C154.958 104.6 185.658 89.7 200.958 121.4C200.958 121.4 236.358 114.4 236.358 151.1C236.358 187.8 192.158 285.7 192.158 285.7H78.9579Z" fill="'+handFill+'"></path>',str+="<style> .tooltip-horizontal-scroll-icon_hand { animation: tooltip-horizontal-scroll-icon_anim-scroll-hand 2s infinite } .tooltip-horizontal-scroll-icon_card { animation: tooltip-horizontal-scroll-icon_anim-scroll-card 2s infinite } @keyframes tooltip-horizontal-scroll-icon_anim-scroll-hand { 0% { transform: translateX(80px) scale(1); opacity: 0 } 10% { transform: translateX(80px) scale(1); opacity: 1 } 20%,60% { transform: translateX(175px) scale(.6); opacity: 1 } 80% { transform: translateX(5px) scale(.6); opacity: 1 } to { transform: translateX(5px) scale(.6); opacity: 0 } } @keyframes tooltip-horizontal-scroll-icon_anim-scroll-card { 0%,60% { transform: translateX(0) } 80%,to { transform: translateX(-240px) } }",str+="</style>",str+="</svg>",str+="</div>"}function t_store_get_emptyMsg_html(options){var str="",styles=options.typo.titleColor?"color:"+options.typo.titleColor+";border-color:"+options.typo.titleColor+";":"",classStr="js-store-empty-part-msg t-store__empty-part-msg-cont";return str+='<div class="'+(classStr+=options.colClassFullWidth?" "+options.colClassFullWidth:"")+'" style="display:none;">',str+='    <div class=" t-store__empty-part-msg-wrapper t-descr t-descr_sm" style="'+styles+'">',str+='        <div class="t-store__empty-part-msg">',str+="        "+window.tStoreDict.emptypartmsg,str+="        </div>",str+="    </div>",str+="</div>"}function t_store_get_errorBox(options,errorText){var str="",styles=options.typo.titleColor?"color:"+options.typo.titleColor+";border-color:"+options.typo.titleColor+";":"",classStr="js-store-error-msg t-store__error-msg-cont";return str+="\x3c!--googleoff: all--\x3e",str+="\x3c!--noindex--\x3e",str+='<div class="'+(classStr+=options.colClassFullWidth?" "+options.colClassFullWidth:"")+'" style="display:none;">',str+='    <div class="t-store__error-msg-wrapper t-descr t-descr_sm" style="'+styles+'">',str+='        <div class="t-store__error-msg">',str+="        "+errorText,str+="        </div>",str+="    </div>",str+="</div>",str+="\x3c!--/noindex--\x3e",str+="\x3c!--googleon: all--\x3e"}function t_store_get_productCard_html(rec,product,options,isRelevantsShow,key,productsArr){var colClass=isRelevantsShow?"t-col t-col_3":options.colClass,edition=t_store_product_getFirstAvailableEditionData(product.editions),str="",alignClass="left"===options.align?"t-align_left":"t-align_center",animClass=options.itemsAnim&&options.previewmode?"t-animate":"";if(window.tStoreIsMobile){var connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection;connection&&("slow-2g"!==connection.effectiveType&&"2g"!==connection.effectiveType&&"3g"!==connection.effectiveType||(animClass=""))}var animAttr=options.itemsAnim?'data-animate-style="'+options.itemsAnim+'" data-animate-chain="yes" ':"",isSoldOut=edition.quantity&&parseInt(edition.quantity,10)<=0,quantityAttr='data-product-inv="'+(edition.quantity||"")+'" ',isT1025="1025"===options.prodCard.blockId,btnLink=options.prodCard.btnLink1,url=t_store_get_productCard_link(btnLink,product,isRelevantsShow,rec),linkTarget=t_store_get_productCard_targetAttr(btnLink,product),link={open:options.previewmode?'<a href="'+url+'" '+linkTarget+">":"",close:options.previewmode?"</a>":""};(isSoldOut&&"#order"===url||!document.querySelector(".t706__cartwin")&&!document.querySelector(".t706__sidebar")&&"#order"===url)&&(link.open="",link.close="");var relevantsProductClass="";isRelevantsShow&&(relevantsProductClass="js-product-relevant");var blocksInRowForRelevant=4,pack_label=product.pack_label,pack_m=product.pack_m,pack_x=product.pack_x,pack_y=product.pack_y,pack_z=product.pack_z;key=parseInt(key,10)+1;var isT973MainSlider="973"===rec.getAttribute("data-record-type")&&!isRelevantsShow,needRelevantsSlider=isRelevantsShow&&options.relevants_slider&&(productsArr.length>4||window.innerWidth<=960);(needRelevantsSlider||isT973MainSlider)&&(str+='<div class="t-slds__item t-animate" data-slide-index="'+key+'">',str+='<div class="t__slds-wrapper t-slds__wrapper t-slds__wrapper_100">');var productUrl=product.url||"",t1025Classes="";isT1025&&("2"===options.prodCard.style?t1025Classes+=" t-store__card_in-row":"3"===options.prodCard.style?t1025Classes+=" t-store__card_under-description":t1025Classes+=" t-store__card_in-column",t1025Classes+=options.prodCard.hasSeparator?"":" t-store__card_no-separator",t1025Classes+=parseInt(options.rightColumnWidth,10)?" t-store__card_fixed-width":"",t1025Classes+=options.verticalAlign?" t-store__card_verticalAlign_"+options.verticalAlign:"");var partuids=[];try{partuids=JSON.parse(product.partuids)}catch(e){}return str+='<div class="js-product t-store__card t-store__card_hidden '+t1025Classes+" "+colClass+" "+alignClass+" "+relevantsProductClass+" t-item "+animClass+'" '+animAttr+quantityAttr+'data-product-lid="'+product.uid+'" data-product-uid="'+product.uid+'" data-product-gen-uid="'+product.uid+'" data-product-pack-label="'+pack_label+'" data-product-pack-m="'+pack_m+'" data-product-pack-x="'+pack_x+'" data-product-pack-y="'+pack_y+'" data-product-pack-z="'+pack_z+'" data-product-url="'+productUrl+'" data-product-part-uid="'+partuids.join(",")+'" >',options.prodCard.hasWrap?str+=t_store_get_productCard_wrapperStructure(product,edition,options,link,isRelevantsShow,rec):str+=isT1025&&!isRelevantsShow?t_store_get_productCard_horizontalStructure(product,edition,options,link,isRelevantsShow,rec):t_store_get_productCard_simpleStructure(product,edition,options,link,isRelevantsShow,rec),str+="</div>",(needRelevantsSlider||isT973MainSlider)&&(str+="</div>",str+="</div>"),str}function t_store_get_productCard_simpleStructure(product,edition,options,link,isRelevantsShow,rec){var controlsStyle=options.prodCard.showOpts?"":'style="display:none;"',strImg=t_store_get_productCard_img_html(product,options),str="";return str+=link.open,str+="    "+strImg,str+="    "+t_store_get_productCard_txtAndPrice_html(product,edition,options,strImg),str+=link.close,str+='<div class="js-product-controls-wrapper t-store__card__prod-controls-wrapper" '+controlsStyle+"></div>",str+=t_store_get_productCard_btn_html(product,options,isRelevantsShow,rec)}function t_store_get_productCard_wrapperStructure(product,edition,options,link,isRelevantsShow,rec){var str="",wrapStyles=t_store_get_productCard_getWrapperStylesStr(options),controlsStyle=options.prodCard.showOpts?"":'style="display:none;"',padClass;return str+='<div class="t-store__card__wrap_all '+(options.prodCard&&options.prodCard.txtPad?"t-store__card__wrap_pad-"+options.prodCard.txtPad:"")+'" style="'+wrapStyles+'">',str+="    "+link.open,str+="        "+t_store_get_productCard_img_html(product,options),str+="    "+link.close,str+='    <div class="t-store__card__wrap_txt-and-btns">',str+='        <div class="store__card__wrap_txt-and-opts">',str+="            "+link.open,str+="                "+t_store_get_productCard_txtAndPrice_html(product,edition,options),str+="            "+link.close,str+='            <div class="js-product-controls-wrapper t-store__card__prod-controls-wrapper" '+controlsStyle+"></div>",str+="        </div>",str+="        "+t_store_get_productCard_btn_html(product,options,isRelevantsShow,rec),str+="    </div>",str+="</div>"}function t_store_get_productCard_getWrapperStylesStr(opts){var str="",isShadow;if(str+=opts.prodCard.bgColor?"background-color:"+opts.prodCard.bgColor+";":"",str+=opts.prodCard.borderRadius?"border-radius:"+parseInt(opts.prodCard.borderRadius,10)+"px;":"",opts.prodCard.shadowOpacity&&opts.prodCard.shadowOpacity.length||!(!opts.prodCard.shadowSize||!opts.prodCard.shadowSize.length)){var opacity=opts.prodCard.shadowOpacity?"0."+opts.prodCard.shadowOpacity:"0.3",size;str+="box-shadow: 0px 0px "+(opts.prodCard.shadowSize?parseInt(opts.prodCard.shadowSize,10)+"px":"10px")+" 0px rgba(0, 0, 0, "+opacity+");"}return str}function t_store_get_productCard_img_html(product,options,curImage){var isT1025="1025"===options.prodCard.blockId;if(isT1025&&!options.prodCard.hasImg)return"";var str="",mobileNoPaddingClass=options.hasOriginalAspectRatio&&!options.isHorizOnMob?"t-store__card__imgwrapper_original-ratio":"",wrapperClassStr="t-store__card__imgwrapper ",isSnippet;if(wrapperClassStr+=isT1025?options.imageRatioClass:mobileNoPaddingClass+(options.isFlexCols?" "+options.imageRatioClass:""),document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"))&&!options.colWidth){var colWidth={1:760,2:560,3:360,4:260};options.colWidth=colWidth[options.blocksInRow]}var wrapperStyle=!options.imageHeight||options.isFlexCols||isT1025?"":"padding-bottom:"+100*parseInt(options.imageHeight,10)/(options.colWidth||360)+"%;";if(options.hasOriginalAspectRatio&&options.prodCard.borderRadius){var size=parseInt(options.prodCard.borderRadius,10);wrapperStyle+="border-radius:"+size+"px "+size+"px 0px 0px; overflow: hidden;"}var hoverImgEl=t_store_get_productCard_imgElHover_html(product,options,curImage),hasHover=options.imageHover&&hoverImgEl,imgEl,imgSrc=curImage||t_store_getProductFirstImg(product);if(""!==(imgSrc=imgSrc.replace(/&amp;amp;/,"&amp;"))){var isSafari16_3;if(options.hasOriginalAspectRatio)(imgEl=document.createElement("img")).classList.add("js-product-img"),imgEl.classList.add("t-store__card__img"),hasHover&&imgEl.classList.add("t-store__card__img_hover"),/Version\/16\.3 Safari/.test(navigator.userAgent)&&(imgEl.style.objectFit="contain"),imgEl.classList.add("t-img"),imgEl.setAttribute("data-original",imgSrc),imgEl.src=t_store_getLazySrc(options,imgSrc);else(imgEl=document.createElement("div")).classList.add("js-product-img"),imgEl.classList.add("t-store__card__bgimg"),hasHover&&imgEl.classList.add("t-store__card__bgimg_hover"),imgEl.classList.add("t-bgimg"),imgEl.setAttribute("data-original",imgSrc),imgEl.style.backgroundImage='url("'+t_store_getLazyUrl(options,imgSrc)+'")',t_store_get_productCard_getImgStyles(imgEl,options);if(1===product.editions.length){var edition=t_store_product_getFirstAvailableEditionData(product.editions);edition.uid&&imgEl.setAttribute(options.hasOriginalAspectRatio?"imgfield":"bgimgfield","st_gallery__"+edition.uid+":::0")}return str+='<div class="'+wrapperClassStr+'" style="'+wrapperStyle+'">',str+="    "+t_store_get_productCard_mark_html(product,options),str+="    "+imgEl.outerHTML,str+="    "+(options.imageHover?hoverImgEl:""),str+="</div>"}return""}function t_store_get_productCard_img_replaceWith(product,el_product,options,curImage){var el_image=el_product.querySelector(".t-store__card__imgwrapper"),el_newImage=t_store_get_productCard_img_html(product,options,curImage);el_image&&(el_image.outerHTML=el_newImage),"y"!==window.lazy&&"yes"!==document.getElementById("allrecords").getAttribute("data-tilda-lazy")||t_store_onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()})),t_triggerEvent(document.body,"twishlist_addbtn")}function t_store_get_productCard_imgElHover_html(product,options,curtImg){if(product.gallery&&"["===product.gallery[0]){var galleryArr=JSON.parse(product.gallery);if(void 0!==galleryArr[1]){var imgSrc=galleryArr[1].img,imgEl,isSafari16_3;if(curtImg&&curtImg.length)for(var i=0;i<galleryArr.length;i++){var img=galleryArr[i].img;if(img!==curtImg){imgSrc=img;break}}if(options.hasOriginalAspectRatio)(imgEl=document.createElement("img")).classList.add("t-store__card__img"),imgEl.classList.add("t-store__card__img_second"),imgEl.classList.add("t-img"),imgEl.setAttribute("data-original",imgSrc),imgEl.src=t_store_getLazySrc(options,imgSrc),/Version\/16\.3 Safari/.test(navigator.userAgent)&&(imgEl.style.objectFit="contain");else(imgEl=document.createElement("div")).classList.add("t-store__card__bgimg_second"),imgEl.classList.add("t-bgimg"),imgEl.setAttribute("data-original",imgSrc),imgEl.style.backgroundImage='url("'+t_store_getLazyUrl(options,imgSrc)+'")',t_store_get_productCard_getImgStyles(imgEl,options);return imgEl.outerHTML}}return""}function t_store_get_productCard_getImgStyles(el,options){if(options&&options.prodCard&&options.prodCard.borderRadius){var size=parseInt(options.prodCard.borderRadius,10);el.style.borderRadius=size+"px "+size+"px 0px 0px",size>0&&!window.tStoreIsMobile&&(el.style.top="-2px")}}function t_store_get_productCard_mark_html(product,options){if(!product.mark)return"";var stylesStr="";stylesStr+=options.markColor?"color:"+options.markColor+";":"";var style,str="";return str+='<div class="t-store__card__mark-wrapper">',str+='<div class="t-store__card__mark" '+((stylesStr+=options.markBgColor?"background-color:"+options.markBgColor+";":"")?'style="'+stylesStr+'"':"")+">",str+=product.mark,str+="</div>",str+="</div>"}function t_store_get_productCard_txtAndPrice_html(product,edition,options,strImg){var str="",removePadStyle;return str+='<div class="t-store__card__textwrapper" '+(""===strImg?'style="padding-top:0px;"':"")+">",str+=t_store_get_productCard_txt_html(product,edition,options),Object.prototype.hasOwnProperty.call(options.price,"position")&&""!==options.price.position||(str+=t_store_get_productCard_Price_html(product,edition,options)),str+="</div>"}function t_store_get_productCard_txt_html(product,edition,opts){var str="",typoClass="";if(Object.prototype.hasOwnProperty.call(opts.price,"position")&&"at"===opts.price.position&&(str+=t_store_get_productCard_Price_html(product,edition,opts)),product.title){typoClass=4===parseInt(opts.blocksInRow,10)?"t-name_xs":2===parseInt(opts.blocksInRow,10)?"t-name_xl":"t-name_md";var titleFieldAttr=1===product.editions.length&&edition.uid?'field="st_title__'+edition.uid+'" data-redactor-toolbar="no"':"";str+='<div class="js-store-prod-name js-product-name t-store__card__title t-typography__title t-name '+typoClass+'"'+(Object.prototype.hasOwnProperty.call(opts.typo,"title")?'style="'+opts.typo.title+'"':"")+titleFieldAttr+">",str+=product.title,str+="</div>"}if(Object.prototype.hasOwnProperty.call(opts.price,"position")&&"bt"===opts.price.position&&(str+=t_store_get_productCard_Price_html(product,edition,opts)),edition.sku){var skuVisCss,skuColor,skuStyle='style="'+(opts.prodCard.showOpts?"":"display:none;")+(opts.typo.descrColor?"color:"+opts.typo.descrColor+";":"")+'"',skuFieldAttr=1===product.editions.length&&edition.uid?'field="st_sku__'+edition.uid+'" data-redactor-toolbar="no"':"";str+='<div class="t-store__card__sku t-descr t-descr_xxs" '+skuStyle+">",str+=window.tStoreDict.sku+": ",str+='<span class="js-store-prod-sku js-product-sku" translate="no" '+skuFieldAttr+">",str+=edition.sku,str+="</span>",str+="</div>"}if(product.descr){var descrFieldAttr=1===product.editions.length&&edition.uid?'field="st_descr__'+edition.uid+'" data-redactor-toolbar="no"':"";str+='<div class="js-store-prod-descr t-store__card__descr t-typography__descr t-descr t-descr_xxs" '+(Object.prototype.hasOwnProperty.call(opts.typo,"descr")?'style="'+opts.typo.descr+'"':"")+descrFieldAttr+">",str+=product.descr,str+="</div>"}return str}function t_store_get_productCard_Price_html(product,edition,options){var str="",modifier="",formattedPriceRange=t_store__getFormattedPriceRange(options,product);return Object.prototype.hasOwnProperty.call(options.price,"position")&&("at"===options.price.position?modifier=" t-store__card__price-wrapper_above-title":"bt"===options.price.position&&(modifier=" t-store__card__price-wrapper_below-title")),str+='<div class="js-store-price-wrapper t-store__card__price-wrapper'+modifier+'">',str+=t_store_get_productCard_onePrice_html(product,edition,options,"current"),formattedPriceRange||(str+=t_store_get_productCard_onePrice_html(product,edition,options,"old")),str+="</div>"}function t_store_get_productCard_onePrice_html(product,edition,options,type){var value="current"===type?edition.price:edition.priceold,formattedPrice=t_store__getFormattedPrice(options,value),priceRangeDesign=options.price.priceRange,formattedPriceRange=t_store__getFormattedPriceRange(options,product);formattedPriceRange&&"range"===priceRangeDesign&&(formattedPrice=formattedPriceRange);var priceType="current"===type?"price":"priceold",str="",priceStylingClass="current"===type?"t-store__card__price":"t-store__card__price_old",styleAttr,styleStr="",shouldUseInlineStyleForPrice;if(styleStr+=value&&"0"!==value&&"0.0000"!==value?"":"display: none;",Object.prototype.hasOwnProperty.call(options.price,"fontWeight")&&Object.prototype.hasOwnProperty.call(options.price,"fontSize")){var color="current"===type?options.price.color:options.price.colorOld;styleStr+=color?"color:"+color+";":"",styleStr+=options.price.fontSize?"font-size:"+options.price.fontSize+";":"",styleStr+=options.price.fontWeight?"font-weight:"+options.price.fontWeight+";":""}styleAttr=""!==styleStr?'style = "'+styleStr+'"':"";var priceFieldAttr=1===product.editions.length&&edition.uid?'field="st_'+priceType+"__"+edition.uid+'" data-redactor-toolbar="no"':"",currency=options.currencyTxt?'<div class="t-store__card__price-currency" translate="no">'+options.currencyTxt+"</div>":"",jsProdClass="current"===type?"js-product-price js-store-prod-price-val":"js-store-prod-price-old-val",isT1025;if(formattedPriceRange&&(jsProdClass+=" js-store-prod-price-range-val"),str+='<div class="'+priceStylingClass+" t-store__card__price-item t-name t-name_"+("1025"===options.prodCard.blockId?"md":"xs")+'" '+styleAttr+">",formattedPriceRange&&"from"===priceRangeDesign){str+='<div class="t-store__card__price-from t-store__card__price-value" translate="no" '+priceFieldAttr+">"+window.tStoreDict.from+"</div>";var minPrice=t_store__getFormattedMinPrice(options,product);null!==minPrice&&(formattedPrice=minPrice)}return str+="r"!==options.currencySide&&currency?currency:"",str+='<div class="'+jsProdClass+' t-store__card__price-value" translate="no" '+priceFieldAttr+">"+formattedPrice+"</div>",str+="r"===options.currencySide&&currency?currency:"",product.unit&&product.portion>0&&(str+='<div class="t-store__prod__price-portion"><span class="t-store__prod__price-portion-slash">/</span>',"1"!==product.portion&&(str+=+product.portion+" "),str+=window.tStoreDict[product.unit]+"</div>"),str+="</div>"}function t_store_get_productCard_btn_html(product,options,isRelevantsShow,rec){if(!options.prodCard.btnTitle1&&!options.prodCard.btnTitle2)return"";var isT1025="1025"===options.prodCard.blockId,str="",link,linkTarget,btnSizeClass="sm"===options.btnSize?"t-btn_xs":"t-btn_sm";return str+='<div class="t-store__card__btns-wrapper js-store-buttons-wrapper">',options.prodCard.btnTitle1&&(isT1025&&(str+='<div class="t-store__card__btn-row t-store__card__btn-first_wrapper">'),str+='<a href="'+(link=t_store_get_productCard_link(options.prodCard.btnLink1,product,isRelevantsShow,rec))+'" '+(linkTarget=t_store_get_productCard_targetAttr(options.prodCard.btnLink1,product))+' class="js-store-prod-btn t-store__card__btn t-btn '+btnSizeClass+'" style="'+options.btn1_style+'"><span class="t-store__card__btn-text">'+options.prodCard.btnTitle1+"</span></a>",isT1025&&(str+="</div>")),options.prodCard.btnTitle2&&(isT1025&&(str+='<div class="t-store__card__btn-row t-store__card__btn-second_wrapper">'),str+='<a href="'+(link=t_store_get_productCard_link(options.prodCard.btnLink2,product,isRelevantsShow,rec))+'" '+(linkTarget=t_store_get_productCard_targetAttr(options.prodCard.btnLink2,product))+' class="js-store-prod-btn2 t-store__card__btn t-store__card__btn_second t-btn '+btnSizeClass+'" style="'+options.btn2_style+'"><span class="t-store__card__btn-text">'+options.prodCard.btnTitle2+"</span></a>",isT1025&&(str+="</div>")),str+="</div>"}function t_store_get_productCard_link(link,product,isRelevantsShow,rec){var isSnippet;if(rec[0]&&(document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"))&&"popup"===link))return t_store_generateUrl(product);if("order"===link)return"#order";if(isRelevantsShow)return product.buttonlink?product.buttonlink:"#prodpopup";if("popup"===link){if(product.buttonlink){var url=product.buttonlink;return-1===url.indexOf("//")&&"/"!==url.slice(0,1)&&"#"!==url.slice(0,1)&&(url="http://"+url),url}return"#prodpopup"}return"#prodpopup"}function t_store_get_productCard_targetAttr(link,product){return"popup"===link&&product.buttonlink&&"_blank"===product.buttontarget?'target="_blank"':""}function t_store_get_horizSeparator_html(opts){var str='<div class="t-clear t-store__grid-separator" [[style]]></div>';return str=str.replace("[[style]]",opts.vindent?'style="margin-bottom:'+opts.vindent+';"':"")}function t_store_unifyCardsHeights(recid,options){if(options.prodCard&&options.prodCard.hasWrap){var rec=document.getElementById("rec"+recid);rec&&[".t-store__grid-cont .t-store__card",".t-popup__container .t-store__card"].forEach((function(selector){var cards=rec.querySelectorAll(selector);if(cards){var blocksPerRow=t_store_unifyCardsHeights_getBlocksInRow(options,cards),wrapTextAndBtns=rec.querySelector(".t-store__card__wrap_txt-and-btns");if(window.innerWidth<=480&&!options.isHorizOnMob&&wrapTextAndBtns)return void(wrapTextAndBtns.style.height="auto");for(var i=0;i<cards.length;i+=blocksPerRow){for(var maxH=0,j=0;j<blocksPerRow;j++)if(cards[i+j]){var card,txt=(card=cards[i+j].querySelector(".t-store__card__wrap_txt-and-btns")).querySelector(".store__card__wrap_txt-and-opts"),btns=card.querySelector(".t-store__card__btns-wrapper"),height=0;txt&&(height+=txt.offsetHeight),btns&&(height+=btns.offsetHeight),height>maxH&&(maxH=height)}for(var j=0;j<blocksPerRow;j++){var card;if(cards[i+j])(card=cards[i+j].querySelector(".t-store__card__wrap_txt-and-btns")).style.height=maxH+"px"}}}}))}}function t_store_unifyCardsHeights_getBlocksInRow(options,cards){return window.innerWidth<=960&&options.isHorizOnMob?cards.length:window.innerWidth<=960?2:parseInt(options.blocksInRow,10)}function t_store_unifyCardsWidth(recid){var rec=document.getElementById("rec"+recid);if(rec){var wrapper=rec.querySelector(".t-store__grid-cont_itemwrapper");if(wrapper){var items=wrapper.querySelectorAll(".js-product");if(!items||!items.length||!items[0].classList.contains("t-store__card_fixed-width")&&!items[0].classList.contains("t-store__card_under-description")){var maxWidth=0,maxPriceWidth=0,maxButtonsWidth=0;Array.prototype.forEach.call(items,(function(item){var col=item.querySelector(".t-store__card__price-buttons");if(col)if(col.classList.contains("t-store__card__price-buttons_in-row")){var price=col.querySelector(".t-store__card__price-wrapper"),buttons=col.querySelector(".t-store__card__btns-wrapper");price&&(price.style.width=null),buttons&&(buttons.style.width=null),col.style.width=null}else col.style.width=null})),Array.prototype.forEach.call(items,(function(item){var col=item.querySelector(".t-store__card__price-buttons");if(col)if(col.classList.contains("t-store__card__price-buttons_in-row")){var price=col.querySelector(".t-store__card__price-wrapper"),buttons=col.querySelector(".t-store__card__btns-wrapper");if(price){var priceStyle=window.getComputedStyle(price),priceWidth=Math.ceil(parseFloat(priceStyle.width))+Math.ceil(parseFloat(priceStyle.marginRight));priceWidth>maxPriceWidth&&(maxPriceWidth=priceWidth)}if(buttons){var buttonsWidth=Math.ceil(parseFloat(window.getComputedStyle(buttons).width));buttonsWidth>maxButtonsWidth&&(maxButtonsWidth=buttonsWidth)}}else{var curWidth=Math.ceil(parseFloat(window.getComputedStyle(col).width));curWidth>maxWidth&&(maxWidth=curWidth)}})),Array.prototype.forEach.call(items,(function(item){var col=item.querySelector(".t-store__card__price-buttons");if(col)if(col.classList.contains("t-store__card__price-buttons_in-row")){var price=col.querySelector(".t-store__card__price-wrapper"),buttons=col.querySelector(".t-store__card__btns-wrapper");price&&(price.style.width=maxPriceWidth+"px"),buttons&&(buttons.style.width=maxButtonsWidth+"px"),col.style.width=maxPriceWidth+maxButtonsWidth+"px"}else col.style.width=maxWidth+"px"}))}}}}function t_store_initPopup(recid,obj_products,options,isRelevantsShow,obj){if(!isRelevantsShow)try{window.sessionStorage.setItem("urlBeforePopupOpen",window.location.href),window.sessionStorage.setItem("titleBeforePopupOpen",document.title)}catch(error){}var isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet")),rec=document.getElementById("rec"+recid);for(var productKey in obj_products){var productNode=isRelevantsShow?rec.querySelector('.js-product-relevant[data-product-gen-uid="'+productKey+'"]'):rec.querySelector('[data-product-gen-uid="'+productKey+'"]'),prodPopups=productNode.querySelectorAll('[href^="#prodpopup"]');Array.prototype.forEach.call(prodPopups,(function(prodpopup){var el_prodItem=productNode.closest(".js-product"),lid_prod=el_prodItem.getAttribute("data-product-gen-uid"),productObj=obj_products[lid_prod];productObj&&prodpopup.setAttribute("href",productObj.url);var popupClickEvent=function(e){if(e.preventDefault(),!e.target.closest(".t1002__addBtn")){el_prodItem=this.closest(".js-product"),lid_prod=el_prodItem.getAttribute("data-product-gen-uid"),productObj=obj_products[lid_prod];var ctrlKey=e.ctrlKey,cmdKey=e.metaKey&&-1!==navigator.platform.indexOf("Mac");ctrlKey||cmdKey?window.open(productObj.url):(obj.header||obj.footer)&&obj.disablepopup?location.href=productObj.url:t_store_openProductPopup(recid,options,productObj,isRelevantsShow,!1,!!isRelevantsShow)}};isSnippet||prodpopup.addEventListener("click",popupClickEvent)}))}options.isPublishedPage&&setTimeout((function(){t_store_checkUrl(options,recid)}),300),t_store_copyTypographyFromLeadToPopup(recid,options)}function t_store_openProductPopup(recid,options,productObj,isRelevantsShow,fromHistory,fromPopup){var isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"));isSnippet||t_store_open_popup_routing_init(recid,options);var showRelevants=options.showRelevants,rec,el_popup=document.getElementById("rec"+recid).querySelector(".t-popup"),isSoldOut,el_product;if(el_popup&&t_store_drawProdPopup(recid,el_popup,productObj,options,fromPopup),t_store_showPopup(recid,fromHistory,fromPopup),Tilda&&(Tilda.sendEcommerceEvent&&(window.tStoreDetailEvent||(window.tStoreDetailEvent={}),window.tStoreDetailEvent[productObj.id?productObj.id:productObj.uid]||(Tilda.sendEcommerceEvent("detail",[{id:""+(productObj.id?productObj.id:productObj.uid),uid:""+productObj.uid,price:""+(productObj.price_min?productObj.price_min:productObj.price),sku:productObj.sku?productObj.sku:"",name:productObj.title}]),window.tStoreDetailEvent[productObj.id?productObj.id:productObj.uid]=!0)),Tilda.sendEventToStatistics)){var analytics=el_popup.getAttribute("data-track-popup");if(analytics){var virtTitle="Popup: "+productObj.title;Tilda.sendEventToStatistics(analytics,virtTitle,"",0)}}if(options.isPublishedPage&&!fromHistory&&t_store_changeUrl(recid,productObj,isRelevantsShow,options),showRelevants&&!isSnippet){var relevantsLabel,relevantsMethod={cc:"current_category",all:"all_categories"}[showRelevants]||"category_"+showRelevants,relevantsSort="random",relevantsQuantity=options.relevants_quantity||4;t_store_loadProducts("relevants",recid,options,!1,{currentProductUid:productObj.uid,relevantsQuantity:relevantsQuantity,relevantsMethod:relevantsMethod,relevantsSort:"random"})}("y"!==window.lazy&&"yes"!==document.getElementById("allrecords").getAttribute("data-tilda-lazy")||t_store_popup_updLazyOnScroll(recid),parseInt(productObj.quantity,10)<=0||"both"!==options.showStoreBtnQuantity&&"popup"!==options.showStoreBtnQuantity)||t_store_addProductQuantity(document.querySelector("#rec"+recid+" .t-popup .js-store-product"),productObj,options);window.tStoreIsMobile||t_store_hoverZoom_init(recid),options.itemsAnim&&options.previewmode&&setTimeout((function(){t_store_onFuncLoad("t_animate__setAnimationStateChains",(function(){var allBlocks=document.querySelectorAll(".r"),animChainsBlocks=[];Array.prototype.forEach.call(allBlocks,(function(block){block.querySelector(".t-animate[data-animate-chain=yes]")&&animChainsBlocks.push(block)})),animChainsBlocks.length&&t_animate__setAnimationStateChains(animChainsBlocks)}))}),300)}function t_store_addProductQuantity(el_product,product,options){if(window.jQuery&&el_product instanceof jQuery){if(0===el_product.length)return;el_product=$(el_product).get(0)}var popupButton=el_product.querySelector('.t-store__prod-popup__btn-wrapper a[href="#order"]:not(.t-store__prod-popup__btn_disabled)'),cardButton=el_product.querySelector('.t-store__card__btns-wrapper a[href="#order"]:not([style*="display: none"])'),quantity=parseInt(product.quantity,10),quantityBtns;if(isNaN(quantity)&&product.editions){var firstAvailabeEdition=t_store_product_getFirstAvailableEditionData(product.editions);quantity=parseInt(firstAvailabeEdition.quantity,10)}if((cardButton||popupButton)&&0!==quantity&&1!==quantity&&""!==options.showStoreBtnQuantity&&options.showStoreBtnQuantity){if("list"===options.showStoreBtnQuantity&&el_product.classList.contains("t-store__card")||"popup"===options.showStoreBtnQuantity&&el_product.classList.contains("t-store__product-snippet")||"popup"===options.showStoreBtnQuantity&&el_product.classList.contains("t-store__product-popup")||"both"===options.showStoreBtnQuantity){var quantityBtns;if(options||(options={}),quantityBtns=el_product.querySelector(".t-store__prod__quantity"))var input=quantityBtns.querySelector(".t-store__prod__quantity-input");if(quantityBtns){var min=input.min||1;input.value=min,t_triggerEvent(input,"change");var value=input.value;isNaN(quantity)?quantityBtns.classList.remove("t-store__prod-popup__btn_disabled"):quantity>1?(quantityBtns.classList.remove("t-store__prod-popup__btn_disabled"),0===parseInt(value,10)&&(input.value=min)):quantityBtns.classList.add("t-store__prod-popup__btn_disabled")}else{var str="",btnStyle=options.btn1_style,quantityBorderRadius="",classSize="";if(el_product.classList.contains("t-store__card")&&(classSize="","sm"===options.btnSize&&(classSize="t-store__prod__quantity_xs")),""!==btnStyle&&btnStyle){var position=btnStyle.indexOf("border-radius");if(-1!==position){var endPosition=btnStyle.slice(position).indexOf(";");quantityBorderRadius=btnStyle.slice(position+14,position+endPosition)}}var borderRadius="";if(""!==quantityBorderRadius&&(borderRadius="border-radius:"+quantityBorderRadius+";"),str+='<div class="t-store__prod__quantity '+classSize+'" style="'+borderRadius+'">',str+='<div class="t-store__prod__quantity__minus-wrapper">',str+='<span class="t-store__prod__quantity__minus"></span>',str+="</div>",str+='<input class="t-store__prod__quantity-input t-descr t-descr_xxs" type="number" min="1" max="9999" step="1" value="1" size="4" maxlength="4" />',str+='<div class="t-store__prod__quantity__plus-wrapper">',str+='<span class="t-store__prod__quantity__plus"></span>',str+="</div>",str+="</div>",popupButton?popupButton.insertAdjacentHTML("beforebegin",str):cardButton&&cardButton.insertAdjacentHTML("beforebegin",str),t_store_addProductQuantityEvents(el_product),input=(quantityBtns=el_product.querySelector(".t-store__prod__quantity")).querySelector(".t-store__prod__quantity-input"),cardButton){var btnsWrapper=cardButton.parentNode;if(btnsWrapper.classList.add("t-store__card__btns-wrapper--quantity"),btnsWrapper.querySelectorAll('a:not([href^="#order"])').length>0&&Element.prototype.matches.call(btnsWrapper.parentNode,"div[class]")){var parent=btnsWrapper.parentNode,div=document.createElement("div");div.appendChild(btnsWrapper),parent&&parent.appendChild(div)}}}input&&(isNaN(quantity)?input.max=9999:quantity>0&&(input.max=quantity))}}else(quantityBtns=el_product.querySelector(".t-store__prod__quantity"))&&(quantityBtns.parentNode.classList.remove("t-store__card__btns-wrapper--quantity"),t_store__removeElement(quantityBtns))}function t_store_addProductQuantityEvents(product){if(window.jQuery&&product instanceof jQuery){if(0===product.length)return;product=product[0]}var quantityBtns=product.querySelector(".t-store__prod__quantity");if(quantityBtns){var input=quantityBtns.querySelector(".t-store__prod__quantity-input"),quantityMinusClickEvent=function(){input.stepDown()},quantityMinusWrapper=product.querySelector(".t-store__prod__quantity__minus-wrapper");quantityMinusWrapper&&(quantityMinusWrapper.removeEventListener("click",quantityMinusClickEvent),quantityMinusWrapper.addEventListener("click",quantityMinusClickEvent));var quantityPlusClickEvent=function(){input.stepUp()},quantityPlusWrapper=product.querySelector(".t-store__prod__quantity__plus-wrapper");quantityPlusWrapper&&(quantityPlusWrapper.removeEventListener("click",quantityPlusClickEvent),quantityPlusWrapper.addEventListener("click",quantityPlusClickEvent));var quantityInputChangeEvent=function(){var min=input.min||1,max=input.max||9999,value=parseInt(input.value||1,10);value<1||isNaN(value)?input.value=min:input.value=value>max?max:value},quantityInput=product.querySelector(".t-store__prod__quantity-input");quantityInput&&(quantityInput.removeEventListener("change",quantityInputChangeEvent),quantityInput.addEventListener("change",quantityInputChangeEvent))}}function t_store_removeProductQuantity(el_product){var popupButton=el_product.querySelector('.t-store__prod-popup__btn-wrapper a[href="#order"]:not(.t-store__prod-popup__btn_disabled)'),cardButton;if(el_product.querySelector('.t-store__card__btns-wrapper a[href="#order"]:not([style*="display: none"])')||popupButton){var quantityBtns=el_product.querySelector(".t-store__prod__quantity");quantityBtns&&(quantityBtns.parentNode.classList.remove("t-store__card__btns-wrapper--quantity"),t_store__removeElement(quantityBtns))}}function t_store_open_popup_routing_init(recid,opts){window.onpopstate=function(){if(window.history.state)if(window.history.state.productData){var productPopupData=window.history.state.productData,recidFromHistory,optsFromHistory,productObjFromHistory,isRelevantsShowFromHistory;t_store_openProductPopup(productPopupData.recid,productPopupData.opts,productPopupData.productObj,productPopupData.isRelevantsShow,!0)}else t_store_closePopup(!0,recid,opts);else t_store_closePopup(!0,recid,opts)}}function t_store_popup_updLazyOnScroll(recid){var scrollContainer=document.querySelector("#rec"+recid+" .t-popup"),curMode=document.getElementById("allrecords").getAttribute("data-tilda-mode");scrollContainer&&"edit"!==curMode&&"preview"!==curMode&&scrollContainer.addEventListener("scroll",t_throttle((function(){t_store_onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()}))})))}function t_store_changeUrl(recid,product,isRelevantsShow,options){var isiOS=/iPhone|iPad|iPod/i.test(navigator.userAgent),isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),curUrl=window.location.href,productData={productObj:product,opts:options,isRelevantsShow:isRelevantsShow,recid:recid},newUrl,newPageTitle=document.title+" – "+product.title;curUrl.indexOf("/tproduct/")<0&&curUrl.indexOf("%2Ftproduct%2F")<0?(t_store_history_pushState({productData:productData},newPageTitle,newUrl=t_store_generateUrl(product)),isiOS&&isSafari&&(document.querySelector('head link[rel="canonical"]').setAttribute("href",newUrl),document.title=newPageTitle)):isRelevantsShow&&t_store_history_pushState({productData:productData},newPageTitle,newUrl=t_store_generateUrl(product))}function t_store_generateUrl(product){var currentProtocol=window.location.protocol,currentHost=window.location.host,relativeProductPath;return(relativeProductPath=(relativeProductPath=product.url.split("://")[1]).split("/")).shift(),currentProtocol+"//"+currentHost+"/"+(relativeProductPath=relativeProductPath.join("/"))}function t_store_drawProdPopup(recid,el_popup,product,options,fromPopup){el_popup.scrollTop=0;var el_product=el_popup.querySelector(".js-store-product.js-product");el_product.setAttribute("data-card-size","large"),t_store_drawProdPopup_drawGallery(recid,el_popup,product,options),window.tStoreDefPackObj||(window.tStoreDefPackObj={});var storeProduct=el_popup.querySelector(".js-store-product");storeProduct.setAttribute("data-product-lid",product.uid),storeProduct.setAttribute("data-product-uid",product.uid),storeProduct.setAttribute("data-product-gen-uid",product.uid);var storeProdName=el_popup.querySelector(".js-store-prod-name");product.title?(storeProdName.innerHTML=product.title,storeProdName.style.display=""):(storeProdName.innerHTML="",storeProdName.style.display="none");var partuids=[];try{partuids=JSON.parse(product.partuids)}catch(e){}if(storeProduct.setAttribute("data-product-part-uid",partuids.join(",")),options.linksSizeChart&&partuids.length>0){for(var str="",linksAdded=[],i=0;i<partuids.length;i++){var uid=partuids[i];options.linksSizeChart[uid]&&options.linksSizeChart[uid].infotext&&options.linksSizeChart[uid].infourl&&-1===linksAdded.indexOf(options.linksSizeChart[uid].infourl)&&(str+='<div class="t-store__prod-popup__link t-descr t-descr_xxs">',str+='<a href="'+options.linksSizeChart[uid].infourl.replace(/"/g,"&quot;")+'" target="_blank">',str+=options.linksSizeChart[uid].infotext,str+="</a>",str+="</div>",linksAdded.push(options.linksSizeChart[uid].infourl))}el_popup.querySelector(".t-store__prod-popup__links-wrapper").innerHTML=str}else el_popup.querySelector(".t-store__prod-popup__links-wrapper").innerHTML="";t_store_initTextAndCharacteristics(el_popup,product),options.tabs&&t_store_onFuncLoad("t_store_tabs_init",(function(){t_store_tabs_init(recid,options,product,el_product,el_popup)})),t_store_addProductOptions(recid,product,el_product,options),t_store_option_handleOnChange(el_product),t_store_option_handleOnChange_custom(recid,el_product,options),t_store_onFuncLoad("t_prod__initProduct",(function(){t_prod__initProduct(el_product,options)})),window.t_store_prodPopup_updateGalleryThumbsEvent=function(){t_store_prodPopup_updateGalleryThumbs(recid,el_popup,product,options)},fromPopup&&window.removeEventListener("resize",window.t_store_prodPopup_updateGalleryThumbsEvent),window.addEventListener("resize",window.t_store_prodPopup_updateGalleryThumbsEvent)}function t_store_initTextAndCharacteristics(el_popup,product){var isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet")),el_prodTxt=el_popup.querySelector(".js-store-prod-text");if(el_prodTxt){for(;el_prodTxt.firstChild;)el_prodTxt.removeChild(el_prodTxt.firstChild);el_prodTxt.style.display="none"}var pack_label=product.pack_label||"",pack_m=parseInt(product.pack_m,10)||0,pack_x=parseInt(product.pack_x,10)||0,pack_y=parseInt(product.pack_y,10)||0,pack_z=parseInt(product.pack_z,10)||0,productUrl=product.url||"",isDimentions=pack_label&&pack_x&&pack_y&&pack_z,isWeight=pack_m,isCharcs=product.characteristics&&product.characteristics.length>0||isDimentions||isWeight,isDescriptionDrawn=!0,isCharsDrawn=isCharcs,el_tabDescr;el_popup.querySelectorAll('.t-store__tabs .t-store__tabs__item[data-tab-type="text"]').length&&(isDescriptionDrawn=!1);var el_tabCharcs=el_popup.querySelectorAll('.t-store__tabs .t-store__tabs__item[data-tab-type="chars"]');el_tabCharcs.length&&(isCharsDrawn=!1);var prodTxt='<div class="js-store-prod-all-text"'+(isDescriptionDrawn?"":' style="display: none;"')+">";prodTxt+=product.text?product.text:product.descr?product.descr:"",prodTxt+="</div>";var charcsStyle=isDescriptionDrawn?"margin-top: 20px;":"",charcsTextWithDiv='<div class="js-store-prod-all-charcs"'+((charcsStyle+=isCharsDrawn?"":"display: none;").length?' style="'+charcsStyle+'"':"")+">",charcsTextOnly="";if(isCharcs&&product.characteristics.forEach((function(ch){charcsTextOnly+='<p class="t-typography__characteristics js-store-prod-charcs">'+ch.title+": "+ch.value+"</p>"})),charcsTextOnly+='<p class="js-store-prod-dimensions"></p>',charcsTextWithDiv+=charcsTextOnly+='<p class="js-store-prod-weight"></p>',charcsTextWithDiv+="</div>",el_prodTxt&&(el_prodTxt.insertAdjacentHTML("beforeend",prodTxt),el_prodTxt.insertAdjacentHTML("beforeend",charcsTextWithDiv),el_prodTxt.style.display=""),isSnippet&&el_tabCharcs.length&&Array.prototype.forEach.call(el_tabCharcs,(function(item,i){var el_charcsContent=item.querySelector(".t-store__tabs__content");if(el_charcsContent){for(;el_charcsContent.firstChild;)el_charcsContent.removeChild(el_charcsContent.firstChild);el_charcsContent.insertAdjacentHTML("beforeend",charcsTextOnly),0!==i&&(el_charcsContent.querySelector(".js-store-prod-dimensions").parentNode.style.display="")}})),isDimentions){var dimension=pack_x+"x"+pack_y+"x"+pack_z,fullDimension=window.tStoreDict["product-"+pack_label]+": "+dimension+"&nbsp;"+window.tStoreDict.mm,storeProdDimensions=el_popup.querySelector(".js-store-prod-dimensions");storeProdDimensions&&(storeProdDimensions.innerHTML=fullDimension),isSnippet&&(Array.prototype.forEach.call(el_tabCharcs,(function(tabCharc){var storeProdDimensions=tabCharc.querySelector(".js-store-prod-dimensions");storeProdDimensions&&(storeProdDimensions.innerHTML=fullDimension)})),el_popup.setAttribute("data-product-pack-label",pack_label),el_popup.setAttribute("data-product-pack-x",pack_x),el_popup.setAttribute("data-product-pack-y",pack_y),el_popup.setAttribute("data-product-pack-z",pack_z))}if(isWeight){var fullWeight=window.tStoreDict["product-weight"]+": "+pack_m+"&nbsp;"+window.tStoreDict.g;el_popup.querySelector(".js-store-prod-weight").innerHTML=fullWeight,isSnippet&&(el_tabCharcs.length&&Array.prototype.forEach.call(el_tabCharcs,(function(tabCharc){var storeProdWeight=tabCharc.querySelector(".js-store-prod-weight");storeProdWeight&&(storeProdWeight.innerHTML=fullWeight)})),el_popup.setAttribute("data-product-pack-m",pack_m))}var storeProduct=el_popup.querySelector(".js-store-product");isSnippet&&el_popup.classList.contains("js-store-product")&&(storeProduct=el_popup),storeProduct&&(storeProduct.setAttribute("data-product-pack-label",pack_label),storeProduct.setAttribute("data-product-pack-m",pack_m),storeProduct.setAttribute("data-product-pack-x",pack_x),storeProduct.setAttribute("data-product-pack-y",pack_y),storeProduct.setAttribute("data-product-pack-z",pack_z),storeProduct.setAttribute("data-product-url",productUrl))}function t_store_addProductOptions(recid,product,el_product,options){if(window.jQuery&&el_product instanceof jQuery){if(0===el_product.length)return;el_product=el_product[0]}var optionsWrapper=el_product.querySelector(".js-product-controls-wrapper");if(optionsWrapper){optionsWrapper.innerHTML="";var isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet")),firstAvailabeEdition=t_store_product_getFirstAvailableEditionData(product.editions);t_store_product_initEditions(recid,product,el_product,options);var param1={name:product.prod_option,values:product.prod_variants},param2={name:product.prod_option2,values:product.prod_variants2},param3={name:product.prod_option3,values:product.prod_variants3},param4={name:product.prod_option4,values:product.prod_variants4},param5={name:product.prod_option5,values:product.prod_variants5};t_store_product_addOneOptionsControl("modificator",param1,optionsWrapper,options,firstAvailabeEdition,recid),t_store_product_addOneOptionsControl("modificator",param2,optionsWrapper,options,firstAvailabeEdition,recid),t_store_product_addOneOptionsControl("modificator",param3,optionsWrapper,options,firstAvailabeEdition,recid),t_store_product_addOneOptionsControl("modificator",param4,optionsWrapper,options,firstAvailabeEdition,recid),t_store_product_addOneOptionsControl("modificator",param5,optionsWrapper,options,firstAvailabeEdition,recid),isSnippet&&(t_store_option_handleOnChange(el_product),t_store_option_handleOnChange_custom(recid,el_product,options))}}function t_store_get_control_option_html(options){var str="",styleAttr,styleStr="",color=options.typo&&options.typo.descrColor?options.typo.descrColor:"";return str+='<div class="js-product-option t-product__option">',str+='<div class="js-product-option-name t-product__option-title t-typography__options t-descr t-descr_xxs" '+(styleAttr=""!==(styleStr+=""!==color?"color:"+color+";":"")?'style = "'+styleStr+'"':"")+">[[name]]</div>",str+='<div class="t-product__option-variants t-product__option-variants_regular"> <select class="js-product-option-variants t-product__option-select t-typography__options t-descr t-descr_xxs"> [[optiontags]] </select> </div>',str+="</div>"}function t_store_get_control_editionOption_html(options,curOption){var str="",styleAttr,styleStr="",dataAttr="",color=options.typo&&options.typo.descrColor?options.typo.descrColor:"";styleAttr=""!==(styleStr+=""!==color?"color:"+color+";":"")?'style = "'+styleStr+'"':"";var isCustomOption,optionStyle=t_store_option_checkIfCustom(curOption)?' style="display: none;"':"";return curOption.params&&(curOption.params.view&&(dataAttr+=' data-view-type="'+curOption.params.view+'"'),curOption.params.hasColor?dataAttr+=' data-option-type="color"':dataAttr+=' data-option-type="regular"'),str+='<div class="js-product-edition-option t-product__option" data-edition-option-id="[[id]]"'+dataAttr+">",str+='<div class="js-product-edition-option-name t-product__option-title t-typography__options t-descr t-descr_xxs" '+styleAttr+">[[name]]</div>",str+='<div class="t-product__option-variants t-product__option-variants_regular"'+optionStyle+'> <select class="js-product-edition-option-variants t-product__option-select t-typography__options t-descr t-descr_xxs"> [[optiontags]] </select> </div>',str+="</div>"}function t_store_option_styleCustomControl(recid,options,curOption,optionsWrapper,firstAvailabeEdition){var str="",wrapper=optionsWrapper.querySelector('.js-product-edition-option[data-edition-option-id="'+curOption.id+'"]');if(wrapper){var isSelect=curOption.params&&"select"===curOption.params.view,isColor=curOption.params&&curOption.params.hasColor&&!curOption.params.linkImage,isImage=curOption.params&&curOption.params.linkImage,defaultValue=curOption.values[0],parentMod=t_store_option_getClassModificator(curOption,"select","t-product__option-variants"),labelMod=t_store_option_getClassModificator(curOption,"select","t-product__option-item"),inputMod=t_store_option_getClassModificator(curOption,"select","t-product__option-input"),checkmarkMod=t_store_option_getClassModificator(curOption,"select","t-product__option-checkmark"),titleMod=t_store_option_getClassModificator(curOption,"select","t-product__option-title");if(isSelect){var selectedMod,colorStyle;if(str+='<div class="t-product__option-selected '+t_store_option_getClassModificator(curOption,"select","t-product__option-selected")+' t-descr t-descr_xxs">',isColor)str+='<span class="t-product__option-selected-checkmark"'+(' style="background-color: '+t_store_option_getColorValue(curOption.valuesObj,defaultValue)+';"')+"></span>";else if(isImage){var value=curOption.values[0],url,lazyUrl,imageStyle;str+='<div class="t-product__option-selected-checkmark t-bgimg" data-original="'+(url=curOption.imagesObj[value])+'"'+((lazyUrl=t_store_getLazyUrl(options,url))?" style=\"background-image: url('"+lazyUrl+"');\"":"")+"></div>"}str+='<span class="t-product__option-selected-title">'+defaultValue+"</span>",str+="</div>",parentMod+=" t-product__option-variants_hidden"}str+='<form class="t-product__option-variants t-product__option-variants_custom '+parentMod+'">';for(var i=0;i<curOption.values.length;i++){var value;if(""!==(value=curOption.values[i])){var isActive=firstAvailabeEdition[curOption.name]===value,checked=isActive?" checked":"",activeClass=isActive?" t-product__option-item_active ":"",checkmarkStyle=isColor?' style="background-color: '+t_store_option_getColorValue(curOption.valuesObj,value)+';"':"",url,lazyUrl;if(str+='<label class="t-product__option-item '+activeClass+labelMod+'">',str+='<input class="t-product__option-input '+inputMod+'" type="radio" name="'+curOption.name+'" value="'+t_store_escapeQuote(value)+'"'+checked+">",isImage&&curOption.imagesObj)str+='<div class="t-product__option-checkmark t-bgimg '+checkmarkMod+'"'+(checkmarkStyle=(lazyUrl=t_store_getLazyUrl(options,url=curOption.imagesObj[value]))?" style=\"background-image: url('"+lazyUrl+"');\"":"")+' data-original="'+url+'"></div>';else str+='<div class="t-product__option-checkmark '+checkmarkMod+'"'+checkmarkStyle+"></div>";str+='<span class="t-product__option-title '+titleMod+' t-typography__options t-descr t-descr_xxs">'+value+"</span>",str+="</label>"}}str+="</form>",wrapper.insertAdjacentHTML("beforeend",str)}}function t_store_option_getColorValue(valuesObj,value){var result="#ffffff";for(var key in value=value.toString(),valuesObj){var item=valuesObj[key];if(item.value===value){result=item.color;break}}return result}function t_store_option_getClassModificator(curOption,type,className){if(!curOption)return"";var params=curOption.params,result=className+"_"+params.view;return params.hasColor&&params.linkImage?"filter"===type?(result=className+"_buttons",result+=" "+className+"_color"):result+=" "+className+"_image":params.hasColor?result+=" "+className+"_color":params.linkImage?result+=" "+className+"_image":result+=" "+className+"_simple",result}function t_store_checkUrl(options,recid){var curUrl=window.location.href,tprodIndex=curUrl.indexOf("/tproduct/");if(/iPhone|iPad|iPod/i.test(navigator.userAgent)&&tprodIndex<0&&(tprodIndex=curUrl.indexOf("/tproduct/"))<0&&(tprodIndex=curUrl.indexOf("%2Ftproduct%2F")),tprodIndex>=0){var prodDataArr=(curUrl=curUrl.substring(tprodIndex,curUrl.length)).split("-");if(void 0===prodDataArr[1])return;var curProdUid=prodDataArr[1],rec=document.getElementById("rec"+recid),prod=rec.querySelector('.js-store-grid-cont [data-product-gen-uid="'+curProdUid+'"]'),el_popup=rec.querySelector(".t-popup");if(curUrl.indexOf(recid)>=0&&prod){if(!el_popup.classList.contains("t-popup_show")){var prodPopupBtn=prod.querySelector('[href^="#prodpopup"]');prodPopupBtn&&prodPopupBtn.click()}}else if(curUrl.indexOf(recid)>=0&&el_popup){if(el_popup.classList.contains("t-popup_show"))return;var isSnippet;if(!(document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet")))){var onDone=function(data){if("string"==typeof data&&"{"===data.substring(0,1)){var productObj;try{var dataObj;productObj=JSON.parse(data).product}catch(e){console.log(data)}if(!productObj)return void console.log("Can't get product with uid = "+curProdUid+" in storepart = "+options.storepart);t_store_openProductPopup(recid,options,productObj)}else console.log("Can't get product with uid = "+curProdUid+" in storepart = "+options.storepart)};t_store_loadOneProduct(recid,options,curProdUid,onDone,(function(error){t_store_changeEndpoint(error,(function(){t_store_loadOneProduct(recid,options,curProdUid,onDone)}))}))}}}}function t_store_showPopup(recid,fromHistory,fromPopup){var el=document.getElementById("rec"+recid),popup=el.querySelector(".t-popup");t_store_resetNavStyles(recid),t_triggerEvent(document.body,"popupShowed"),document.body.classList.add("t-body_popupshowed"),popup.style.display="block";var isPopupOverflowed=popup.scrollHeight>document.documentElement.clientHeight;isPopupOverflowed||(popup.style.overflow="hidden"),setTimeout((function(){popup.querySelector(".t-popup__container").classList.add("t-popup__container-animated"),popup.classList.add("t-popup_show"),t_triggerEvent(document.body,"twishlist_addbtn"),"y"!==window.lazy&&"yes"!==document.getElementById("allrecords").getAttribute("data-tilda-lazy")||t_store_onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()})),isPopupOverflowed?t_triggerEvent(popup,t_store_POPUP_SHOWED_EVENT_NAME):setTimeout((function(){popup.style.overflow="auto",t_triggerEvent(popup,t_store_POPUP_SHOWED_EVENT_NAME)}),300)}),50),fromPopup||addPopupEvents(el,recid)}function t_store_closePopupKeyDown(e){var isGalleryOldLib,isGalleryNewLib;document.body.classList.contains("t-zoomer__show")||(document.body.classList.contains("t-zoomer__active")||27===e.keyCode&&t_store_closePopup(!1))}function addPopupEvents(el){var popupOutsideClickEvent=function(e){e.target===this&&t_store_closePopup(!1)};el.querySelector(".t-popup").removeEventListener("click",popupOutsideClickEvent),el.querySelector(".t-popup").addEventListener("click",popupOutsideClickEvent);var popupCloseClickEvent=function(){t_store_closePopup(!1)};Array.prototype.forEach.call(el.querySelectorAll(".t-popup__close, .js-store-close-text"),(function(elem){elem.removeEventListener("click",popupCloseClickEvent),elem.addEventListener("click",popupCloseClickEvent)})),document.addEventListener("keydown",t_store_closePopupKeyDown);var fadeStart=30,fadeUntil=200,fading=el.querySelectorAll(".t-popup__close-opacity-scroll");if(fading.length){var scrollNav=function(el){var offset=el.scrollTop(),opacity;opacity=offset>=200?1:offset<=30?0:offset/200,fading.style.backgroundClor="rgba(255,255,255,"+opacity+")"};el.querySelector(".t-popup").removeEventListener("scroll",scrollNav),el.querySelector(".t-popup").addEventListener("scroll",scrollNav)}}function t_store_resetNavStyles(recid){var nav=document.getElementById("rec"+recid).querySelector(".t-popup__close");nav.classList.contains("t-popup__close-solid")?nav.style.backgroundColor="rgba(255,255,255,1)":nav.classList.contains("t-popup__close-opacity-scroll")&&(nav.style.backgroundColor="rgba(255,255,255,0)")}function t_store_closePopup(fromHistory,recid,options){var isiOS=/iPhone|iPad|iPod/i.test(navigator.userAgent),isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),isSnippet,storepartuid,optsFromHistory,productData;if(document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet"))||t_store_closePopup_routing(),Array.prototype.forEach.call(document.querySelectorAll(".t-popup"),(function(popup){var popupYoutubeVideo=popup.querySelector(".t-slds__item_active .t-slds__frame");popupYoutubeVideo&&popupYoutubeVideo.src&&-1!==popupYoutubeVideo.src.indexOf("&enablejsapi=1")&&popupYoutubeVideo.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),popup.classList.remove("t-popup_show")})),t_triggerEvent(document.body,"popupHidden"),document.body.classList.remove("t-body_popupshowed"),fromHistory)if(t_store_isQueryInAddressBar("tstore")){var hashArr=decodeURI(window.location.hash).split("/"),storepartValueIndex=hashArr.indexOf("c")+1,storeuidIndex=hashArr.indexOf("r")+1,storepartuid,storeuid=hashArr[storeuidIndex];storepartuid=-1!==hashArr[storepartValueIndex].indexOf("-")?hashArr[storepartValueIndex].slice(0,hashArr[storepartValueIndex].indexOf("-")):hashArr[storepartValueIndex],window.history.state&&((optsFromHistory=window.history.state.opts).storepart=storepartuid),t_store_isStorepartFromHistoryActive(storepartuid,recid,options)||t_store_loadProducts("",storeuid,optsFromHistory)}else t_store_isStorepartFromHistoryActive(options.storepart,recid,options)||t_store_loadProducts("",recid,options);else if(window.history.state&&window.history.state.productData)try{var urlBeforePopupOpen=window.sessionStorage.getItem("urlBeforePopupOpen"),titleBeforePopupOpen=window.sessionStorage.getItem("titleBeforePopupOpen");t_store_history_pushState({storepartuid:storepartuid=(productData=window.history.state.productData).opts.storepart,opts:options=productData.opts,recid:recid=productData.recid},null,urlBeforePopupOpen),isiOS&&isSafari&&(document.querySelector('head link[rel="canonical"]').setAttribute("href",urlBeforePopupOpen),document.title=titleBeforePopupOpen)}catch(error){}recid&&(document.getElementById("rec"+recid).querySelector(".js-store-parts-switcher")&&!options.hideStoreParts&&t_store_setActiveStorePart(recid),t_store_galleryVideoClearFrame(recid),options.tabs&&t_store_onFuncLoad("t_store_tabs_videoClearFrame",(function(){t_store_tabs_videoClearFrame(recid)})));var popup=document.querySelector(".t-popup");setTimeout((function(){popup.scrollTop=0,Array.prototype.forEach.call(document.querySelectorAll(".t-popup:not(.t-popup_show)"),(function(popup){popup.style.display="none"}))}),300),document.removeEventListener("keydown",t_store_closePopupKeyDown),window.removeEventListener("resize",window.t_store_prodPopup_updateGalleryThumbsEvent),t_triggerEvent(document.body,"twishlist_addbtn"),t_triggerEvent(popup,t_store_POPUP_CLOSED_EVENT_NAME)}function t_store_isStorepartFromHistoryActive(storepartuid,recid,opts){var rec=document.getElementById("rec"+recid),activeStorepartUid;return!(!opts||opts.storePartsArr)||!!storepartuid&&(storepartuid=parseInt(storepartuid,10),rec.querySelector(".js-store-parts-switcher.t-active").getAttribute("data-storepartUid")===storepartuid)}function t_store_closePopup_routing(){window.onpopstate=function(){if(window.history.state){if(window.history.state.productData){var productPopupData=window.history.state.productData,recid=productPopupData.recid,options=productPopupData.opts,productObj,isRelevantsShow;t_store_openProductPopup(recid,options,productPopupData.productObj,productPopupData.isRelevantsShow,!0)}if(window.history.state.storepartuid){var optsFromHistory=window.history.state.opts,recidFromHistory=window.history.state.recid;options.isPublishedPage=!0,t_store_loadProducts("",recidFromHistory,optsFromHistory)}}}}function t_store_copyTypographyFromLeadToPopup(recid,options){var rec=document.getElementById("rec"+recid),prodName=rec.querySelector(".js-store-grid-cont .js-store-prod-name"),prodDescr=rec.querySelector(".js-store-grid-cont .js-store-prod-descr"),popupContainer=rec.querySelector(".t-popup .t-popup__container"),popupBgColor,descrStyle;if(popupContainer&&(popupBgColor=popupContainer.style.backgroundColor),prodName){var titleStyle=prodName.getAttribute("style"),popupStoreProdName=rec.querySelector(".t-popup .js-store-prod-name");if(popupStoreProdName&&(popupStoreProdName.setAttribute("style",t_store_removeSizesFromStylesLine(titleStyle)),popupBgColor)){var prodNameColor=options.typo.titleColor;0===Math.abs(t_store_getLightnessColor(prodNameColor)-t_store_getLightnessColor(popupBgColor))&&(popupStoreProdName.style.color=t_store_luma_rgb(popupBgColor))}}prodDescr&&(descrStyle=prodDescr.getAttribute("style")),!descrStyle&&options&&options.typo&&options.typo.descr&&(descrStyle=(descrStyle=options.typo.descr).replace("line-height:0;",""));var popupStoreProdText=rec.querySelector(".t-popup .js-store-prod-text");if(popupStoreProdText&&(popupStoreProdText.setAttribute("style",t_store_removeSizesFromStylesLine(descrStyle)),popupBgColor)){var prodTextColor=options.typo.descrColor;0===Math.abs(t_store_getLightnessColor(prodTextColor)-t_store_getLightnessColor(popupBgColor))&&(popupStoreProdText.style.color=t_store_luma_rgb(popupBgColor))}}function t_store_snippet_removeSizesFromStyles(recid){var rec=document.getElementById("rec"+recid),productName=rec.querySelector(".t-store__product-snippet .js-store-prod-name"),productNameStyle=productName.getAttribute("style");productName&&productName.setAttribute("style",t_store_removeSizesFromStylesLine(productNameStyle));var productDescr=rec.querySelector(".t-store__product-snippet .js-store-prod-text"),productDescrStyle=productDescr.getAttribute("style");productDescr&&productDescr.setAttribute("style",t_store_removeSizesFromStylesLine(productDescrStyle))}function t_store_removeSizesFromStylesLine(styleString){var styleArray,filteredStyles;return styleString?styleString.split(";").filter((function(style){return!style.match(/(font-size|padding-(top|bottom))/)})).join(";"):""}function t_store_drawProdPopup_drawGallery(recid,el_popup,product,options){var rec=document.getElementById("rec"+recid);if(window.jQuery&&el_popup instanceof jQuery){if(0===el_popup.length)return;el_popup=el_popup[0]}if(el_popup){var prodSlider=el_popup.querySelector(".js-store-prod-slider"),galleryArr;if(product.gallery)if(0!==(galleryArr="string"==typeof product.gallery?JSON.parse(product.gallery):product.gallery).length){var isSnippet=document.getElementById("allrecords")!==document.querySelector(".t-store__product-snippet")&&document.getElementById("allrecords").contains(document.querySelector(".t-store__product-snippet")),anotherGalleryStyle=options.galleryStyle&&""!==options.galleryStyle&&parseInt(options.popup_opts.columns,10)+parseInt(options.popup_opts.columns2,10)<=12;if(isSnippet&&anotherGalleryStyle){var prodInfo=el_popup.querySelector(".t-store__prod-popup__info");prodInfo&&prodInfo.classList.add("t-store__prod-popup__col_fixed");var sliderClass=options.popup_opts.isVertical?"":"t-store__prod-popup__col-left t-col t-col_"+options.popup_opts.columns,fixedClass="t-store__prod-popup__col_fixed";prodSlider.insertAdjacentHTML("beforebegin",'<div class="t-store__prod-popup__gallery-column js-store-prod-gallery-column '+sliderClass+" "+fixedClass+'"></div>')}var str=t_store_get_productcard_slider_html(rec,options),strSlides="",strBullets="",hasBullets="thumbs"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls||"dots"===options.slider_opts.controls||""===options.slider_opts.controls,hasThumbs="thumbs"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls,columnSizeForMainImage=parseInt(options.popup_opts.columns,10),galleryImageAspectRatio=+options.slider_slidesOpts.ratio,thumbsSize=60,marginBetweenThumbs=10,oneBulletTpl,oneBulletStr,strGalleryColumn="",galleryColumn=el_popup.querySelector(".js-store-prod-gallery-column"),anotherGalleryStyle=options.galleryStyle&&""!==options.galleryStyle&&parseInt(options.popup_opts.columns,10)+parseInt(options.popup_opts.columns2,10)<=12&&("col1_fixed"===options.galleryStyle||"col2_fixed"===options.galleryStyle),mobileGalleryStr="",mobileGalleryElement=el_popup.querySelector(".js-store-mobile-custom-gallery");Array.prototype.forEach.call(galleryArr,(function(element,index){anotherGalleryStyle&&(strGalleryColumn+='<div class="t-store__prod-popup__wrapper t-store__prod-popup__wrapper__'+options.galleryStyle+'">',strGalleryColumn+=t_store_addVideoIconForGallery(options,element),strGalleryColumn+='   <img class="t-store__prod-popup__columns t-img'+(0===index?" js-product-img":"")+(options.slider_slidesOpts.zoomable?" t-zoomable":"")+'" src="'+t_store_getLazySrc(options,element.img)+'" data-original="'+element.img+'"'+(options.slider_slidesOpts.zoomable?' data-zoom-target="'+index+'" data-zoomable="yes" data-img-zoom-url="'+element.img+'"':"")+" /> ",strGalleryColumn+="</div>"),options.popup_opts.mobileGalleryStyle&&(mobileGalleryStr+='<li class="t-store__prod-popup__mobile-custom-gallery-list-item">',mobileGalleryStr+='   <img class="t-store__prod-popup__mobile-custom-gallery-list-item-image'+(options.slider_slidesOpts.zoomable?" t-zoomable":"")+'" src="'+element.img+'" data-original="'+element.img+'"'+(options.slider_slidesOpts.zoomable?' data-zoom-target="'+index+'" data-zoomable="yes" data-img-zoom-url="'+element.img+'"':"")+" /> ",mobileGalleryStr+="</li>");var oneSlideTpl=t_store_get_productcard_oneSlide_html(options,element);if(strSlides+=oneSlideTpl.replace("[[activeClass]]",0===index?"t-slds__item_active":"").replace("[[productClass]]",0===index?"js-product-img":"").replace(/\[\[index\]\]/g,index+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,element.img)).replace(/\[\[imgsource\]\]/g,element.img),hasBullets)if(hasThumbs&&"l"===options.sliderthumbsside){var maxThumbsCount=t_store_prodPopup_gallery_calcMaxThumbsCount(columnSizeForMainImage,galleryImageAspectRatio,60,10);index<=maxThumbsCount-1&&(index<=maxThumbsCount-2||index===galleryArr.length-1?(oneBulletTpl=t_store_get_productcard_oneSliderBullet_html(options),oneBulletStr=oneBulletTpl.replace("[[videoPlayIcon]]","").replace("[[activeClass]]",0===index?"t-slds__bullet_active":"").replace(/\[\[index\]\]/g,index+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,element.img)).replace(/\[\[imgsource\]\]/g,element.img)):(oneBulletTpl=t_store_get_productcard_thumbsGallery_html(options,galleryArr.length,maxThumbsCount),oneBulletStr=oneBulletTpl.replace("[[activeClass]]",0===index?"t-slds__bullet_active":"").replace(/\[\[index\]\]/g,index+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,element.img)).replace(/\[\[imgsource\]\]/g,element.img)),strBullets+=oneBulletStr)}else oneBulletTpl=t_store_get_productcard_oneSliderBullet_html(options),oneBulletStr=oneBulletTpl.replace("[[videoPlayIcon]]",element.video?'<div class="t-slds__play_icon">'+t_store_svgVideoIcon(options)+"</div>":"").replace("[[activeClass]]",0===index?"t-slds__bullet_active":"").replace(/\[\[index\]\]/g,index+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,element.img)).replace(/\[\[imgsource\]\]/g,element.img),strBullets+=oneBulletStr})),str=str.replace("[[slides]]",strSlides),hasBullets&&(str=str.replace("[[bullets]]",strBullets)),galleryColumn&&(galleryColumn.innerHTML=strGalleryColumn),prodSlider&&(prodSlider.innerHTML=str),mobileGalleryElement&&options.popup_opts.mobileGalleryStyle&&(mobileGalleryElement.innerHTML='<ul class="t-store__prod-popup__mobile-custom-gallery-list">'+mobileGalleryStr+"</ul>"),t_store_galleryVideoHandle(recid);var controlsSelStr=".t-slds__arrow_container, .t-slds__bullet_wrapper, .t-slds__thumbsbullet-wrapper",controlsElements=el_popup.querySelectorAll(controlsSelStr),sliderOptions;controlsElements&&(1===galleryArr.length?Array.prototype.forEach.call(controlsElements,(function(el){el.style.display="none"})):Array.prototype.forEach.call(controlsElements,(function(el){el.style.display=""}))),"l"===options.sliderthumbsside&&(sliderOptions={thumbsbulletGallery:!0,storeOptions:options}),setTimeout((function(){t_store_onFuncLoad("t_sldsInit",(function(){t_sldsInit(recid+" .js-store-product",sliderOptions)}))}),200)}else prodSlider&&(prodSlider.innerHTML="");else prodSlider&&(prodSlider.innerHTML="")}}function t_store_galleryVideoHandle(recid){var el=document.getElementById("rec"+recid),playButtons=el.querySelectorAll(".t-slds__play_icon");Array.prototype.forEach.call(playButtons,(function(play){var videoid;play&&(play.addEventListener("click",(function(){var parentNode;if(this.parentNode.querySelector(".t-slds__frame-wrapper")||this.insertAdjacentHTML("afterend",'<div class="t-slds__frame-wrapper"></div>'),"youtube.com"===this.getAttribute("data-slider-video-type")){var params=this.getAttribute("data-slider-video-params");videoid=this.getAttribute("data-slider-video-url"),this.nextElementSibling.innerHTML='<iframe class="t-slds__frame" width="100%" height="100%" src="https://www.youtube.com/embed/'+videoid+"?autoplay=1&rel=0&enablejsapi=1"+(params||"")+'" frameborder="0" allowfullscreen></iframe>'}"vimeo.com"===this.getAttribute("data-slider-video-type")&&(videoid=this.getAttribute("data-slider-video-url"),this.nextElementSibling.innerHTML='<iframe class="t-slds__frame" width="100%" height="100%" src="https://player.vimeo.com/video/'+videoid+'" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>'),this.nextElementSibling.style.zIndex=3})),el.addEventListener("updateSlider",(function(){t_store_galleryVideoClearFrame(recid)})))}))}function t_store_addVideoIconForGallery(options,element){var str="",video=element.video,params;video&&("youtube.com"===element.vtype&&-1!==video.indexOf("?v="+element.videoid)&&-1!==(params=(params=video.split("?v="+element.videoid)[1]).replace(/&amp;/g,"&")).indexOf("loop=1")&&-1===params.indexOf("&playlist=")&&(params+="&playlist="+element.videoid),str+='<div class="t-slds__videowrapper">',str+='<div class="t-slds__play_icon" data-slider-video-url="'+element.videoid+'" '+(params?'data-slider-video-params="'+params+'" ':"")+'data-slider-video-type="'+element.vtype+'">',str+=t_store_svgVideoIcon(options),str+="</div>",str+='<div class="t-slds__frame-wrapper"></div>',str+="</div>");return str}function t_store_svgVideoIcon(options){var str="",iconColor;return str+='<svg xmlns="http://www.w3.org/2000/svg" width="70px" height="70px" viewBox="0 0 60 60" style="width:100%;height:100%;">',str+='<g stroke="none" stroke-width="1" fill="" fill-rule="evenodd">',str+='<g transform="translate(-691.000000, -3514.000000)" fill="'+(options.slider_opts.videoPlayerIconColor||"#fff")+'">',str+='<path d="M721,3574 C737.568542,3574 751,3560.56854 751,3544 C751,3527.43146 737.568542,3514 721,3514 C704.431458,3514 691,3527.43146 691,3544 C691,3560.56854 704.431458,3574 721,3574 Z M715,3534 L732,3544.5 L715,3555 L715,3534 Z"></path>',str+="</g>",str+="</g>",str+="</svg>"}function t_store_galleryVideoClearFrame(recid){var rec,frameWrapper=document.getElementById("rec"+recid).querySelector(".t-slds__frame-wrapper");frameWrapper&&(frameWrapper.innerHTML="",frameWrapper.style.zIndex="")}function t_store_prodPopup_updateGalleryThumbs(recid,el_popup,product,options){var rec=document.getElementById("rec"+recid),galleryArr,hasThumbs;if(!("thumbs"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls)&&"l"===options.sliderthumbsside&&product.gallery){galleryArr="string"==typeof product.gallery?JSON.parse(product.gallery):product.gallery;var prodSlider=el_popup.querySelector(".js-store-prod-slider");if(0!==galleryArr.length){var columnSizeForMainImage=parseInt(options.popup_opts.columns,10),galleryImageAspectRatio=+options.slider_slidesOpts.ratio,thumbsSize=60,marginBetweenThumbs=10,thumbsCount=rec.querySelectorAll(".t-slds__thumbsbullet").length,maxThumbsCount=t_store_prodPopup_gallery_calcMaxThumbsCount(columnSizeForMainImage,galleryImageAspectRatio,60,10),strBullets,oneBulletTpl,oneBulletStr,thumbsWrapper,sliderOptions;if(thumbsCount!==maxThumbsCount&&galleryArr.length>=maxThumbsCount||thumbsCount<maxThumbsCount&&thumbsCount!==galleryArr.length)Array.prototype.forEach.call(galleryArr,(function(image,index){index<=maxThumbsCount-1&&(index<=maxThumbsCount-2||index===galleryArr.length-1?(oneBulletTpl=t_store_get_productcard_oneSliderBullet_html(options),oneBulletStr=oneBulletTpl.replace("[[videoPlayIcon]]","").replace("[[activeClass]]",0===index?"t-slds__bullet_active":"").replace(/\[\[index\]\]/g,index+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,image.img)).replace(/\[\[imgsource\]\]/g,image.img)):(oneBulletTpl=t_store_get_productcard_thumbsGallery_html(options,galleryArr.length,maxThumbsCount),oneBulletStr=oneBulletTpl.replace("[[activeClass]]",0===index?"t-slds__bullet_active":"").replace(/\[\[index\]\]/g,index+1).replace(/\[\[imgsource_lazy\]\]/g,t_store_getLazyUrl(options,image.img)).replace(/\[\[imgsource\]\]/g,image.img)),strBullets+=oneBulletStr)})),rec.querySelector(".t-slds__thumbsbullet-wrapper").innerHTML=strBullets,"l"===options.sliderthumbsside&&(sliderOptions={thumbsbulletGallery:!0,storeOptions:options}),t_sldsInit(recid+" .js-store-product",sliderOptions),"y"!==window.lazy&&"yes"!==document.getElementById("allrecords").getAttribute("data-tilda-lazy")||t_store_onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()}))}else prodSlider&&(prodSlider.innerHTML="")}}function t_store_prodPopup_gallery_calcMaxThumbsCount(columnSize,galleryImageRatio,thumbSize,marginBetweenThumbs){var columnWidth=t_store_getColumnWidth(columnSize),windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;windowWidth>=960&&windowWidth<=1240&&(columnWidth=440);var mainImageHeightPercent=Math.floor(100*galleryImageRatio),mainImageHeight=Math.floor(mainImageHeightPercent*(columnWidth-(thumbSize+marginBetweenThumbs))/100),maxPreviewsCount=Math.floor(mainImageHeight/(thumbSize+marginBetweenThumbs));return(thumbSize+marginBetweenThumbs)*(maxPreviewsCount+1)-marginBetweenThumbs<=mainImageHeight&&(maxPreviewsCount+=1),maxPreviewsCount}function t_store_get_productcard_slider_html(rec,options){var str="",animationduration="t-slds_animated-none",animationspeed="300";"fast"===options.slider_opts.anim_speed&&(animationduration="t-slds_animated-fast"),"slow"===options.slider_opts.anim_speed&&(animationduration="t-slds_animated-slow",animationspeed="500");var thumbsbulletsWithGallerClass="",hasThumbs;if(("thumbs"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls)&&"l"===options.sliderthumbsside&&(thumbsbulletsWithGallerClass="t-slds__thumbsbullets-with-gallery"),str+='<div class="t-slds '+thumbsbulletsWithGallerClass+'" style="visibility: hidden;">',str+='    <div class="t-slds__main">',str+='        <div class="t-slds__container" [[containerStyles]]>',str+='            <div class="t-slds__items-wrapper '+animationduration+' [[noCycleClass]]" data-slider-transition="'+animationspeed+'" data-slider-with-cycle="[[isCycled]]" data-slider-correct-height="true" data-auto-correct-mobile-width="false">',str+="                [[slides]]",str+="            </div>",str+="            [[arrows]]",str+="        </div>",str+="    </div>",str+="    [[bullets]]",str+="</div>","arrows"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls||""===options.slider_opts.controls){var arrowsTplEl,arrowsTpl=rec.querySelector(".js-store-tpl-slider-arrows").innerHTML,arrowsWrapperClass;arrowsTpl='<div class="'+("t-slds__arrow_container "+(""===options.slider_opts.cycle?"t-slds__nocycle":""))+'">'+arrowsTpl+"</div>",str=str.replace("[[arrows]]",arrowsTpl)}else str=str.replace("[[arrows]]","");if("thumbs"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls){var tpl='<div class="t-slds__thumbsbullet-wrapper '+("contain"===options.slider_slidesOpts.bgsize?"t-align_center":"")+'">[[bullets]]</div>';str=str.replace("[[bullets]]",tpl)}else str="dots"===options.slider_opts.controls||""===options.slider_opts.controls?str.replace("[[bullets]]",'<div class="t-slds__bullet_wrapper">[[bullets]]</div>'):str.replace("[[bullets]]","");return str=str.replace("[[containerStyles]]",options.slider_opts.bgcolor?'style="background-color:'+options.slider_opts.bgcolor+';"':"").replace("[[noCycleClass]]",options.slider_opts.cycle?"":"t-slds__nocycle").replace("[[isCycled]]",options.slider_opts.cycle?"true":"false")}function t_store_get_productcard_oneSlide_html(options,element){var str="";return str+='<div class="t-slds__item [[activeClass]]" data-slide-index="[[index]]">',str+='    <div class="t-slds__wrapper" itemscope itemtype="https://schema.org/ImageObject">',str+='        <meta itemprop="image" content="[[imgsource]]">',str+='        <div class="t-slds__imgwrapper [[zoomClass]]" [[zoomAttrs]]>',str+='            <div class="t-slds__bgimg [[containClass]] t-bgimg [[productClass]]" data-original="[[imgsource]]" style="padding-bottom:[[paddingBottomVal]]; background-image: url(\'[[imgsource_lazy]]\');">',str+="            </div>",str+="         </div>",str+=t_store_addVideoIconForGallery(options,element),str+="    </div>",str=(str+="</div>").replace("[[zoomAttrs]]",options.slider_slidesOpts.zoomable?'data-zoom-target="[[index]]" data-zoomable="yes" data-img-zoom-url="[[imgsource]]"':"").replace("[[zoomClass]]",options.slider_slidesOpts.zoomable?"t-zoomable":"").replace("[[containClass]]","contain"===options.slider_slidesOpts.bgsize?"t-slds__bgimg-contain":"").replace("[[paddingBottomVal]]",100*options.slider_slidesOpts.ratio+"%")}function t_store_get_productcard_oneSliderBullet_html(options){var str="";if("thumbs"!==options.slider_opts.controls&&"arrowsthumbs"!==options.slider_opts.controls||(str+='<div class="t-slds__thumbsbullet t-slds__bullet [[activeClass]]" data-slide-bullet-for="[[index]]">',str+="    [[videoPlayIcon]]",str+='    <div class="t-slds__bgimg t-bgimg" data-original="[[imgsource]]" style="padding-bottom: 100%; background-image: url(\'[[imgsource_lazy]]\');"></div>',str+='    <div class="t-slds__thumbsbullet-border"></div>',str+="</div>"),"dots"===options.slider_opts.controls||""===options.slider_opts.controls){str+='<div class="t-slds__bullet [[activeClass]]" data-slide-bullet-for="[[index]]">',str+='    <div class="t-slds__bullet_body" [[styles]]></div>',str+="</div>";var styles="";if(options.slider_dotsOpts.size){var size=parseInt(options.slider_dotsOpts.size,10);styles+="width:"+(size=size>20?20:size)+"px;height:"+size+"px;"}if(options.slider_dotsOpts.bgcolor&&(styles+="background-color:"+options.slider_dotsOpts.bgcolor+";"),options.slider_dotsOpts.bordersize){var borderColor=options.slider_dotsOpts.bgcoloractive?options.slider_dotsOpts.bgcoloractive:"#222";styles+="border: "+options.slider_dotsOpts.bordersize+" solid "+borderColor+";"}str=str.replace("[[styles]]",""!==styles?'style="'+styles+'"':"")}return str}function t_store_get_productcard_thumbsGallery_html(options,galleryLength,maxThumbsCount){var str="",countForGalleryPreview=galleryLength-maxThumbsCount;if("thumbs"===options.slider_opts.controls||"arrowsthumbs"===options.slider_opts.controls){var classes="t-slds__thumbsbullet t-slds__bullet t-slds__thumbs_gallery [[activeClass]]";options.slider_slidesOpts.zoomable&&(classes+=" t-slds__thumbs_gallery-zoomable"),str+='<div class="'+classes+'" [[zoomAttrs]] data-gallery-length="'+countForGalleryPreview+'" data-slide-bullet-for="'+maxThumbsCount+'">',str+='    <div class="t-slds__bgimg t-bgimg" data-original="[[imgsource]]" style="padding-bottom: 100%; background-image: url(\'[[imgsource_lazy]]\');"></div>',str+='    <div class="t-slds__thumbsbullet-border"></div>',str=(str+="</div>").replace("[[zoomAttrs]]",options.slider_slidesOpts.zoomable?'data-zoom-target="[[index]]" data-zoomable="yes" data-img-zoom-url="[[imgsource]]"':"")}return str}function t_store_getLazyUrl(options,imgSrc){if(!options.isPublishedPage||"y"!==window.lazy)return imgSrc;if(-1===imgSrc.indexOf("static.tildacdn.com"))return imgSrc;var arr=imgSrc.split("/");return arr.splice(imgSrc.split("/").length-1,0,"-/resizeb/x20"),arr.join("/")}function t_store_getLazySrc(options,imgSrc){if(!options.isPublishedPage||"y"!==window.lazy)return imgSrc;if(-1===imgSrc.indexOf(".tildacdn.com")||-1!==imgSrc.indexOf("-/empty/")||-1!==imgSrc.indexOf("-/resize/"))return imgSrc;var arr=imgSrc.split("/");return arr.splice(imgSrc.split("/").length-1,0,"-/empty"),arr.join("/")}function t_store_dict(msg){return window.tStoreDict||t_store_getDictObj(),window.tStoreDict[msg]||'Text not found for "'+msg+'"'}function t_store_escapeQuote(text){if(!text)return"";var map={'"':"&quot;","'":"&#039;"};return text.replace(/["']/g,(function(m){return map[m]}))}function t_store_product_initEditions(recid,product,el_product,options){var productControlsWrapper=el_product.querySelector(".js-product-controls-wrapper"),hasAvailable;if(t_store_product_addEditionControls(product,productControlsWrapper,options,recid),t_store_product_selectAvailableEdition(recid,product,el_product,options)){t_store_product_triggerSoldOutMsg(el_product,!1,options);var firstEdition=t_store_product_getFirstAvailableEditionData(product.editions);firstEdition&&t_store_addProductQuantity(el_product,firstEdition,options),t_store_product_disableUnavailOpts(el_product,product),t_store_product_disableUnavaileOptions(el_product,product)}else t_store_product_triggerSoldOutMsg(el_product,!0,options),t_store_removeProductQuantity(el_product),t_store_product_disableUnavaileOptions(el_product,product);var rec,tStore=document.getElementById("rec"+recid).querySelector(".t-store");Array.prototype.forEach.call(el_product.querySelectorAll(".js-product-edition-option"),(function(editionOption){editionOption.addEventListener("change",(function(){var edition=t_store_product_detectEditionByControls(el_product,product),isChanged=!0;if(edition){t_store_product_updateEdition(recid,el_product,edition,product,options,!0),t_prod__updatePrice(el_product,options);var isSoldOut=parseInt(edition.quantity,10)<=0;t_store_product_triggerSoldOutMsg(el_product,isSoldOut,options),isSoldOut?t_store_removeProductQuantity(el_product):t_store_addProductQuantity(el_product,edition,options),Tilda&&Tilda.sendEcommerceEvent&&(window.tStoreDetailEvent||(window.tStoreDetailEvent={}),window.tStoreDetailEvent[edition.id?edition.id:edition.uid]||(Tilda.sendEcommerceEvent("detail",[{id:""+(edition.id?edition.id:edition.uid),uid:""+edition.uid,price:""+(edition.price_min?edition.price_min:edition.price),sku:edition.sku?edition.sku:"",name:product.title}]),window.tStoreDetailEvent[edition.id?edition.id:edition.uid]=!0))}else{for(var changedOptName=this.getAttribute("data-edition-option-id"),optsValsBeforeChangedArr=[],i=0;i<product.editionOptions.length;i++){var curOption=product.editionOptions[i];if(optsValsBeforeChangedArr.push(curOption),curOption.name===changedOptName)break}var hasAvailable=t_store_product_selectAvailableEdition(recid,product,el_product,options,optsValsBeforeChangedArr,!0);t_prod__updatePrice(el_product,options),t_store_product_triggerSoldOutMsg(el_product,!hasAvailable,options),t_store_addProductQuantity(el_product,product,options)}tStore&&t_triggerEvent(tStore,"displayChanged"),Array.prototype.forEach.call(el_product.querySelectorAll(".js-product-edition-option-variants option"),(function(variantOption){variantOption.removeAttribute("disabled")})),t_store_product_disableUnavailOpts(el_product,product),t_store_product_disableUnavaileOptions(el_product,product)}))}))}function t_store_product_detectEditionByControls(el_product,product){for(var i=0;i<product.editions.length;i++){for(var curEdition=product.editions[i],isCurEditionSelected=!0,j=0;j<product.editionOptions.length;j++){var curOption=product.editionOptions[j],el_select=t_store_product_getEditionSelectEl(el_product,curOption),curControlVal,curEditionVal;if(el_select)el_select.querySelector(".js-product-edition-option-variants").value!==curEdition[curOption.name]&&(isCurEditionSelected=!1)}if(isCurEditionSelected)return curEdition}return null}function t_store_product_addEditionControls(product,productControlsWrapper,options,recid){var optionsData=t_store_option_getOptionsData(),firstAvailabeEdition=t_store_product_getFirstAvailableEditionData(product.editions);product.editionOptions||(product.editionOptions=t_store_product_getEditionOptionsArr(product,optionsData)),product.editionOptions.forEach((function(curOption){t_store_product_addOneOptionsControl("editionopt",curOption,productControlsWrapper,options,firstAvailabeEdition,recid)}))}function t_store_product_selectAvailableEdition(recid,product,el_product,options,optsValsBeforeChangedArr,isChanged){var edition=optsValsBeforeChangedArr&&optsValsBeforeChangedArr.length>0?t_store_product_getFirstAvailableEditionData_forCertainVals(product.editions,optsValsBeforeChangedArr,el_product):t_store_product_getFirstAvailableEditionData(product.editions);if(!edition)return console.log("No available edition for uid = "+product.uid+" with selected options values"),!1;var isAvailable=parseInt(edition.quantity,10)>0||""===edition.quantity;if(Array.prototype.forEach.call(product.editionOptions,(function(curOption){var value=edition[curOption.name],el_select=t_store_product_getEditionSelectEl(el_product,curOption);if(el_select){var variant=el_select.querySelector(".js-product-edition-option-variants");variant&&(variant.value=(value||"").replace(/&gt;/g,">").replace(/&lt;/g,"<"));var el_custom_opts=el_select.querySelectorAll(".t-product__option-variants_custom");Array.prototype.forEach.call(el_custom_opts,(function(customOpt){var el_items=customOpt.querySelectorAll(".t-product__option-item");Array.prototype.forEach.call(el_items,(function(item){var el_input=item.querySelector(".t-product__option-input");el_input.value===(value||"").replace(/&amp;/g,"&")?(item.classList.add("t-product__option-item_active"),setTimeout((function(){el_input.checked=!0,el_input.click()}))):(el_input.checked=!1,item.classList.remove("t-product__option-item_active"))}))}))}})),el_product.classList.contains("js-product-relevant"))t_store_product_updateEdition(recid,el_product,edition,product,options,isChanged);else{var urlParams,uid=t_store_snippet_getJsonFromUrl().editionuid,edObj;uid&&document.querySelector("#rec"+recid+" .js-product").getAttribute("data-product-uid")!==uid&&product.editions.forEach((function(edtn){edtn.uid===uid&&(edObj=edtn)})),t_store_product_updateEdition(recid,el_product,edObj||edition,product,options,isChanged)}return isAvailable}function t_store_product_disableUnavailOpts(el_product,product){var optsValsBeforeChangedArr=[];product.editionOptions.length>0&&optsValsBeforeChangedArr.push(product.editionOptions[0]);for(var i=1;i<product.editionOptions.length;i++){var curOpt=product.editionOptions[i],el_curOpt=t_store_product_getEditionSelectEl(el_product,curOpt);if(!el_curOpt)return;optsValsBeforeChangedArr.push(curOpt),Array.prototype.forEach.call(curOpt.values,(function(curOptVal){var hasEdition=t_store_product_getFirstAvailableEditionData_forCertainVals(product.editions,optsValsBeforeChangedArr,el_product,curOptVal),value=(curOptVal||"").replace(/\\/g,"\\\\").replace(/&amp;/g,"&").replace(/"/g,'\\"'),el_optionTag=el_curOpt.querySelector('option[value="'+value+'"]'),el_custom_input=el_curOpt.querySelector('.t-product__option-input[value="'+value+'"]');if(hasEdition){var el_parent;if(el_optionTag&&el_optionTag.removeAttribute("disabled"),el_custom_input)(el_parent=el_custom_input.closest(".t-product__option-item")).classList.remove("t-product__option-item_disabled"),el_optionTag&&el_optionTag.parentNode.value===value&&el_custom_input.click()}else{if(el_optionTag&&(el_optionTag.setAttribute("disabled","disabled"),el_optionTag.selected)){el_optionTag.selected=!1;var optionParent=el_optionTag.closest(".js-product-edition-option-variants");optionParent&&t_triggerEvent(optionParent,"change")}var el_parent;if(el_custom_input)(el_parent=el_custom_input.closest(".t-product__option-item")).classList.add("t-product__option-item_disabled"),el_parent.classList.remove("t-product__option-item_active"),el_custom_input.checked=!1}}))}}function t_store_product_disableUnavaileOptions(el_product,product){if(0!==product.editionOptions.length){var productUid=el_product.getAttribute("data-product-gen-uid");(!window.tStoreDisabledOptionsList||window.tStoreDisabledOptionsList&&!window.tStoreDisabledOptionsList[productUid])&&t_store_product_generateOptionsListForDisable(el_product,product);var optionList=window.tStoreDisabledOptionsList[productUid];optionList&&0!==optionList.length&&Array.prototype.forEach.call(optionList,(function(disableOption){Object.keys(disableOption).forEach((function(name){var selectEl=el_product.querySelector('.js-product-edition-option[data-edition-option-id="'+(name||"").replace(/"/g,'\\"')+'"]');if(selectEl){var optionVariants=selectEl.querySelector(".js-product-edition-option-variants");if(optionVariants){var value=(disableOption[name]||"").replace(/"/g,'\\"'),optionForDisable=optionVariants.querySelector('option[value="'+value+'"]');optionForDisable&&optionForDisable.setAttribute("disabled","disabled")}var customOptionForDisable=selectEl.querySelector('.t-product__option-input[value="'+value+'"]');if(customOptionForDisable){var el_parent=customOptionForDisable.closest(".t-product__option-item");el_parent.classList.add("t-product__option-item_disabled"),el_parent.classList.remove("t-product__option-item_active")}}}))}))}}function t_store_product_generateOptionsListForDisable(el_product,product){var productUid=el_product.getAttribute("data-product-gen-uid");window.tStoreDisabledOptionsList=window.tStoreDisabledOptionsList||{},window.tStoreDisabledOptionsList[productUid]=[],product.editionOptions.forEach((function(option){option.values.forEach((function(value){var value=(value||"").replace(/&gt;/g,">").replace(/&lt;/g,"<"),optionExists;if(!product.editions.some((function(product){var valueProduct;return(product[option.name]||"").replace(/&gt;/g,">").replace(/&lt;/g,"<")===value&&"0"!==product.quantity}))){var tempObj={};tempObj[option.name]=value,window.tStoreDisabledOptionsList[productUid].push(tempObj)}}))})),0===window.tStoreDisabledOptionsList[productUid].length&&delete window.tStoreDisabledOptionsList[productUid]}function t_store_product_updateEdition(recid,el_product,edition,product,options,isChanged){var urlSearch=t_store_snippet_getJsonFromUrl();if(urlSearch.editionuid=parseInt(urlSearch.editionuid,10),window.jQuery&&el_product instanceof jQuery&&(el_product=el_product[0]),edition||product.editions.forEach((function(cur){cur.uid===urlSearch.editionuid&&(edition=cur)})),urlSearch.editionuid===edition.uid&&(Array.prototype.forEach.call(document.querySelectorAll(".js-store-product"),(function(product){product.setAttribute("data-product-lid",edition.uid),product.setAttribute("data-product-uid",edition.uid),product.setAttribute("data-product-url",window.location),product.setAttribute("data-product-img",edition.img)})),setTimeout((function(){t_store_product_updateEdition_moveSlider(recid,el_product,edition)}),200),Array.prototype.forEach.call(product.editionOptions,(function(curOption){var value=edition[curOption.name],el_select=t_store_product_getEditionSelectEl(el_product,curOption);if(el_select){var variant=el_select.querySelector(".js-product-edition-option-variants");variant&&variant.value!==value&&(variant.value=(value||"").replace(/&gt;/g,">").replace(/&lt;/g,"<"),setTimeout((function(){t_triggerEvent(variant,"change")})))}}))),edition.price&&0!==parseFloat(edition.price)){var formattedPrice=t_store__getFormattedPrice(options,edition.price),formattedPriceRange=t_store__getFormattedPriceRange(options,product),storeProdPrice;if(options.price){var priceRangeDesign=options.price.priceRange;if(formattedPriceRange&&"range"===priceRangeDesign&&(formattedPrice=formattedPriceRange),formattedPriceRange&&"from"===priceRangeDesign){var minPrice=t_store__getFormattedMinPrice(options,product);null!==minPrice&&(formattedPrice=minPrice)}}el_product.querySelector(".js-store-prod-price-val").textContent=formattedPrice,(storeProdPrice=el_product.querySelector(".js-store-prod-price"))&&(storeProdPrice.style.display="");var cleanPrice=t_store__cleanPrice(edition.price),productPrice=el_product.querySelector(".js-product-price");if(productPrice&&(productPrice.setAttribute("data-product-price-def",cleanPrice),productPrice.setAttribute("data-product-price-def-str",cleanPrice)),Array.prototype.forEach.call(el_product.querySelectorAll(".t-store__prod__price-portion"),(function(portion){t_store__removeElement(portion)})),product.unit&&product.portion>0){var str='<div class="t-store__prod__price-portion"><span class="t-store__prod__price-portion-slash">/</span>';"1"!==product.portion&&(str+=+product.portion+" "),str+=window.tStoreDict[product.unit]+"</div>";var arrayPriceClasses=[".t-store__card__price-currency + .js-product-price",".t-store__card__price-currency + .js-store-prod-price-old-val",".js-product-price + .t-store__card__price-currency",".js-store-prod-price-old-val + .t-store__card__price-currency",".t-store__prod-popup__price-currency + .js-product-price",".js-product-price + .t-store__prod-popup__price-currency",".t-store__prod-popup__price-currency + .js-store-prod-price-old-val",".js-store-prod-price-old-val + .t-store__prod-popup__price-currency",".js-product-price-currency + .js-product-price",".js-product-price + .js-product-price-currency",".js-product-price-currency + .js-store-prod-price-old-val",".js-store-prod-price-old-val + .js-product-price-currency"];Array.prototype.forEach.call(el_product.querySelectorAll(arrayPriceClasses.join(",")),(function(selector){selector.insertAdjacentHTML("afterend",str)}))}}else{var storeProdPrice;(storeProdPrice=el_product.querySelector(".js-store-prod-price"))&&(storeProdPrice.style.display="none"),el_product.querySelector(".js-store-prod-price-val").textContent="",el_product.querySelector(".js-product-price").setAttribute("data-product-price-def",""),el_product.querySelector(".js-product-price").setAttribute("data-product-price-def-str",""),t_store__removeElement(el_product.querySelector(".t-store__prod__price-portion"))}if(edition.priceold&&"0"!==edition.priceold){var formattedPriceOld=t_store__getFormattedPrice(options,edition.priceold),storeProdPriceOld,cardPriceOld,storeProdOldVal;(storeProdPriceOld=el_product.querySelector(".js-store-prod-price-old"))&&(storeProdPriceOld.style.display=""),(cardPriceOld=el_product.querySelector(".t-store__card__price_old"))&&(cardPriceOld.style.display=""),(storeProdOldVal=el_product.querySelector(".js-store-prod-price-old-val"))&&(storeProdOldVal.innerHTML=formattedPriceOld)}else{var storeProdPriceOld,cardPriceOld,storeProdOldVal;(storeProdPriceOld=el_product.querySelector(".js-store-prod-price-old"))&&(storeProdPriceOld.style.display="none"),(cardPriceOld=el_product.querySelector(".t-store__card__price_old"))&&(cardPriceOld.style.display="none"),(storeProdOldVal=el_product.querySelector(".js-store-prod-price-old-val"))&&(storeProdOldVal.innerHTML="")}var el_brandWrapper=el_product.querySelector(".t-store__prod-popup__brand");product.brand&&product.brand>""&&el_brandWrapper&&(1===el_brandWrapper.querySelectorAll("span[itemprop=brand]").length?el_brandWrapper.querySelector("span[itemprop=brand]").innerHTML=product.brand:el_brandWrapper.innerHTML='<span itemprop="brand" class="js-product-brand">'+product.brand+"</span>"),!product.brand&&el_brandWrapper&&(el_brandWrapper.style.display="none");var el_skuWrapper=el_product.querySelector(".t-store__prod-popup__sku"),el_sku=el_product.querySelector(".js-store-prod-sku"),prevEditionImgUrl;edition.sku?(el_sku.innerHTML=edition.sku,"large"===el_product.getAttribute("data-card-size")&&(el_sku.style.display="",el_skuWrapper&&(el_skuWrapper.style.display=""))):(el_sku&&(el_sku.innerHTML="",el_sku.style.display="none"),el_skuWrapper&&(el_skuWrapper.style.display="none")),el_product.setAttribute("data-product-inv",edition.quantity),el_product.setAttribute("data-product-lid",edition.uid),el_product.setAttribute("data-product-uid",edition.uid),window.tStoreDefPackObj||(window.tStoreDefPackObj={});try{var defpackobj=window.tStoreDefPackObj[product.uid],el_tabCharcs=el_product.querySelectorAll('.t-store__tabs .t-store__tabs__item[data-tab-type="chars"]'),fullDimension="";if(edition.pack_x&&edition.pack_y&&edition.pack_z){defpackobj||(defpackobj={pack_x:el_product.getAttribute("data-product-pack-x")||0,pack_y:el_product.getAttribute("data-product-pack-y")||0,pack_z:el_product.getAttribute("data-product-pack-z")||0,pack_label:el_product.getAttribute("data-product-pack-label")||product.pack_label||"lwh",pack_m:el_product.getAttribute("data-product-pack-m")||0},window.tStoreDefPackObj[product.uid]=defpackobj),el_product.setAttribute("data-product-pack-x",edition.pack_x),el_product.setAttribute("data-product-pack-y",edition.pack_y),el_product.setAttribute("data-product-pack-z",edition.pack_z),el_product.setAttribute("data-product-pack-label",defpackobj.pack_label);var dimmension=edition.pack_x+"x"+edition.pack_y+"x"+edition.pack_z,storeProdDimensions=el_product.querySelector(".js-store-prod-dimensions");fullDimension=window.tStoreDict["product-"+defpackobj.pack_label]+": "+dimmension+"&nbsp;"+window.tStoreDict.mm,storeProdDimensions&&(el_product.querySelector(".js-store-prod-dimensions").innerHTML=fullDimension)}else if(defpackobj&&defpackobj.pack_x){el_product.setAttribute("data-product-pack-x",defpackobj.pack_x),el_product.setAttribute("data-product-pack-y",defpackobj.pack_y),el_product.setAttribute("data-product-pack-z",defpackobj.pack_z),el_product.setAttribute("data-product-pack-label",defpackobj.pack_label);var dimmension=defpackobj.pack_x+"x"+defpackobj.pack_y+"x"+defpackobj.pack_z,storeProdDimensions;fullDimension=window.tStoreDict["product-"+defpackobj.pack_label]+": "+dimmension+"&nbsp;"+window.tStoreDict.mm,(storeProdDimensions=el_product.querySelector(".js-store-prod-dimensions"))&&(storeProdDimensions.innerHTML=fullDimension)}fullDimension&&Array.prototype.forEach.call(el_tabCharcs,(function(tabCharc){var storeProdDimensions=tabCharc.querySelector(".js-store-prod-dimensions");storeProdDimensions&&(storeProdDimensions.innerHTML=fullDimension)}));var fullWeight="",storeProdWeight;if(edition.pack_m)el_product.setAttribute("data-product-pack-m",edition.pack_m),fullWeight=window.tStoreDict["product-weight"]+": "+edition.pack_m+"&nbsp;"+window.tStoreDict.g,(storeProdWeight=el_product.querySelector(".js-store-prod-weight"))&&(storeProdWeight.innerHTML=fullWeight);else if(defpackobj&&parseFloat(defpackobj.pack_m)>0){var storeProdWeight;el_product.setAttribute("data-product-pack-m",defpackobj.pack_m),fullWeight=window.tStoreDict["product-weight"]+": "+defpackobj.pack_m+"&nbsp;"+window.tStoreDict.g,(storeProdWeight=el_product.querySelector(".js-store-prod-weight"))&&(storeProdWeight.innerHTML=fullWeight)}fullWeight&&Array.prototype.forEach.call(el_tabCharcs,(function(tabCharc){var storeProdWeight=tabCharc.querySelector(".js-store-prod-weight");storeProdWeight&&(storeProdWeight.innerHTML=fullWeight)}))}catch(e){console.log(e)}edition.img?(el_product.setAttribute("data-product-img",edition.img),"large"===el_product.getAttribute("data-card-size")?t_store_product_updateEdition_moveSlider(recid,el_product,edition):isChanged&&t_store_get_productCard_img_replaceWith(product,el_product,options,edition.img)):el_product.getAttribute("data-product-img")&&"large"===el_product.getAttribute("data-card-size")&&(t_store_product_updateEdition_moveSlider(recid,el_product,edition),el_product.setAttribute("data-product-img",""));product.unit&&product.portion>0?(el_product.setAttribute("data-product-unit",product.unit),el_product.setAttribute("data-product-portion",product.portion),el_product.setAttribute("data-product-single",product.single)):(el_product.removeAttribute("data-product-unit"),el_product.removeAttribute("data-product-portion"),el_product.removeAttribute("data-product-single"))}function t_store_product_updateEdition_moveSlider(recid,el_product,edition){var pos=1;-1!==edition.img.indexOf("&amp;")&&(edition.img=edition.img.replace("&amp;","&"));var sliderWrapper=el_product.querySelector(".t-slds__items-wrapper"),el_editionImg=el_product.querySelector('.t-slds__item .t-slds__bgimg[data-original="'+edition.img+'"]'),el_editionImgFreeOrTrial=el_product.querySelector('.t-slds__item .t-slds__bgimg[data-original="'+(edition.img||"").replace("static.tildacdn.com","static.tildacdn.info")+'"]');!el_editionImg&&el_editionImgFreeOrTrial&&(el_editionImg=el_editionImgFreeOrTrial),el_editionImg&&edition.img&&(pos=el_editionImg.closest(".t-slds__item").getAttribute("data-slide-index"),0===parseInt(pos,10)&&(pos=sliderWrapper.getAttribute("data-slider-totalslides"))),sliderWrapper&&sliderWrapper.setAttribute("data-slider-pos",pos),el_product.classList.contains("t922")||t_store_onFuncLoad("t_slideMoveInstantly",(function(){t_slideMoveInstantly(recid+" .js-store-product")}))}function t_store_product_triggerSoldOutMsg(el_product,isSoldOut,options){t_store__removeElement(el_product.querySelector(".js-store-prod-sold-out"));var el_buyBtn=el_product.querySelectorAll('.t-store__card__btns-wrapper [href="#order"], .t-store__prod-popup__btn-wrapper [href="#order"]');0===el_buyBtn.length&&(el_buyBtn=el_product.querySelectorAll('[href="#order"]')),window.jQuery&&el_product instanceof jQuery&&(el_product=$(el_product).get(0));var orderBtn1=options.prodCard&&"order"===options.prodCard.btnLink1,orderBtn2=options.prodCard&&"order"===options.prodCard.btnLink2;if(el_buyBtn[0]){var el_buyBtnTxt=el_buyBtn[0].querySelector(".js-store-prod-popup-buy-btn-txt");"small"===el_product.getAttribute("data-card-size")&&(el_buyBtnTxt=el_buyBtn[0].querySelector(".t-store__card__btn-text")),el_buyBtnTxt||(el_buyBtnTxt=el_buyBtn[0].querySelector(".js-store-prod-buy-btn-txt"))}if(isSoldOut)el_buyBtn.length||el_product.querySelector(".js-store-price-wrapper").insertAdjacentHTML("beforeend",'<div class="js-store-prod-sold-out t-store__card__sold-out-msg t-name t-name_xs">'+window.tStoreDict.soldOut+"</div>"),Array.prototype.forEach.call(el_buyBtn,(function(btn){btn.classList.add("t-store__prod-popup__btn_disabled")})),el_buyBtnTxt&&(el_buyBtnTxt.textContent=window.tStoreDict.soldOut);else{Array.prototype.forEach.call(el_buyBtn,(function(btn){btn.classList.remove("t-store__prod-popup__btn_disabled")}));var btnTitle=options.buyBtnTitle||options.popup_opts&&options.popup_opts.btnTitle||window.tStoreDict.addtocart;"small"===el_product.getAttribute("data-card-size")&&(orderBtn1&&options.prodCard.btnTitle1&&(btnTitle=options.prodCard.btnTitle1),orderBtn2&&options.prodCard.btnTitle2&&(btnTitle=options.prodCard.btnTitle2)),el_buyBtnTxt&&(el_buyBtnTxt.textContent=btnTitle)}}function t_store_product_addOneOptionsControl(type,curOption,productControlsWrapper,options,firstAvailabeEdition,recid){if(curOption.name){var str,tplOneOptionTag,tplSelect,optionsTags="",isCustomOption;if("modificator"===type){if(void 0===curOption.values)return;tplOneOptionTag='<option value="[[value]]" data-product-variant-price="[[price]]">[[text]]</option>';var valuesArr=curOption.values.split("\n");Array.prototype.forEach.call(valuesArr,(function(value){var valueText=value.split("=")[0],valuePrice=value.split("=")[1];optionsTags+=tplOneOptionTag.replace(/\[\[value\]\]/g,t_store_escapeQuote(valueText).replace(/&amp;/g,"&amp;amp;")).replace(/\[\[text\]\]/g,t_store_escapeQuote(valueText)).replace(/\[\[price\]\]/g,valuePrice||"")})),str=(tplSelect=t_store_get_control_option_html(options)).replace(/\[\[name\]\]/g,curOption.name).replace(/\[\[optiontags\]\]/g,optionsTags)}else tplOneOptionTag='<option value="[[value]]">[[text]]</option>',Array.prototype.forEach.call(curOption.values,(function(value){""!==value&&(optionsTags+=tplOneOptionTag.replace(/\[\[value\]\]/g,t_store_escapeQuote(value).replace(/&amp;/g,"&amp;amp;")).replace(/\[\[text\]\]/g,t_store_escapeQuote(value)))})),""!==optionsTags&&(str=(tplSelect=t_store_get_control_editionOption_html(options,curOption)).replace(/\[\[id\]\]/g,curOption.id.replace(/&amp;/g,"&amp;amp;")).replace(/\[\[name\]\]/g,curOption.name).replace(/\[\[optiontags\]\]/g,optionsTags));if(str&&productControlsWrapper.insertAdjacentHTML("beforeend",str),t_store_option_checkIfCustom(curOption)&&t_store_option_styleCustomControl(recid,options,curOption,productControlsWrapper,firstAvailabeEdition),"editionopt"===type){var optionsContol=productControlsWrapper.querySelectorAll(".js-product-edition-option"),last,optionControl=optionsContol[optionsContol.length-1];if(optionControl)return optionControl}}}function t_store_product_getEditionOptionsArr(product,optionsData){var editions=product.editions,defaultProps=["quantity","price","priceold","gallery","sku","uid","img","externalid","pack_x","pack_y","pack_z","pack_m"],allProps={},editionOptions=[];return editions.forEach((function(edition){Object.keys(edition).forEach((function(key){-1!==defaultProps.indexOf(key)||allProps[key]||(allProps[key]=!0)})),Object.keys(allProps).length})),Object.keys(allProps).forEach((function(p){var propEl={name:p,id:t_store_combineOptionIdByName(p),params:t_store_product_getEditionOptionsArr_getParams(p,product,optionsData),values:t_store_product_getEditionOptionsArr_getValues(p,editions),imagesObj:t_store_product_getEditionOptionsArr_getImgValues(p,editions),valuesObj:optionsData&&optionsData[p]?optionsData[p].values:{}};editionOptions.push(propEl)})),editionOptions}function t_store_product_getFirstAvailableEditionData(editions){for(var i=0;i<editions.length;i++){var curEdition=editions[i];if(0!==parseInt(curEdition.quantity,10))return curEdition}return editions[0]}function t_store_product_getFirstAvailableEditionData_forCertainVals(editions,optsValsBeforeChangedArr,el_product,curVal){for(var firstAvailable="",i=0;i<editions.length;i++){for(var curEdition=editions[i],doesContainSelectedOpts=!0,j=0;j<optsValsBeforeChangedArr.length;j++){var name=optsValsBeforeChangedArr[j].name,id,val=t_store_product_getCurEditionOptValById(el_product,optsValsBeforeChangedArr[j].id);if(curEdition[name]=(curEdition[name]||"").replace(/&#92;/g,"\\").replace(/&gt;/g,">").replace(/&lt;/g,"<"),curVal&&j===optsValsBeforeChangedArr.length-1&&(val=curVal),curEdition[name]!==val){doesContainSelectedOpts=!1;break}}if(doesContainSelectedOpts){if(0!==parseInt(curEdition.quantity,10))return curEdition;firstAvailable||(firstAvailable=curEdition)}}return firstAvailable&&0===parseInt(firstAvailable.quantity,10)&&(firstAvailable=""),firstAvailable}function t_store_product_getEditionOptionsArr_getValues(prop,editions){var values=[];return editions.forEach((function(curEdition){var val=curEdition[prop];void 0!==val&&-1===values.indexOf(val)&&values.push(val)})),values=t_store_product_sortValues(values)}function t_store_product_sortValuesByOrder(result,type,order){return result.sort((function(a,b){var valueA="filter"===type?a.value:a,valueB="filter"===type?b.value:b;return valueA=valueA.toString().toUpperCase(),valueB=valueB.toString().toUpperCase(),order.indexOf(valueA)-order.indexOf(valueB)}))}function t_store_product_isSimpleOrderValid(values,order){return values.every((function(value){return"object"==typeof value&&"string"==typeof value.value&&(value=value.value),"string"==typeof value&&(value=value.trim().toUpperCase(),order.indexOf(value)>=0)}))}function t_store_product_isDateOrderValid(values){var datePattern=/(\d{2})\.(\d{2})\.(\d{4})/;return values.every((function(value){return"object"==typeof value&&"string"==typeof value.value&&(value=value.value),"string"==typeof value&&(value=value.trim().toUpperCase()).match(datePattern)}))}function t_store_product_sortValues(values,type,filterValues){var result=values||[];if(values.length<2)return result;var firstTestValue="filter"===type?values[0].value.toString():values[0].toString(),secondTestValue="filter"===type?values[1].value.toString():values[1].toString(),clothesOrder=["XXXS","3XS","XXS","2XS","XS","XS-S","S","S-M","M","M-L","L","L-XL","XL","XXL","2XL","XXXL","3XL","XXXXL","BXL","4XL","BXXL","5XL","BXXXL","6XL","ONE SIZE","ОДИН РАЗМЕР","УНИВЕРСАЛЬНЫЙ"],weekdaysOrder=["ПОНЕДЕЛЬНИК","MONDAY","ВТОРНИК","TUESDAY","СРЕДА","WEDNESDAY","ЧЕТВЕРГ","THURSDAY","ПЯТНИЦА","FRIDAY","СУББОТА","SATURDAY","ВОСКРЕСЕНЬЕ","SUNDAY"],monthsOrder=["ЯНВАРЬ","ФЕВРАЛЬ","МАРТ","АПРЕЛЬ","МАЙ","ИЮНЬ","ИЮЛЬ","АВГУСТ","СЕНТЯБРЬ","ОКТЯБРЬ","НОЯБРЬ","ДЕКАБРЬ","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],wattOrder,bytesOrder,weightOrder,lengthOrder,litreOrder,largeNumsOrder,units={watt:["Вт","W","даВт","daW","гВт","hW","кВт","kW","мВт","mW","ГВт","GW","ТВт","TW","ПВт","PW"],bytes:["Кб","Кбайт","KiB","KB","Мбайт","Мб","MiB","MB","Mb","Гбайт","Гб","GiB","GB","Gb","Тбайт","Тб","TiB","TB"],weight:["мкг","mcg","мг","mg","г","g","кг","kg","т","t","ц"],length:["мкм","мм","mm","дм","dm","см","cm","м","m","км","km"],litre:["мл","л"],largeNums:["тыс","млн","млрд"]},checkValues=filterValues||values,datePattern=/(\d{2})\.(\d{2})\.(\d{4})/;if(t_store_product_isSimpleOrderValid(checkValues,clothesOrder))result=t_store_product_sortValuesByOrder(result,type,clothesOrder);else if(t_store_product_isSimpleOrderValid(checkValues,weekdaysOrder))result=t_store_product_sortValuesByOrder(result,type,weekdaysOrder);else if(t_store_product_isSimpleOrderValid(checkValues,monthsOrder))result=t_store_product_sortValuesByOrder(result,type,monthsOrder);else if(t_store_product_isDateOrderValid(checkValues))result=values.sort((function(a,b){var dateA="filter"===type?a.value:a,dateB="filter"===type?b.value:b;return dateA=new Date(dateA.toString().replace(datePattern,"$2/$1/$3").trim()),dateB=new Date(dateB.toString().replace(datePattern,"$2/$1/$3").trim()),isNaN(dateA)||isNaN(dateB)?0:dateA-dateB}));else{try{result=values.sort((function(a,b){var valueA="filter"===type?a.value:a,valueB="filter"===type?b.value:b;if(valueA=valueA.toString().replace(/^(от|from)\s+/i,""),valueB=valueB.toString().replace(/^(от|from)\s+/i,""),valueA=parseFloat(valueA.toString().replace(",",".").trim()),valueB=parseFloat(valueB.toString().replace(",",".").trim()),isNaN(valueA)||isNaN(valueB))return 0;if(valueA===valueB){var pureValueA="filter"===type?a.value:a,pureValueB="filter"===type?b.value:b;pureValueA=pureValueA.toString().replace(/^(от|from)\s+/i,"").replace(",",".").trim(),pureValueB=pureValueB.toString().replace(/^(от|from)\s+/i,"").replace(",",".").trim();var dimensionsPattern=/(\d+)\s?(x|х|×)\s?(\d+)/gi,pureValueAMatched=pureValueA.match(dimensionsPattern),pureValueBMatched=pureValueB.match(dimensionsPattern);return pureValueAMatched&&pureValueBMatched&&(pureValueA=pureValueAMatched[2],pureValueB=pureValueBMatched[2]),pureValueA>pureValueB?1:pureValueB>pureValueA?-1:0}return valueA-valueB}))}catch(e){console.log(e)}try{for(var unit in units){var values,isUnit=t_store_product_hasMeasureUnit(values=units[unit],firstTestValue)&&t_store_product_hasMeasureUnit(values,secondTestValue),re=new RegExp(/^\d*,?\.?\d+\s*/,"gi");if(isUnit)return result=result.sort((function(a,b){var valueA="filter"===type?a.value:a,valueB="filter"===type?b.value:b;return valueA=valueA.toString().replace(re,"").trim(),valueB=valueB.toString().replace(re,"").trim(),values.indexOf(valueA)-values.indexOf(valueB)}))}}catch(e){console.log(e)}}return result}function t_store_product_hasMeasureUnit(values,testValue){return testValue=testValue.replace(/\s/g,""),values.some((function(value){var test,re;return new RegExp("^[\\d.,]+("+value+"){1}$","i").test(testValue)}))}function t_store_product_getEditionOptionsArr_getParams(p,product,optionsData){var params={};if(optionsData)params=optionsData[p]?optionsData[p].params:{};else try{var json_options=JSON.parse(product.json_options);json_options&&json_options.forEach((function(optionObj){optionObj.params&&optionObj.title&&optionObj.title===p&&(params=optionObj.params)}))}catch(e){}return params}function t_store_product_getEditionOptionsArr_getImgValues(prop,editions){var values={};return editions.forEach((function(curEdition){var val=curEdition[prop];values[val]||(values[val]=curEdition.img)})),values}function t_store_product_getCurEditionOptValById(el_product,id){var el_optionsWrap=el_product.querySelector('.js-product-edition-option[data-edition-option-id="'+id+'"]');return el_optionsWrap?el_optionsWrap.querySelector(".js-product-edition-option-variants").value:""}function t_store_product_getEditionSelectEl(wrapper,curOption){return wrapper.querySelector('.js-product-edition-option[data-edition-option-id="'+curOption.id+'"]')}function t_store_combineOptionIdByName(text){return text.replace(/[/\\'"<>{}]/g,"")}function t_store_getProductFirstImg(product){if(product.gallery&&"["===product.gallery[0]){var galleryArr=JSON.parse(product.gallery);if(galleryArr[0]&&galleryArr[0].img)return galleryArr[0].img}return""}function t_store__getFormattedPrice(options,price){if(null==price||0===price||""===price)return"";price=(price=t_store__cleanPrice(price)).toString();var showDecPart=!1,hasDefinedSeparator=!1,foo;(options.currencyDecimal?showDecPart="00"===options.currencyDecimal:void 0!==window.tcart&&void 0!==window.tcart.currency_dec&&(showDecPart="00"===window.tcart.currency_dec),options.currencySeparator?hasDefinedSeparator="."===options.currencySeparator:void 0!==window.tcart&&void 0!==window.tcart.currency_sep&&(hasDefinedSeparator="."===window.tcart.currency_sep),showDecPart)&&(-1===price.indexOf(".")&&-1===price.indexOf(",")?price+=".00":1===price.substring(price.indexOf(".")+1).length&&(price+="0"));return price=(price=hasDefinedSeparator?price.replace(",","."):price.replace(".",",")).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function t_store__getFormattedMinPrice(options,product){var minPrice=product.minPrice;return null!=minPrice&&(minPrice=t_store__getFormattedPrice(options,minPrice)),minPrice}function t_store__getFormattedPriceRange(options,product){if(!Object.prototype.hasOwnProperty.call(options,"prodCard")||options.prodCard.showOpts||!options.price.priceRange||""===options.price.priceRange||!Object.prototype.hasOwnProperty.call(product,"minPrice")||!Object.prototype.hasOwnProperty.call(product,"maxPrice"))return null;var minPrice=product.minPrice,maxPrice=product.maxPrice;if(null===minPrice||null===maxPrice||minPrice===maxPrice)return null;minPrice=t_store__getFormattedPrice(options,minPrice),maxPrice=t_store__getFormattedPrice(options,maxPrice);var priceRangeDesign=options.price.priceRange;return"range"===priceRangeDesign?minPrice+"—"+maxPrice:"from"===priceRangeDesign?window.tStoreDict.from+" "+minPrice:void 0}function t_store_loadMoreBtn_display(recid){var rec=document.getElementById("rec"+recid);if(rec){var loadMoreWrap=rec.querySelector(".t-store__load-more-btn-wrap"),mobileGridCont=rec.querySelector(".js-store-grid-cont.t-store__grid-cont_mobile-one-row"),isMobileOneRow=!!(window.innerWidth<960&&mobileGridCont);loadMoreWrap&&loadMoreWrap.classList.toggle("t-store__load-more-btn-wrap_hidden",isMobileOneRow)}}function t_store_oneProduct_init(recid,options){var el_prod=document.querySelector("#rec"+recid+" .js-store-product_single");if(el_prod){var uid=el_prod.getAttribute("data-product-gen-uid");uid=t_store_oneProduct_clearUid(uid),el_prod.setAttribute("data-product-gen-uid",uid),window.tStoreIsSearchBot||t_store_oneProduct_preloader_add(recid);var pageMode=document.getElementById("allrecords").getAttribute("data-tilda-mode");options.isPublishedPage="edit"!==pageMode&&"preview"!==pageMode;var requestOnBlockChangeInRedactor=window.tStoreSingleProdsObj&&!options.previewmode;!window.tStoreSingleProductsIsRequested||requestOnBlockChangeInRedactor?(t_store_oneProduct_requestAllSingle(options),window.tStoreSingleProductsIsRequested=!0,el_prod.addEventListener("tStoreSingleProductsLoaded",(function(){t_store_oneProduct_fill(recid,window.tStoreSingleProdsObj[uid],options)}))):window.tStoreSingleProdsObj?t_store_oneProduct_fill(recid,window.tStoreSingleProdsObj[uid],options):el_prod.addEventListener("tStoreSingleProductsLoaded",(function(){t_store_oneProduct_fill(recid,window.tStoreSingleProdsObj[uid],options)}))}}function t_store_oneProduct_clearUid(uid){return uid.replace("product id: ","")}function t_store_oneProduct_preloader_add(recid){var el_rec=document.getElementById("rec"+recid),el_prod=el_rec.querySelector(".js-store-product_single");if(el_prod){var elInfo=el_prod.querySelector(".js-store-single-product-info");elInfo.style.display="none",clearTimeout(el_rec.getAttribute("data-preloader-timeout"));var preloaderTimerId=setTimeout((function(){var str="";str+='<div class="t-store__single-prod-preloader" style="display:none;">';for(var strTextEl='<div class="t-store__single-prod-preloader__text"></div>',i=0;i<6;i++)str+=strTextEl;str+="</div>",elInfo.insertAdjacentHTML("beforebegin",str),t_store__fadeIn(el_prod.querySelector(".t-store__single-prod-preloader"))}),1e3);el_rec.setAttribute("data-preloader-timeout",preloaderTimerId)}}function t_store_oneProduct_preloader_hide(recid){var el_rec=document.getElementById("rec"+recid),el_prod=el_rec.querySelector(".js-store-product_single");if(el_prod){clearTimeout(el_rec.getAttribute("data-preloader-timeout"));var storeSingleProductInfo=el_prod.querySelector(".js-store-single-product-info");storeSingleProductInfo&&(storeSingleProductInfo.style.display="");var orderLink=el_prod.querySelector('a.t-btn[href="#order"]'),orderWrapper=orderLink?orderLink.parentElement||orderLink.parentNode:"";orderWrapper&&(orderWrapper.style.pointerEvents="inherit"),t_store__removeElement(el_prod.querySelector(".t-store__single-prod-preloader"))}}function t_store_oneProduct_requestAllSingle(options){var el_singleProds=document.querySelectorAll(".js-store-product_single"),arrId=[];Array.prototype.forEach.call(el_singleProds,(function(product){var uid=product.getAttribute("data-product-gen-uid");uid=t_store_oneProduct_clearUid(uid),arrId.push(uid)}));var onDone=function(dataObj){var productsArr=dataObj.products;""!==productsArr?(dataObj.options&&dataObj.options.length&&!window.tStoreOptionsList&&(window.tStoreOptionsList=dataObj.options),window.tStoreSingleProdsObj=t_store_oneProduct_prodsArrToAssociative(productsArr),Array.prototype.forEach.call(el_singleProds,(function(product){t_triggerEvent(product,"tStoreSingleProductsLoaded")}))):console.log("Something went wrong. Can't get products array by uid list. Please check products UID.")};t_store_loadProducts_byId(arrId,options,onDone,(function(error){t_store_changeEndpoint(error,(function(){t_store_loadProducts_byId(arrId,options,onDone)}))}))}function t_store_oneProduct_prodsArrToAssociative(productsArr){var obj={};if(!productsArr)return obj;for(var i=0;i<productsArr.length;i++){var cur=productsArr[i];obj[cur.uid]=cur}return obj}function t_store_oneProduct_fill(recid,product,options){var rec,el_product=document.getElementById("rec"+recid).querySelector(".js-product");if(el_product){if(t_store_oneProduct_preloader_hide(recid),el_product.setAttribute("data-card-size","large"),!product)return t_store_oneProduct_error_show(recid,options),t_store_product_triggerSoldOutMsg(el_product,!0,options),void(""===el_product.querySelector(".js-store-prod-price-old-val").textContent&&(el_product.querySelector(".js-store-prod-price-old").style.display="none"));t_store_oneProduct_successMsg_show(recid,product,options),el_product.setAttribute("data-product-pack-label",product.pack_label),el_product.setAttribute("data-product-pack-m",product.pack_m),el_product.setAttribute("data-product-pack-x",product.pack_x),el_product.setAttribute("data-product-pack-y",product.pack_y),el_product.setAttribute("data-product-pack-z",product.pack_z),el_product.setAttribute("data-product-url",product.url||"");var partuids=product.partuids&&JSON.parse(product.partuids);el_product.setAttribute("data-product-part-uid",partuids||""),t_store_addProductOptions(recid,product,el_product,options,"largecard"),t_store_snippet_chooseEditionFromUrl(recid,product,el_product,options),t_store_onFuncLoad("t_prod__init",(function(){t_prod__init(recid)}));var storeProdSKU=el_product.querySelector(".js-store-prod-sku");if(storeProdSKU&&"none"!==storeProdSKU.style.display){var parent=storeProdSKU.parentNode;parent&&parent.classList.contains("t-descr")&&storeProdSKU.insertAdjacentHTML("beforebegin",window.tStoreDict.sku+": ")}t_store_option_handleOnChange(el_product),t_store_option_handleOnChange_custom(recid,el_product,options)}}function t_store_oneProduct_successMsg_show(recid,product,options){if(!options.previewmode){var el_rec=document.getElementById("rec"+recid),text="RU"===window.tStoreBrowserLang?"Товар успешно связан с каталогом. Название товара в каталоге: ":"Product is connected to catalog. Product name in catalog is ";t_store_showMsgInRedactor(el_rec,text+="<b>"+product.title+"</b>","success")}}function t_store_oneProduct_error_show(recid,opts){var el_rec,errorText;opts.previewmode||t_store_showMsgInRedactor(document.getElementById("rec"+recid),"RU"===window.tStoreBrowserLang?"Не удается получить товар из каталога. Возможно он был удален или отключен. Пожалуйста, проверьте, что товар с таким ID существует.":"Can't find a product in the catalog. It may have been deleted or disabled. Please check that the product with this ID exists.","error")}function t_store_showMsgInRedactor(el_rec,text,type){var storeMsg;t_store__removeElement(el_rec.querySelector(".js-store-msg"));var textColor,bgColor="success"===type?"#62C584":"yellow",msgHtml="";msgHtml+='<div class="js-store-msg" style="margin: 0;text-align: left; font-family: tfutura,Arial,sans-serif; color: '+("success"===type?"#fff":"#000")+';">',msgHtml+='   <div style="background: '+bgColor+'; padding: 16px 20px; box-sizing: border-box; margin-bottom: 30px; position: relative;" class="t-container">',msgHtml+='       <div style="width: 40px; height: 40px; position: absolute; left: 20px; bottom: -40px;">',msgHtml+='       <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="40px" width="40px"><polygon fill="'+bgColor+'" stroke="'+bgColor+'" stroke-width="0" points="0,0 40,0 0,20 0,0"></polygon></svg>',msgHtml+="       </div>",msgHtml+=text,msgHtml+="   </div>",msgHtml+="</div>",el_rec.insertAdjacentHTML("afterbegin",msgHtml)}function t_store_isQueryInAddressBar(queryString){var currentLocationSearch;try{currentLocationSearch=decodeURI(window.location.href)}catch(error){currentLocationSearch=window.location.href}return!!currentLocationSearch&&-1!==currentLocationSearch.indexOf(queryString)}function t_store_getColumnWidth(size){var windowWidth,mediaQuery,gridSizes;return{minWidth1200:{col_1:60,col_2:160,col_3:260,col_4:360,col_5:460,col_6:560,col_7:660,col_8:760,col_9:860,col_10:960,col_11:1060,col_12:1160},maxWidth1200:{col_1:60,col_2:140,col_3:220,col_4:300,col_5:380,col_6:460,col_7:540,col_8:620,col_9:700,col_10:780,col_11:860,col_12:940}}[(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>1200?"minWidth1200":"maxWidth1200"]["col_"+size]}function t_store_option_getOptionsData(){var productsOptions=window.tStoreOptionsList;if(!productsOptions)return null;for(var result={},i=0;i<productsOptions.length;i++){var option=productsOptions[i],key=option.title;option.params&&"string"==typeof option.params&&(option.params=JSON.parse(option.params)),option.values&&"string"==typeof option.values&&(option.values=JSON.parse(option.values)),result[key]=option}return result}function t_store_option_checkIfCustom(curOption){var params=curOption.params;return!(!params||Array.isArray(params))&&(!(!params.view||"select"===params.view)||!(!params.hasColor&&!params.linkImage))}function t_store_option_handleOnChange_custom(recid,product,options){var editionOptionEvent=function(){var el_control=this.closest(".js-product-edition-option"),el_custom_ui=el_control.querySelector(".t-product__option-variants_custom");if(el_control&&el_custom_ui){var value=this.value,el_active_option=el_custom_ui.querySelector(".t-product__option-item_active");if(el_active_option){var el_input=el_active_option.querySelector(".t-product__option-input");if(el_input.value!==value){el_input.checked=!1,value=(value||"").replace(/"/g,'\\"');var el_upd_input=el_custom_ui.querySelector('.t-product__option-input[value="'+value+'"]');setTimeout((function(){el_upd_input.click(),el_upd_input.checked=!0})),el_active_option.classList.remove("t-product__option-item_active"),el_upd_input.parentNode.classList.add("t-product__option-item_active"),setTimeout((function(){t_store_unifyCardsHeights(recid,options),options.verticalAlignButtons&&t_store_verticalAlignButtons(recid,options),t_triggerEvent(document.body,"twishlist_addbtn")}),50)}}}else setTimeout((function(){t_triggerEvent(document.body,"twishlist_addbtn")}),50)};Array.prototype.forEach.call(product.querySelectorAll(".js-product-edition-option-variants"),(function(editionOption){var el_control,el_custom_ui;editionOption.removeEventListener("change",editionOptionEvent),editionOption.closest(".js-product-edition-option").querySelector(".t-product__option-variants_custom")&&editionOption.addEventListener("change",editionOptionEvent)})),Array.prototype.forEach.call(product.querySelectorAll(".t-product__option-variants_custom"),(function(variantCustom){var el_input=variantCustom.querySelectorAll(".t-product__option-input"),el_option=variantCustom.querySelectorAll(".t-product__option-item"),el_select_hidden=variantCustom.parentNode.querySelector(".t-product__option-variants_regular .js-product-edition-option-variants");Array.prototype.forEach.call(el_input,(function(optionInput){optionInput.addEventListener("change",(function(){var value=this.value;value=value.replace(/&/g,"&amp;"),el_select_hidden.value=value,Array.prototype.forEach.call(el_option,(function(option){option.classList.remove("t-product__option-item_active")})),this.parentNode.classList.add("t-product__option-item_active"),setTimeout((function(){t_store_unifyCardsHeights(recid,options),options.verticalAlignButtons&&t_store_verticalAlignButtons(recid,options)}),50)}))}))})),Array.prototype.forEach.call(product.querySelectorAll(".t-product__option-selected_select"),(function(customDropdown){var customDropdownClickEvent=function(){this.nextElementSibling.classList.contains("t-product__option-variants_custom")&&this.nextElementSibling.classList.toggle("t-product__option-variants_hidden"),"y"===window.lazy&&t_lazyload_update()};customDropdown.removeEventListener("click",customDropdownClickEvent),customDropdown.addEventListener("click",customDropdownClickEvent);var el_select_custom,el_option=customDropdown.parentNode.querySelector(".t-product__option-variants_custom").querySelectorAll(".t-product__option-item"),optionClickEvent=function(){Array.prototype.forEach.call(el_option,(function(option){option.classList.remove("t-product__option-item_active")})),this.classList.add("t-product__option-item_active"),this.closest(".t-product__option-variants_custom").classList.add("t-product__option-variants_hidden");var value=this.querySelector(".t-product__option-title").textContent,el_text;this.closest(".t-product__option").querySelector(".t-product__option-selected-title").textContent=value;var el_selected_color=this.closest(".t-product__option").querySelector(".t-product__option-selected.t-product__option-selected_color");if(el_selected_color){var color=this.querySelector(".t-product__option-checkmark_color").style.backgroundColor,el_checkmark;(el_checkmark=el_selected_color.querySelector(".t-product__option-selected-checkmark")).style.backgroundColor=color}var el_selected_image=this.closest(".t-product__option").querySelector(".t-product__option-selected.t-product__option-selected_image");if(el_selected_image){var imageUrl=this.querySelector(".t-product__option-checkmark_image").style.backgroundImage,imageUrlLazyload=this.querySelector(".t-product__option-checkmark_image").getAttribute("data-original"),el_checkmark;(el_checkmark=el_selected_image.querySelector(".t-product__option-selected-checkmark")).setAttribute("data-original",imageUrlLazyload),el_checkmark.style.backgroundImage="none",el_checkmark.style.backgroundImage=imageUrl}};Array.prototype.forEach.call(el_option,(function(option){option.removeEventListener("click",optionClickEvent),option.addEventListener("click",optionClickEvent)}));var clickOutsideEvent=function(e){var el_clicked=e.target,el_parent=el_clicked.closest(".t-product__option-variants_custom");el_parent&&el_parent!==el_clicked&&el_parent.contains(el_clicked)||el_clicked.classList.contains("t-product__option-selected")||el_clicked.closest(".t-product__option-selected")||Array.prototype.forEach.call(document.querySelectorAll(".t-product__option-variants_custom.t-product__option-variants_select"),(function(select){select.classList.add("t-product__option-variants_hidden")}))};Array.prototype.forEach.call(["click","outsideCustomDropdown"],(function(event){document.removeEventListener(event,clickOutsideEvent),document.addEventListener(event,clickOutsideEvent)}))}))}function t_store_option_handleOnChange(product){var editionOptionEvent=function(){var el_control=this.closest(".js-product-edition-option");el_control&&t_triggerEvent(el_control,"change")};Array.prototype.forEach.call(product.querySelectorAll(".js-product-edition-option-variants"),(function(editionOption){editionOption.removeEventListener("change",editionOptionEvent),editionOption.addEventListener("change",editionOptionEvent)}))}function t_store_unescapeHtml(str){var textArea=document.createElement("textarea");return textArea.innerHTML=str,textArea.value}function t_store_onFuncLoad(funcName,okFunc,time){if("function"==typeof window[funcName])okFunc();else{var startTime=Date.now(),error=new Error(funcName+" is undefined"),callbackError=function(){throw error};setTimeout((function checkFuncExist(){var currentTime=Date.now();"function"!=typeof window[funcName]?("complete"===document.readyState&&currentTime-startTime>7e3&&"function"!=typeof window[funcName]&&callbackError(),setTimeout(checkFuncExist,time||100)):okFunc()}))}}function t_store_hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,(function(m,r,g,b){return r+r+g+g+b+b}));var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex),aaa=result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;return result?[aaa.r,aaa.g,aaa.b]:null}function t_store_luma_rgb(color){var isArray=Array.isArray(color);if(void 0===color)return"black";if(0!==color.indexOf("rgb")&&!isArray)return"black";var rgb=isArray?color:color.split("(")[1].split(")")[0].split(",");return rgb.length<3?"black":.2126*rgb[0]+.7152*rgb[1]+.0722*rgb[2]>128?"black":"white"}function t_store_getLightnessColor(color){var rgb,max,min;if(-1===color.indexOf("rgb")){var hex=parseInt(color.indexOf("#")>-1?color.substring(1):color,16);rgb={r:hex>>16,g:(65280&hex)>>8,b:255&hex}}else{var values,rgba=color.replace(/[^\d,.]/g,"").split(",");rgb={r:rgba[0],g:rgba[1],b:rgba[2]}}return rgb.r/=255,rgb.g/=255,rgb.b/=255,(Math.max(rgb.r,rgb.g,rgb.b)+Math.min(rgb.r,rgb.g,rgb.b))/2}function t_store_removeRgbOpacity(color){if(!color||!color.length)return null;var result=color.split(",");return result[3]&&(result[3]="1)"),result.join()}function t_store_snippet_getJsonFromUrl(){var url,query=window.location.search.substring(1),result={};return query.split("&").forEach((function(part){var item=part.split("=");try{result[item[0]]=decodeURIComponent(item[1])}catch(error){result[item[0]]=item[1]}})),result}function t_store__cleanPrice(price){return price?(price=(price=price.toString()).replace(",",".").replace(/[^0-9.]/g,""),price=parseFloat(price).toFixed(2),isNaN(price)&&(price=0),price=parseFloat(price),(price*=1)<0&&(price=0)):price=0,price}function t_store__removeElement(el){el&&el.parentNode&&el.parentNode.removeChild(el)}function t_store__fadeIn(el,duration){if(("1"===getComputedStyle(el).opacity||""===getComputedStyle(el).opacity)&&"none"!==getComputedStyle(el).display)return!1;var opacity=0;duration||(duration=200);var speed=(duration=parseInt(duration))>0?duration/10:40;el.style.opacity=opacity,el.style.display="block";var timer=setInterval((function(){el.style.opacity=opacity,(opacity+=.1)>=1&&clearInterval(timer)}),speed)}function t_store__serializeData(obj,prefix){var str=[];for(var property in obj)if(Object.prototype.hasOwnProperty.call(obj,property)){var key=prefix?prefix+"["+property+"]":property,value=obj[property],stringifyValue;"{}"!==JSON.stringify(value)&&null!==value&&str.push(null!==value&&"object"==typeof value?t_store__serializeData(value,key):encodeURIComponent(key)+"="+encodeURIComponent(value))}return str.join("&")}function t_store_changeEndpoint(error,callback){var text="";error&&(error.status>=500||408==error.status||410==error.status||429==error.status||"timeout"===error.type)&&-1!==window.t_store_endpoint.indexOf("store.tilda")?(window.t_store_endpoint="store2.tildacdn.com","function"==typeof callback&&callback()):(text=error&&error.responseText>""?"["+error.status+"] "+error.responseText:error&&error.statusText?"Error ["+error.status+", "+error.statusText+"]":"Error type ["+error.type+"]",console.log(text+". Please, try again later."))}function t_store_paramsToObj(recid,opts){var paramsString;try{paramsString=decodeURI(window.location.search)}catch(e){paramsString=window.location.search}var result={otherParams:[]};result[recid]={};try{paramsString=paramsString.replace(/&amp;/g,"%26amp")}catch(e){console.log(e)}var params=paramsString.slice(1).split("&"),recIdFromURL;(params=params.map((function(param){return param.replace(/%26amp/g,"&amp;")})),result.otherParams=params.filter((function(param){var isTildaFilter;return!(/^tfc_/i.test(param)||/^s_/i.test(param))&&param})),-1!==window.location.href.indexOf("s_recid="))?window.location.href.split("s_recid=")[1].split("&")[0]===recid&&params.splice(1).forEach((function(param){try{var isTildaFilter=/^s_/i.test(param),isRecOnPage;if(!document.querySelector("#rec"+recid))return;if(result[recid]||(result[recid]={}),isTildaFilter){var parts=(param=(param=param.replace(/^s_/i,"tfc_")).replace(/%3A/gi,":")).split("="),key=parts[0],values=parts[1].replace(/\+/g," ").split(":::"),filter=key.replace(/^tfc_/i,"");result[recid][filter]=result[recid][filter]?result[recid][filter].concat(values):values}}catch(e){console.log(e)}})):-1!==window.location.href.indexOf("tfc_")&&params.forEach((function(param){var parts=param.split("=");try{var isTildaFilter;if(/^tfc_/i.test(param)&&"tfc_div"!==parts[0]){var key=parts[0],values;values=-1!==window.location.href.indexOf("tfc_div")?parts[1].replace(/\+/g," ").replace(/%2B/g,"+").split(":::"):parts[1].replace(/\+/g," ").split("%2B");var regexp=new RegExp(/\[\d.*\]$/,"gi"),match=key.match(regexp),recid=match?Number(JSON.parse(match[0])):null,isRecOnPage;if(!recid)return void console.error("Can't find recid in URL param");if(!document.querySelector("#rec"+recid))return;var filter=key.replace(regexp,"").replace("tfc_","");result[recid]||(result[recid]={}),result[recid][filter]=result[recid][filter]?result[recid][filter].concat(values):values}}catch(e){console.log(e)}}));window.tStoreCustomUrlParams=result,t_store_paramsToObj_updateUrl(result);var sortByRec=t_store_paramsToObj_getDefaultSort(recid,opts.defaultSort);for(var rec in sortByRec){var newSort=sortByRec[rec].sort,newQuantity=sortByRec[rec].quantity;(newSort||newQuantity)&&(result[rec]&&result[rec].sort&&opts.previewmode||newSort&&(result[rec]||(result[rec]={}),result[rec].sort=newSort),result[rec]&&result[rec].quantity&&"object"==typeof result[rec].quantity&&"y"===result[rec].quantity[0]&&opts.previewmode||newQuantity&&(result[rec]||(result[rec]={}),result[recid].quantity||(result[rec].quantity=["y"])))}return window.tStoreCustomUrlParams=result,result}function t_store_paramsToObj_updateUrl(paramsObj){var newUrl=t_store_customURLParamsToString(paramsObj);window.location.hash&&(newUrl+=window.location.hash);try{window.history.replaceState(null,null,newUrl)}catch(e){}}function t_store_paramsToObj_getDefaultSort(recid,sort){var result=window.tStoreDefaultSort?window.tStoreDefaultSort:{};if(!sort)return result;if(sort.default){var mapSort={"sort-price-asc":"price:asc","sort-price-desc":"price:desc","sort-name-asc":"title:asc","sort-name-desc":"title:desc","sort-created-asc":"created:asc","sort-created-desc":"created:desc"};result[recid]||(result[recid]={}),result[recid].sort=new Array(mapSort[sort.default])}return sort.in_stock&&(result[recid]||(result[recid]={}),result[recid].quantity||(result[recid].quantity=["y"])),window.tStoreDefaultSort=result,result}function t_store_customURLParamsToString(params){var result="",otherParams="";for(var param in params){var rec=params[param];if("otherParams"!==param)for(var filter in rec)try{var values=Array.isArray(rec[filter])?rec[filter].join("[[PLUS]]"):rec[filter].toString();values=(values=(values=(values=(values=(values=values.replace(/%/g,"%25")).replace(/#/g,"%23")).replace(/\+/g,"%2B")).replace(/\[\[PLUS\]\]/g,":::")).replace(/%26amp/g,"&amp;")).replace(/\s/gi,"+"),result+=result.length?"&":"?",result+="tfc_"+filter+"["+param+"]="+values}catch(e){console.log(e)}}return result&&(result+="&tfc_div=:::"),params.otherParams&&params.otherParams.length&&(params.otherParams.forEach((function(param){param.length&&(otherParams+="&"+param)})),result=result.length?result+otherParams:"?"+otherParams.slice(1)),result.length?result:window.location.origin+window.location.pathname}function t_store_updateOptionsBasedOnUrl(options,customUrlParams,recid){try{var params=customUrlParams[recid];for(var key in options.filters={},params)if("sort"!==key){var isString=-1!==key.indexOf("price:m")||-1!==key.indexOf("quantity");options.filters[key]=isString?params[key].toString():params[key]}else{options.sort={};var parts=params[key].join().split(":"),key=parts[0],value=parts[1];options.sort[key]=value}return options}catch(e){console.log("something wrong in t_store_updateOptionsBasedOnUrl",e)}}function t_store_snippet_chooseEditionFromUrl(recid,product,el_product,options){try{var urlParams,uid=t_store_snippet_getJsonFromUrl().editionuid;if(uid&&el_product.getAttribute("data-product-uid")!==uid){console.log("show product by uid from url = "+uid);var edObj="",isSoldOut;if(product.editions.forEach((function(edtn){edtn.uid===parseInt(uid,10)&&(edObj=edtn)})),!edObj)return;t_store_product_updateEdition(recid,el_product,edObj,product,options),t_store_product_triggerSoldOutMsg(el_product,0===parseInt(edObj.quantity),options)}}catch(e){console.log("error decode url")}}function t_store_moveSearhSort(recid,opts){var rec=document.getElementById("rec"+recid);if(rec){var searchSort=rec.querySelector(".t-store__filter__search-and-sort");if(window.innerWidth>960&&searchSort&&"none"===window.getComputedStyle(searchSort).display&&(searchSort.style.display=""),opts.sidebar){var controlsWrapper=rec.querySelector(".t-store__filter__controls-wrapper"),contWithFiler=rec.querySelector(".js-store-cont-w-filter");if(searchSort){var isSearchOnTop=searchSort.parentNode.classList.contains("js-store-cont-w-filter");window.innerWidth<960?isSearchOnTop&&(t_store__removeElement(searchSort),controlsWrapper.insertAdjacentHTML("beforeend",searchSort)):isSearchOnTop||(t_store__removeElement(searchSort),contWithFiler.insertAdjacentHTML("afterbegin",searchSort))}}}}function t_store_get_productCard_horizontalStructure(product,edition,options,link,isRelevantsShow,rec){var str="";return(product.gallery[0]&&""!==product.gallery[0]||product.gallery[0]&&""!==product.gallery[0])&&options.prodCard.hasImg&&(str+='<div class="t-store__card__imgwrapper_column"'+(options.imageWidth&&"0"!==options.imageWidth?' style="width: '+options.imageWidth+'px;"':"")+">"+link.open+t_store_get_productCard_img_html(product,options)+link.close+"</div>"),str+='<div class="t-store__card__contentwrapper">'+t_store_get_horizontalProductCard_txt_html(product,options,link,edition,isRelevantsShow,rec)+t_store_get_horizontalProductCard_priceAndButtons(product,options,edition,isRelevantsShow,rec)+"</div>"}function t_store_get_horizontalProductCard_txt_html(product,options,link,edition){var titleName=product.title;if(options.isTitleClip)var titleName=product.title.length>50?product.title.slice(0,50)+"...":product.title;if(product.title)var title='<div class="t-store__card__title t-typography__title t-name t-name_md js-store-prod-name js-product-name"'+(Object.prototype.hasOwnProperty.call(options.typo,"title")?' data-auto-correct-font-size="rem" style="'+options.typo.title+'"':"")+">"+titleName+"</div>";var descr="";product.descr&&options.prodCard.hasDescr&&(descr='<div class="t-store__card__descr t-typography__descr t-descr t-descr_xxs js-store-prod-descr"'+(Object.prototype.hasOwnProperty.call(options.typo,"descr")?' style="'+options.typo.descr+'"':"")+">"+product.descr+"</div>");var sku="",str;return edition.sku&&(sku='<div class="js-store-prod-sku js-product-sku" translate="no" style="display:none;">'+product.sku+"</div>"),'<div class="t-store__card__textwrapper">'+link.open+title+link.close+descr+sku+'<div class="js-product-controls-wrapper t-store__card__prod-controls-wrapper" style="display:none;"></div></div>'}function t_store_get_horizontalProductCard_priceAndButtons(product,options,edition,isRelevantsShow,rec){var rightColumnWidth=parseInt(options.rightColumnWidth,10),styleStr=rightColumnWidth?'style="width: '+rightColumnWidth+'px;"':"",str;return'<div class="t-store__card__price-buttons'+("2"===options.prodCard.style?" t-store__card__price-buttons_in-row":"")+'"'+styleStr+">"+t_store_get_productCard_Price_html(product,edition,options)+t_store_get_productCard_btn_html(product,options,isRelevantsShow,rec)+"</div>"}function t_store_getDictObj(){var dict={sku:{EN:"SKU",RU:"Артикул",FR:"UGS",DE:"SKU",ES:"SKU",PT:"SKU",UK:"Код товару",JA:"単品管理",ZH:"存货单位",PL:"SKU",KK:"SKU",IT:"SKU",LV:"SKU"},soldOut:{EN:"Out of stock",RU:"Нет в наличии",FR:"En rupture de stock",DE:"Ausverkauft",ES:"Agotado",PT:"Fora de estoque",UK:"Немає в наявності",JA:"在庫切れ",ZH:"缺货",PL:"Nie ma na stanie",KK:"Сатылды",IT:"Esaurito",LV:"Nav noliktavā"},all:{EN:"All",RU:"Все",FR:"Tout",DE:"Alles",ES:"Todos",PT:"Todos",UK:"Всі",JA:"すべて",ZH:"所有",PL:"Wszystkie",KK:"Барлық",IT:"Tutti",LV:"Visi"},from:{EN:"from",RU:"от",FR:"de",DE:"von",ES:"de",PT:"de",JA:"から",ZH:"从",UK:"від",PL:"od",KK:"бастап",IT:"da",LV:"no"},emptypartmsg:{EN:"Nothing found",RU:"Ничего не найдено",FR:"Rien trouvé",DE:"Nichts gefunden",ES:"Nada encontrado",PT:"Nada encontrado",UK:"Нічого не знайдено",JA:"何も見つかりませんでした",ZH:"什么都没找到",PL:"Nic nie znaleziono",KK:"Ештеңе табылмады",IT:"Non abbiamo trovato nulla",LV:"Nekas nav atrasts"},seeotherproducts:{EN:"See other",RU:"Другие товары",FR:"Autres produits",DE:"Andere produkte",ES:"Otros productos",PT:"Outros produtos",UK:"Інші товари",JA:"その他の商品",ZH:"其他产品",PL:"Inne produkty",KK:"Басқа қараңыз",IT:"Vedi altri",LV:"Skatiet citas"},seeAlso:{EN:"See also",RU:"Смотрите также",FR:"Voir également",DE:"Siehe auch",ES:"Ver también",PT:"Veja também",UK:"Дивись також",JA:"また見なさい",ZH:"也可以看看",PL:"Patrz również",KK:"Сондай-ақ, қараңыз",IT:"Guarda anche",LV:"Skatīt arī"},addtocart:{EN:"Buy now",RU:"Купить",FR:"Acheter",DE:"Zu kaufen",ES:"Para comprar",PT:"Comprar",UK:"Купити",JA:"購入する",ZH:"要买",PL:"Kup",KK:"Қазір сатып Ал",IT:"Acquista ora",LV:"Pērc tagad"},loadmore:{EN:"Load more",RU:"Загрузить еще",FR:"Charger plus",DE:"Mehr laden",ES:"Carga más",PT:"Carregue mais",UK:"Завантажити ще",JA:"もっと読み込む",ZH:"裝載更多",PL:"Pokaż więcej",KK:"Load көп",IT:"Carica ancora",LV:"Ielādēt vairāk"},PCE:{EN:"pc",RU:"шт",UK:"шт",KK:"шт"},NMP:{EN:"pack",RU:"уп",UK:"уп",KK:"уп"},MGM:{EN:"mg",RU:"мг",UK:"мг",KK:"мг"}};dict.g=dict.GRM={EN:"g",RU:"г",UK:"г",PL:"r",KK:"г"},dict.KGM={EN:"kg",RU:"кг",UK:"кг",KK:"кг"},dict.TNE={EN:"t",RU:"т",UK:"т",KK:"т"},dict.MLT={EN:"ml",RU:"мл",UK:"мл",KK:"мл"},dict.LTR={EN:"l",RU:"л",UK:"л",KK:"л"},dict.mm=dict.MMT={EN:"mm",RU:"мм",UK:"мм",KK:"мм"},dict.CMT={EN:"cm",RU:"см",UK:"см",KK:"см"},dict.DMT={EN:"dm",RU:"дм",UK:"дм",KK:"дм"},dict.MTR={EN:"m",RU:"м",UK:"м",KK:"м"},dict.MTK={EN:"m²",RU:"м²",UK:"м²",KK:"м²"},dict.MTQ={EN:"m³",RU:"м³",UK:"м³",KK:"м³"},dict.LMT={EN:"lm",RU:"пог. м",UK:"пог. м",KK:"пог. м"},dict.HAR={EN:"ha",RU:"га",UK:"га",KK:"га"},dict.ACR={EN:"acre"},dict.YRD={EN:"yd"},dict.LBR={EN:"lb"},dict.ONZ={EN:"oz"},dict.INH={EN:"in"},dict.FOT={EN:"ft"},dict["product-lwh"]={EN:"LxWxH",RU:"ДxШxВ",DE:"LxBxH",ES:"PxLxK",UK:"ДxШxВ"},dict["product-wht"]={EN:"WxHxT",RU:"ШxВxТ",FR:"LxHxÉ",DE:"BxHxD",ES:"LxKxP",PT:"LxAxE",UK:"ШxВxТ"},dict["product-whd"]={EN:"WxHxD",RU:"ШxВxГ",FR:"LxHxP",DE:"BxHxT",ES:"LxKxS",PT:"LxAxP",UK:"ШxВxГ"},dict["product-weight"]={EN:"Weight",RU:"Вес",FR:"Poids",DE:"Gewicht",ES:"Kaal",PT:"Peso",UK:"Вага",JA:"重さ",ZH:"機重",PL:"Waga",KK:"Салмақ",IT:"Peso",LV:"Svars"};var lang=window.tStoreBrowserLang;window.tStoreDict||(window.tStoreDict={}),Object.keys(dict).forEach((function(key){window.tStoreDict[key]=dict[key][lang]?dict[key][lang]:dict[key].EN}))}function t_triggerEvent(el,eventName){var event;document.createEvent?(event=document.createEvent("HTMLEvents")).initEvent(eventName,!0,!1):document.createEventObject&&((event=document.createEventObject()).eventType=eventName),event.eventName=eventName,el.dispatchEvent?el.dispatchEvent(event):el.fireEvent?el.fireEvent("on"+event.eventType,event):el[eventName]?el[eventName]():el["on"+eventName]&&el["on"+eventName]()}function t_store_fixedPopupButton(recId){var ADDITIONAL_POPUP_HEIGHT=130,BTN_WRAPPER_HEIGHT=90,MOBILE_MAX_WIDTH=560,FIXED_BTN_CLASS="t-store__prod-popup__btn-wrapper-fixed",rec=document.getElementById("rec"+recId);if(rec){var popup=rec.querySelector(".t-popup"),popupContainer=popup.querySelector(".t-popup__container"),btnWrappers=rec.querySelectorAll(".t-store__prod-popup__btn-wrapper");Array.prototype.forEach.call(btnWrappers,(function(el){el.classList.add(FIXED_BTN_CLASS)})),window.isMobile&&window.addEventListener("orientationchange",handleResize),popup.addEventListener(t_store_POPUP_SHOWED_EVENT_NAME,(function(){setTimeout((function(){handleResize()}),0)})),popup.addEventListener(t_store_POPUP_CLOSED_EVENT_NAME,(function(){setTimeout((function(){resetStyle()}),0)})),window.addEventListener("resize",handleResize)}function addStyle(){popupContainer.style.paddingBottom="220px",popupContainer.style.cssText+=";transform:none !important;"}function resetStyle(){popupContainer.style.paddingBottom="",popupContainer.style.transform=""}function handleResize(){window.innerWidth>560?resetStyle():addStyle()}}t_onReady((function(){var allRecords=document.getElementById("allrecords"),rootzoneapi;if(allRecords){var projectLang=allRecords.getAttribute("data-tilda-project-lang");projectLang&&(window.tStoreBrowserLang=projectLang),(rootzoneapi=allRecords.getAttribute("data-tilda-root-zone"))&&(window.t_store_endpoint="store.tildaapi."+rootzoneapi)}t_store_getDictObj(),t_store_fixImgs()})),Array.prototype.some||(Array.prototype.some=function(fn){"use strict";if(null===this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof fn)throw new TypeError;for(var t=Object(this),len=t.length>>>0,thisArg=arguments.length>=2?arguments[1]:void 0,i=0;i<len;i++)if(i in t&&fn.call(thisArg,t[i],i,t))return!0;return!1}),function(e){var matches=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;e.matches=e.matchesSelector=matches||function matches(selector){var matches=document.querySelectorAll(selector),th=this;return Array.prototype.some.call(matches,(function(e){return e===th}))}}(Element.prototype),Element.prototype.closest||(Element.prototype.closest=function(s){for(var el=this;el&&1===el.nodeType;){if(Element.prototype.matches.call(el,s))return el;el=el.parentElement||el.parentNode}return null}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});