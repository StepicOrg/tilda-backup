function t_animateSbs__wrapAtomEls(){$("[data-animate-sbs-event]").each(function(){$(this);$(this).find(".tn-atom").wrap("<div class='tn-atom__sbs-anim-wrapper' style='display:table; width:inherit; height:inherit;'></div>")})}function t_animateSbs__init(){var e={els:$("[data-animate-sbs-event]"),scrollTop:window.pageYOffset,stop:!1,needUpdate:!0};if(e.mode=void 0!==$(e.els[0]).attr("data-field-sbsevent-value")?"edit":"publish",0!=e.els.length){t_animateSbs__cashElsInfo(e);var t,a=t_animateSbs__generateKeyframes(e);if(""!=a&&$("head").append('<style class="sbs-anim-keyframes">'+a+"</style>"),"y"==window.lazy&&t_lazyload_update(),$(window).resize(function(){clearTimeout(t),t=setTimeout(function(){$(window).width()<1200?(e.stop=!0,t_animateSbs__reset(e)):(e.stop=!1,t_animateSbs__cashElsInfo(e),t_animateSbs__triggerTimeAnim(e),t_animateSbs__triggerScrollAnim(e))},500)}),1200<=$(window).width())t_animateSbs__triggerTimeAnim(e),0<$("[data-animate-sbs-event=scroll]").length&&(t_animateSbs__triggerScrollAnim(e),t_animateSbs__checkFrame(e));$(window).load(function(){t_animateSbs__rereadElsValues(e)}),setTimeout(function(){t_animateSbs__rereadElsValues(e)},3e3)}}function t_animateSbs__rereadElsValues(e){for(var t=0;t<e.els.length;t++){var a=e.els[t];t_animateSbs__cashElsTopOffset(a,e),"scroll"==a.changeType&&t_animateSbs__updateStepsStartValues(a)}}function t_animateSbs__checkFrame(e){e.needUpdate=t_animateSbs__checkChanges(e),e.needUpdate&&!1===e.stop&&t_animateSbs__triggerScrollAnim(e),requestAnimationFrame(function(){t_animateSbs__checkFrame(e)})}function t_animateSbs__checkChanges(e){var t=e.scrollTop;return e.scrollTop=window.pageYOffset,t!=e.scrollTop&&0==e.stop}function t_animateSbs__triggerScrollAnim(e){for(var t=e.els,a=0;a<t.length;a++){var s=t[a];if("time"!==s.changeType){var n={opacity:1,blur:0,fix:!1,fix__shiftY:0,translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0};t_animateSbs__triggerScrollAnim__checkElSteps(e,s,n),t_animateSbs__triggerScrollAnim__changeEl(s,n,e)}}}function t_animateSbs__triggerScrollAnim__checkElSteps(e,t,a){for(var s=0;s<t.steps.length;s++){var n=t.steps[s];n.index=s;var i=e.scrollTop+t.triggerOffset,r=i>=n.start,o=i<n.start,_=n.end<=i,l=n.end>i;if(r&&l){n.state="started",t.wrapperEl.css("will-change","transform");var m=i-n.start,c=0==n.dist?1:m/n.dist;a.prevUnfixedDist=n.prevUnfixedDist,t_animateSbs__triggerScrollAnim__calcStyle(t,a,n,c)}_&&(n.state="finished",t.wrapperEl.css("will-change",""),t_animateSbs__triggerScrollAnim__calcStyle(t,a,n,1)),!o||"started"!=n.state&&"finished"!=n.state||(n.state="unactive",t.wrapperEl.css("will-change",""),t_animateSbs__triggerScrollAnim__calcStyle(t,a,n,0))}t.steps[1]&&"unactive"===t.steps[1].state&&0===t.steps[1].styles.opacity&&0===t.steps[1].dist&&(a.opacity=0)}function t_animateSbs__generateKeyframes(e){for(var t="",a=0;a<e.els.length;a++){var s=e.els[a];if("time"===s.changeType){var n={timeDuration:0},i=[];t_animateSbs__generateKeyframes__combineObjects(s.steps,i,n),t_animateSbs__generateKeyframes__correctFrames(i),t_animateSbs__generateKeyframes__countPercent(i,n),t_animateSbs__generateKeyframes__correctOpacityOnFirstStep(s,i);var r=t_animateSbs__generateKeyframes__getTxtStyles(i);n.timeDuration/=1e3,t+=t_animateSbs__generateKeyframes__getFinalCss(s,n,r),"yes"===s.loop||"hover"!==s.animType&&"click"!==s.animType||(t+=t_animateSbs__generateKeyframes__getReverseAnim(s))}}return t}function t_animateSbs__generateKeyframes__getReverseAnim(e){var t=e.getAttribute("data-elem-id"),a="";return a+="#"+$(e).parents(".t-rec").attr("id")+" ",a+='[data-elem-id="'+t+'"].t-sbs-anim_started.t-sbs-anim_reversed .tn-atom__sbs-anim-wrapper',a+="{\n-webkit-animation-direction: reverse;\nanimation-direction: reverse;\n}\n\n"}function t_animateSbs__generateKeyframes__getFinalCss(e,t,a,s){var n="",i=$(e).attr("data-elem-id"),r="sbs-anim-"+i,o=$(e).parents(".t-rec").attr("id");if(e.timeDuration=t.timeDuration,void 0!==o&&(n+="#"+o+" ",r="sbs-anim-"+o+"-"+i,!0===t.reverse&&(r+="_reverse")),!0===t.hover)var _='[data-elem-id="'+i+'"].t-sbs-anim_started:hover .tn-atom__sbs-anim-wrapper';else _='[data-elem-id="'+i+'"].t-sbs-anim_started .tn-atom__sbs-anim-wrapper';return n+=_+" {\nanimation: "+r+" "+t.timeDuration+"s","yes"===e.loop&&(n+=" infinite"),n+=" linear","yes"!==e.loop&&(n+=" forwards"),n+=";\nbackface-visibility: hidden;\n}\n\n@keyframes "+r+" {\n"+a+"}\n\n"}function t_animateSbs__generateKeyframes__combineObjects(e,t,a){for(var s=0;s<e.length;s++){var n=e[s],i={};i.styles=n.styles,i.time=1*n.time,s!==e.length-1&&(i.ease=e[s+1].ease),t.push(i),a.timeDuration+=i.time}}function t_animateSbs__generateKeyframes__correctFrames(e){for(var t=0;t<e.length;t++){var a=e[t],s=t===e.length-1,n=0===t;if(!s)var i=e[t+1];if(!n)var r=e[t-1];for(var o in a.styles)n||o in r.styles||t_animateSbs__generateKeyframes__addStyleToKeyframe(a,r,o,0),s||(o in i.styles?"moveX"!==o&&"moveY"!==o&&"rotate"!==o||t_animateSbs__generateKeyframes__recalculateValue(a,i,o):t_animateSbs__generateKeyframes__addStyleToKeyframe(a,i,o,"1"))}}function t_animateSbs__generateKeyframes__addStyleToKeyframe(e,t,a,s){"blur"!==a&&"rotate"!==a&&"moveX"!==a&&"moveY"!==a||(t.styles[a]=0===s?0:e.styles[a]),"opacity"!==a&&"scaleX"!==a&&"scaleY"!==a||(t.styles[a]=0===s?1:e.styles[a])}function t_animateSbs__generateKeyframes__recalculateValue(e,t,a){"rotate"===a&&(t.styles.rotate=1*e.styles.rotate+1*t.styles.rotate),"moveX"===a&&(t.styles.moveX=1*e.styles.moveX+1*t.styles.moveX),"moveY"===a&&(t.styles.moveY=1*e.styles.moveY+1*t.styles.moveY)}function t_animateSbs__generateKeyframes__countPercent(e,t){for(var a=0;a<e.length;a++){var s=e[a];if(0===a)s.percent=Math.round(s.time/t.timeDuration*100);else if(a===e.length-1)s.percent=100;else{var n=e[a-1].percent;s.percent=Math.round(s.time/t.timeDuration*100+n),s.percent==n&&(s.percent+=1),100<s.percent&&(s.percent=99)}}}function t_animateSbs__generateKeyframes__correctOpacityOnFirstStep(e,t){var a=t[1];void 0!==a&&0===a.time&&0===a.styles.opacity&&1200<=$(window).width()&&($(e).find(".tn-atom__sbs-anim-wrapper").css("opacity",0),t[0].styles.opacity=0)}function t_animateSbs__generateKeyframes__getTxtStyles(e){for(var t="",a=0;a<e.length;a++)void 0===e[a].changes&&(e[a].changes=t_animateSbs__generateKeyframes__getFrameChanges(e[a])),t+=e[a].percent+"% {"+e[a].changes+"}\n";return t}function t_animateSbs__generateKeyframes__getFrameChanges(e){var t="",a="",s={x:1,y:1,changed:!1};for(var n in e.styles)"opacity"===n&&(t+="opacity:"+e.styles.opacity+";"),"scaleX"===n&&(s.x=e.styles.scaleX,s.changed=!0),"scaleY"===n&&(s.y=e.styles.scaleY,s.changed=!0),"moveX"===n&&(a+="translateX("+e.styles.moveX+"px)"),"moveY"===n&&(a+="translateY("+e.styles.moveY+"px)"),"rotate"==n&&(a+="rotate("+e.styles.rotate+"deg)");if(!0===s.changed&&(a+="scale("+s.x+","+s.y+")"),""!=a&&(t+="transform:"+a+";"),void 0!==e.ease)switch(t+="animation-timing-function:",e.ease){case"easeIn":t+="ease-in;";break;case"easeOut":t+="ease-out;";break;case"easeInOut":t+="ease-in-out;";break;case"bounceFin":t+="cubic-bezier(0.34,1.61,0.7,1);";break;default:t+="linear;"}return t}function t_animateSbs__generateKeyframes__reverseObj(e){for(var t=[],a=e.length-1;0<=a;a--){var s={percent:100-e[a].percent,changes:e[a].changes};t.push(s)}return t}function t_animateSbs__triggerScrollAnim__changeEl(e,t,a){if(!0===t.fix&&"fixed"!=e.wrapperEl.css("position")){var s=e.triggerOffset-t.prevUnfixedDist;e.wrapperEl.css({top:s+"px",position:"fixed"}),e.zIndexVal&&(e.wrapperEl.css("z-index",e.zIndexVal),$(e).css("z-index","auto"))}!1===t.fix&&"fixed"==e.wrapperEl.css("position")&&(e.wrapperEl.css({position:"",top:"","z-index":""}),e.zIndexVal&&$(e).css("z-index",e.zIndexVal)),null!==t.opacity&&e.wrapperEl.css("opacity",t.opacity);var n="";t.translateX&&(n+="translateX("+t.translateX+"px)"),0===t.translateY&&0===t.fix__shiftY||(n+="translateY("+(t.translateY+t.fix__shiftY)+"px)"),1===t.scaleX&&1===t.scaleY||(n+="scale("+t.scaleX+","+t.scaleY+")"),0!==t.rotate&&(n+="rotate("+t.rotate+"deg)"),e.wrapperEl.css("transform",n),""!==n?e.wrapperEl.css("transform",n):e.wrapperEl.css("transform","scale(1)")}function t_animateSbs__triggerScrollAnim__calcStyle(e,t,a,s){if(!0===a.styles.fix&&"started"==a.state&&(t.fix=!0,t.fix__shiftY=0),!0===a.styles.fix&&"finished"==a.state&&(t.fix=!1,t.fix__shiftY+=1*a.dist),!0===a.styles.fix&&"unactive"==a.state){if(0<a.index&&!0===t.fix)return;t.fix=!1}t.opacity+=s*(a.styles.opacity-t.opacity),t.blur+=s*(a.styles.blur-t.blur),t.translateX+=s*a.styles.moveX,t.translateY+=s*a.styles.moveY,t.scaleX+=s*(a.styles.scaleX-t.scaleX),t.scaleY+=s*(a.styles.scaleY-t.scaleY),t.rotate+=s*a.styles.rotate}function t_animateSbs__cashElsInfo(e){var t=e.els;e.triggerElemsAttrName="edit"===e.mode?"data-field-sbstrgels-value":"data-animate-sbs-trgels";for(var a=0;a<t.length;a++){var s=t[a];s.state="unactive",s.animType="edit"===e.mode?$(s).attr("data-field-sbsevent-value"):$(s).attr("data-animate-sbs-event"),s.changeType="scroll"===s.animType?"scroll":"time",s.trigger="edit"===e.mode?$(s).attr("data-field-sbstrg-value"):$(s).attr("data-animate-sbs-trg"),s.trigger=void 0===s.trigger?1:s.trigger,s.triggerElems=$(s).attr(e.triggerElemsAttrName),s.wrapperEl=$(s).find(".tn-atom__sbs-anim-wrapper"),s.steps=[];var n="edit"===e.mode?$(s).attr("data-field-sbsopts-value"):$(s).attr("data-animate-sbs-opts");if(void 0!==n){-1!=n.indexOf("fixed")&&(s.zIndexVal=window.getComputedStyle(s).getPropertyValue("z-index")),n=n.replace(/'/g,'"');var i=JSON.parse(n);t_animateSbs__addDelayStepsToStepsArr(i),s.loop="edit"===e.mode?$(s).attr("data-field-sbsloop-value"):$(s).attr("data-animate-sbs-loop"),s.loop="loop"===s.loop?"yes":"none",t_animateSbs__cashElsTopOffset(s,e);for(var r=0,o=0;o<i.length;o++){var _={state:"unactive"};_.styles=t_animateSbs__getStylesObj(i[o]),"scroll"==s.changeType?(_.prevUnfixedDist=r,_.dist=i[o].di,!1===_.styles.fix&&(r+=Number(_.dist)),_.start=0==o?s.topOffset:s.steps[o-1].end,_.end=_.start+1*_.dist):(_.time=i[o].ti,_.ease=i[o].ea),s.steps.push(_)}t_animateSbs__updateInfoOnImgLoad(s,e),t_animateSbs__recalcStepsStylesDiff(s.steps)}}}function t_animateSbs__updateInfoOnImgLoad(e,t){$(e).find("img").on("load",function(){t_animateSbs__cashElsTopOffset(e,t),"scroll"==e.changeType&&t_animateSbs__updateStepsStartValues(e)}).each(function(){this.complete&&$(this).load()})}function t_animateSbs__updateStepsStartValues(e){for(var t=0;t<e.steps.length;t++){var a=e.steps[t];a.start=0==t?e.topOffset:e.steps[t-1].end,a.end=a.start+1*a.dist}}function t_animateSbs__cashElsTopOffset(e,t){if(("scroll"==e.animType||"intoview"==e.animType||"blockintoview"==e.animType)&&"publish"===t.mode){var a=1*$(e).css("top").replace("px",""),s=$(e).parents(".r"),n=s.offset().top+1*s.css("padding-top").replace("px","");e.blockTopOffset=n,e.topOffset=n+a,t_animateSbs__getElTrigger(e)}}function t_animateSbs__addDelayStepsToStepsArr(e){for(var t=0;t<e.length;t++){var a=e[t];if(void 0!==a.dd&&""!==a.dd&&0!=a.dd||void 0!==a.dt&&""!==a.dt&&0!=a.dt){var s=0!==t?t_animateSbs__cloneStep(e[t-1]):{mx:"0",my:"0",sx:"1",sy:"1",op:"1",ro:"0",bl:"0",ea:""};void 0!==a.dt?s.ti=a.dt:s.di=a.dd,e.splice(t,0,s),t++}}}function t_animateSbs__cloneStep(e){return{mx:e.mx,my:e.my,sx:e.sx,sy:e.sy,op:e.op,ro:e.ro,bl:e.bl,ea:e.ea}}function t_animateSbs__recalcStepsStylesDiff(e){for(var t=e[0].styles.moveX,a=e[0].styles.moveY,s=e[0].styles.rotate,n=1;n<e.length;n++){var i=e[n].styles;e[n-1].styles;i.moveX=i.moveX-t,t+=i.moveX,i.moveY=i.moveY-a,a+=i.moveY,i.rotate=i.rotate-s,s+=i.rotate}}function t_animateSbs__getStylesObj(e){var t={};return t.moveX=void 0!==e.mx?1*e.mx:0,t.moveY=void 0!==e.my?1*e.my:0,t.scaleX=void 0!==e.sx?1*e.sx:1,t.scaleY=void 0!==e.sy?1*e.sy:1,t.opacity=void 0!==e.op?1*e.op:1,t.rotate=void 0!==e.ro?1*e.ro:0,t.blur=void 0!==e.bl?1*e.bl:0,t.fix=void 0!==e.fi&&"fixed"===e.fi,t}function t_animateSbs__getElTrigger(e){var t=$(window).height();e.triggerOffset=$(e).attr("data-animate-sbs-trgofst"),e.triggerOffset=void 0===e.triggerOffset?0:1*e.triggerOffset,"0.5"==e.trigger&&(e.triggerOffset+=t/2,("intoview"===e.animType||"scroll"===e.animType)&&e.triggerOffset>e.topOffset&&e.triggerOffset<=t/2&&(e.triggerOffset=e.topOffset),"blockintoview"===e.animType&&e.triggerOffset>e.blockTopOffset&&e.triggerOffset<=t/2&&(e.triggerOffset=e.blockTopOffset)),"1"==e.trigger&&(e.triggerOffset+=t,("intoview"===e.animType||"scroll"===e.animType)&&e.triggerOffset>e.topOffset&&e.triggerOffset<=t&&(e.triggerOffset=e.topOffset),"blockintoview"===e.animType&&e.triggerOffset>e.blockTopOffset&&e.triggerOffset<=t&&(e.triggerOffset=e.blockTopOffset))}function t_animateSbs__triggerTimeAnim(e){var t=e.els.filter('[data-animate-sbs-event="intoview"], [data-animate-sbs-event="blockintoview"]');t_animateSbs__checkIntoviewEls(e,t),$(window).bind("scroll",t_throttle(function(){t_animateSbs__checkIntoviewEls(e,t)},200)),t_animateSbs__onActions__initClick(e),t_animateSbs__onActions__initHover(e)}function t_animateSbs__onActions__initClick(e){t_animateSbs__onActions__connectTrgrsWithAnimatedEls(e.els.filter('[data-animate-sbs-event="click"]'),{},"click"),$(".js-sbs-anim-trigger_click").css("cursor","pointer");function t(e){var t=$(this).data("els-to-animate-on-click");$(t[0]).hasClass("t-sbs-anim_started")&&!$(t[0]).hasClass("t-sbs-anim_reversed")?t_animateSbs__onActions__end(t):t_animateSbs__onActions__start(t)}$(".js-sbs-anim-trigger_click").off("click",t),$(".js-sbs-anim-trigger_click").on("click",t)}function t_animateSbs__onActions__initHover(e){t_animateSbs__onActions__connectTrgrsWithAnimatedEls(e.els.filter('[data-animate-sbs-event="hover"]'),{},"hover");function t(){t_animateSbs__onActions__start($(this).data("els-to-animate-on-hover"))}function a(){t_animateSbs__onActions__end($(this).data("els-to-animate-on-hover"))}$(".js-sbs-anim-trigger_hover").off("mouseenter",t).off("mouseleave",a).on("mouseenter",t).on("mouseleave",a)}function t_animateSbs__onActions__connectTrgrsWithAnimatedEls(e,r,o){e.each(function(){var n=this,e=n.triggerElems;if(e){var t=e?e.split(","):[],i=$(n).parents(".t396__artboard").attr("data-artboard-recid");t.forEach(function(e){var t=i+e,a=$(".tn-elem__"+i+e);if(0!==a.length)if(r[t]&&r[t].data("els-to-animate-on-"+o)){var s=r[t].data("els-to-animate-on-"+o).add(n);r[t].data("els-to-animate-on-"+o,s)}else r[t]=a,r[t].addClass("js-sbs-anim-trigger_"+o).data("els-to-animate-on-"+o,$(n))})}else{$(n).find(".tn-atom__sbs-anim-wrapper").data("els-to-animate-on-"+o,$(n)).addClass("js-sbs-anim-trigger_"+o)}})}function t_animateSbs__onActions__start(e){e.each(function(){var e=$(this);e.hasClass("t-sbs-anim_playing")?e.data("planned-dir","play"):t_animateSbs__onActions__play(e)})}function t_animateSbs__onActions__end(e){e.each(function(){var t=$(this);if("loop"===t.attr("data-animate-sbs-loop"))t.on("animationiteration",function e(){t.removeClass("t-sbs-anim_started t-sbs-anim_playing"),t.off("animationiteration",e)});else{if(t.hasClass("t-sbs-anim_playing"))return void t.data("planned-dir","reverse");t_animateSbs__onActions__playReverse(t)}})}function t_animateSbs__onActions__onAnimationEnd(e){function t(){e.removeClass("t-sbs-anim_playing"),e.off("animationend",e.data("callback-dep-anim")),e.data("planned-dir")&&"play"===e.data("planned-dir")&&e.hasClass("t-sbs-anim_reversed")?t_animateSbs__onActions__play(e):e.data("planned-dir")&&"reverse"===e.data("planned-dir")&&!e.hasClass("t-sbs-anim_reversed")&&t_animateSbs__onActions__playReverse(e),e.data("planned-dir","")}e.off("animationend",t),e.on("animationend",t),e.data("callback-dep-anim",t)}function t_animateSbs__onActions__play(e){e.removeClass("t-sbs-anim_started t-sbs-anim_reversed"),t_animateSbs__forceRepaint(e[0]),e.addClass("t-sbs-anim_started t-sbs-anim_playing"),t_animateSbs__onActions__onAnimationEnd(e)}function t_animateSbs__onActions__playReverse(e){e.removeClass("t-sbs-anim_started"),t_animateSbs__forceRepaint(e[0]),e.addClass("t-sbs-anim_started t-sbs-anim_reversed t-sbs-anim_playing"),t_animateSbs__onActions__onAnimationEnd(e)}function t_animateSbs__forceRepaint(e){e.offsetWidth}function t_animateSbs__checkIntoviewEls(e,t){if(0!==t.length){e.scrollTop=window.pageYOffset;for(var a=0;a<t.length;a++){var s=t[a],n=e.scrollTop+s.triggerOffset;if("blockintoview"===s.animType)var i=n>=s.blockTopOffset;else i=n>=s.topOffset;i&&!1===$(s).hasClass("t-sbs-anim_started")&&($(s).addClass("t-sbs-anim_started"),t.splice(a,1),a--)}}}function t_animateSbs__reset(e){for(var t=e.els,a=0;a<t.length;a++){var s=t[a].animType;if("intoview"===s||"blockintoview"===s||"click"===s||"hover"===s)$(t[a]).removeClass("t-sbs-anim_started"),$(t[a]).find(".tn-atom__sbs-anim-wrapper").css("opacity","");else{t[a].state="reseted";var n=t[a].wrapperEl;$(n).css({transform:"",position:"",top:"",opacity:""})}}}function t_animateParallax__checkOldIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE"),a="",s=!1;return 0<t&&(8!=(a=parseInt(e.substring(t+5,e.indexOf(".",t))))&&9!=a||(s=!0)),s}$(document).ready(function(){1==window.isSearchBot||t_animateParallax__checkOldIE()||window.isMobile&&$(window).width()<1200||"edit"==$(".t-records").attr("data-tilda-mode")||(t_animateSbs__wrapAtomEls(),setTimeout(function(){t_animateSbs__init()},50))});