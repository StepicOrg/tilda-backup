window.Tilda=window.Tilda||{},function(){function e(){var e=navigator.userAgent.toLowerCase(),e=-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1]);8!==e&&9!==e||(i=document.querySelectorAll(".t-btn"),Array.prototype.forEach.call(i,function(e){var t=e.getAttribute("href");e.querySelector("table")&&t&&-1===t.indexOf("#popup:")&&-1===t.indexOf("#price:")&&e.addEventListener("click",function(e){var t=e.target.getAttribute("href");e.preventDefault(),window.location.href=t})}));try{var t=document.getElementById("allrecords"),r=t?t.getAttribute("data-tilda-cookie"):null;t&&"no"===r||Tilda.saveUTM()}catch(e){}var i=document.querySelectorAll(".r");function a(e){if(e.target.closest("a.js-click-stat")||e.target.closest(".js-click-zero-stat")){var t=e.target.closest("a.js-click-stat")||e.target.closest(".js-click-zero-stat"),r=t.getAttribute("data-tilda-event-name"),i=t.textContent,d=t.getAttribute("href")||"",c=t.getAttribute("target");if(r||(r="/tilda/click/"+((t=t.closest(".r"))?t.getAttribute("id"):"")+"/?url="+d),Tilda.sendEventToStatistics(r,i),"http"===d.substring(0,4))return window.setTimeout(function(){var e,t="",r="";if("_blank"===c){if(-1!==d.indexOf("?")&&(d=(t=d.split("?"))[0],-1!==(t=t[1]).indexOf("#")&&(t=t.split("#"),d=d+"#"+t[1],t=t[0]),t=t.split("&")),document.getElementById("tildaredirectform")?(document.getElementById("tildaredirectform").setAttribute("method","GET"),document.getElementById("tildaredirectform").setAttribute("action",d)):document.body.insertAdjacentHTML("beforeend",'<form id="tildaredirectform" target="_blank" method="GET" action="'+d+'" style="display:none;"></form>'),r="",0<t.length)for(var i in t)(e=t[i].split("="))&&0<e.length&&(r+='<input type="hidden" name="'+e[0]+'" value="'+(e[1]||"")+'">');var a=document.getElementById("tildaredirectform");a&&(a.innerHTML=r,a.submit())}else window.location.href=d},300),e.preventDefault(),!1}}Array.prototype.forEach.call(i,function(e){e.removeEventListener("click",a),e.addEventListener("click",a)});i=document.querySelectorAll("input.js-amount");Array.prototype.forEach.call(i,function(e){var t=(t=e.value).replace(/,/g,".");t=parseFloat(t.replace(/[^0-9\.]/g,"")),e.value=t})}Tilda.sendEcommerceEvent=function(e,t){if(void 0===t||0===t.length)return!1;if(void 0===e||"add"!==e&&"remove"!==e&&"purchase"!==e&&"detail"!==e)return!1;for(var r,i,a,d="",c=0,o=[],n="",m="",l="",u=0;u<t.length;u++){""<d&&(d+=", "),d+=(a=t[u]).name,c+=a.price,i="",void 0!==a.options&&0<a.options.length&&Array.prototype.forEach.call(a.options,function(e){i+=e.option+": "+e.variant+"; "});var p={name:a.name,price:a.price,variant:i,quantity:1};a.id&&0<a.id&&(id=a.id,p.id=a.id),a.uid&&0<a.uid&&(m=a.uid,p.uid=a.uid),a.recid&&0<a.recid&&(n=a.recid,p.recid=a.recid),a.lid&&0<a.lid&&(l=a.lid,p.lid=a.lid),a.sku&&0<a.sku&&(p.sku=a.sku),o[o.length]=p}"add"!==e&&"remove"!==e||(r="/tilda/cart/"+e+"/",0<n&&(r+=""+n),0<m?r+="-u"+m:0<l&&(r+="-"+l)),"detail"===e&&(r="/tilda/product/detail/",0<m?r+=m+"/":(0<n&&(r+="r"+n),0<l&&(r+="-l"+l))),"purchase"===e&&(r="/tilda/rec"+n+"/payment/"),(p={ecommerce:{}}).ecommerce[e]={products:o},Tilda.sendEventToStatistics(r,d,p,c)},Tilda.sendEventToStatistics=function(e,t,r,i){var a,d="/"===e.substring(0,1),c=[],o=(v=document.getElementById("allrecords"))?v.getAttribute("data-fb-event"):null,n=!(!o||"nosend"!==o),m=v?v.getAttribute("data-vk-event"):null,o=!(!m||"nosend"!==m),l="",m=document.querySelector(".t706"),l=v.getAttribute("data-tilda-currency")?v.getAttribute("data-tilda-currency"):m&&m.getAttribute("data-project-currency-code")?m.getAttribute("data-project-currency-code"):"RUB";if(r=r||window.location.href,0<(i=i?parseFloat(i):0))if(window.dataLayer||(window.dataLayer=[]),-1!==e.indexOf("/tilda/")&&-1!==e.indexOf("/payment/")&&window.tildaForm&&""<window.tildaForm.orderIdForStat)r={ecommerce:{purchase:{actionField:{id:window.tildaForm.orderIdForStat,revenue:window.tildaForm.amountForStat},products:window.tildaForm.arProductsForStat}}},window.tildaForm.tildapayment&&window.tildaForm.tildapayment.promocode&&(r.ecommerce.purchase.actionField.coupon=window.tildaForm.tildapayment.promocode),r.event="purchase";else if(r&&r.ecommerce&&(r.ecommerce.add&&r.ecommerce.add.products?c=r.ecommerce.add.products:r.ecommerce.remove&&r.ecommerce.remove.products?c=r.ecommerce.remove.products:r.ecommerce.detail&&r.ecommerce.detail.products&&(c=r.ecommerce.detail.products),c&&0<c.length)){for(var u=0;u<c.length;u++)c[u].id||(c[u].sku?c[u].id=c[u].sku:c[u].uid?c[u].id=c[u].uid:c[u].recid&&c[u].lid&&(c[u].id=c[u].recid+"_"+c[u].lid));r.ecommerce.add&&r.ecommerce.add.products?(r.ecommerce.add.products=c,r.event="addToCart"):r.ecommerce.remove&&r.ecommerce.remove.products?(r.ecommerce.remove.products=c,r.event="removeFromCart"):r.ecommerce.detail&&r.ecommerce.detail.products?(r.ecommerce.detail.products=c,r.event="viewProduct"):(d?(r.event="pageView",r.eventAction=e):r.event=e,r.title=t,r.value=i)}void 0!==window.dataLayer&&(d?0<i?r&&r.ecommerce?window.dataLayer.push(r):window.dataLayer.push({event:"pageView",eventAction:e,title:t,value:i,product:r}):window.dataLayer.push({event:"pageView",eventAction:e,title:t,referer:r}):r&&r.ecommerce?window.dataLayer.push(r):window.dataLayer.push({event:e,eventAction:t,value:i,referer:r}));try{window.gtagTrackerID&&"gtag"===window.mainTracker&&(d?r&&r.event?"purchase"===r.event?gtag("event","purchase",{transaction_id:r.ecommerce.purchase.actionField.id,value:parseFloat(i).toFixed(2),currency:l,items:r.ecommerce.purchase.products}):"addToCart"===r.event&&r.ecommerce.add?gtag("event","add_to_cart",{items:r.ecommerce.add.products}):"removeFromCart"===r.event&&r.ecommerce.remove?gtag("event","remove_from_cart",{items:r.ecommerce.remove.products}):"viewProduct"===r.event&&r.ecommerce.detail&&gtag("event","view_item",{items:r.ecommerce.detail.products}):gtag("config",window.gtagTrackerID,{page_title:t,page_path:e}):gtag("event",e,{event_category:"tilda",event_label:t,value:i}))}catch(e){}if(window.ga&&"tilda"!==window.mainTracker&&"gtag"!==window.mainTracker)if(d)if(r&&r.event){try{if(window.Tilda.isLoadGAEcommerce||(window.Tilda.isLoadGAEcommerce=!0,ga("require","ec")),ga("set","currencyCode",l),"purchase"===r.event){for(var p=r.ecommerce.purchase.products.length,s=0;s<p;s++)g=r.ecommerce.purchase.products[s],ga("ec:addProduct",{id:g.id||s,name:g.name,price:parseFloat(g.price).toFixed(2),quantity:g.quantity});ga("ec:setAction","purchase",{id:r.ecommerce.purchase.actionField.id,revenue:parseFloat(i).toFixed(2)})}else if("addToCart"===r.event&&r.ecommerce.add){for(p=r.ecommerce.add.products.length,s=0;s<p;s++)g=r.ecommerce.add.products[s],ga("ec:addProduct",{id:g.id||s,name:g.name,price:parseFloat(g.price).toFixed(2),quantity:g.quantity});ga("ec:setAction","add")}else if("removeFromCart"===r.event&&r.ecommerce.remove){for(p=r.ecommerce.remove.products.length,s=0;s<p;s++)g=r.ecommerce.remove.products[s],ga("ec:addProduct",{id:g.id||s,name:g.name,price:parseFloat(g.price).toFixed(2),quantity:g.quantity});ga("ec:setAction","remove")}else if("viewProduct"===r.event&&r.ecommerce.detail){for(p=r.ecommerce.detail.products.length,s=0;s<p;s++)g=r.ecommerce.detail.products[s],ga("ec:addProduct",{id:g.id||s,name:g.name,price:parseFloat(g.price).toFixed(2),quantity:g.quantity});ga("ec:setAction","detail")}}catch(e){}ga("send",{hitType:"pageview",page:e,title:t,params:r})}else ga("send",{hitType:"pageview",page:e,title:t});else ga("send",{hitType:"event",eventCategory:"tilda",eventAction:e,eventLabel:t,eventValue:i});if(window.mainMetrikaId&&0<window.mainMetrikaId&&"function"==typeof ym&&(d?(a={title:t},0<i&&(a.params={order_price:i},l&&(a.params.currency=l)),ym(window.mainMetrikaId,"hit",e,a)):0<i?(a={order_price:i},l&&(a.currency=l),ym(window.mainMetrikaId,"reachGoal",e,a)):ym(window.mainMetrikaId,"reachGoal",e)),""<window.mainMetrika&&window[window.mainMetrika]&&(d?0<i?window[window.mainMetrika].hit(e,{title:t,order_price:i,params:r}):window[window.mainMetrika].hit(e,{title:t}):0<i?window[window.mainMetrika].reachGoal(e,{title:t,params:r,order_price:i}):window[window.mainMetrika].reachGoal(e,{title:t,referer:r})),void 0!==window.fbq&&!1==n)try{if(d)if(-1===e.indexOf("tilda/")||-1===e.indexOf("/payment/")&&-1===e.indexOf("/submitted/"))if(r&&r.event&&0<i)if("addToCart"===r.event&&r.ecommerce.add){for(var p=r.ecommerce.add.products.length,w=[],s=0;s<p;s++)g=r.ecommerce.add.products[s],w.push(g.id||g.uid||g.name);window.fbq("track","AddToCart",{content_ids:w,content_type:"product",value:i,currency:l})}else if("viewProduct"===r.event&&r.ecommerce.detail){for(p=r.ecommerce.detail.products.length,w=[],s=0;s<p;s++)g=r.ecommerce.detail.products[s],w.push(g.id||g.uid||g.name);window.fbq("track","ViewContent",{content_ids:w,content_type:"product",value:i,currency:l})}else e.indexOf("tilda/popup"),window.fbq("track","ViewContent",{content_name:t,content_category:e});else e.indexOf("tilda/popup"),window.fbq("track","ViewContent",{content_name:t,content_category:e});else 0<i&&l?window.fbq("track","InitiateCheckout",{content_name:t,content_category:e,value:i,currency:l}):window.fbq("track","Lead",{content_name:t,content_category:e});else window.fbq("track",e,{content_name:t,value:i})}catch(e){}if(void 0!==window.VK&&void 0!==window.VK.Retargeting&&!1==o)try{if(d){var v,g,f=(v=document.getElementById("allrecords"))?v.getAttribute("data-vk-price-list-id"):null,y=f&&parseInt(f)||0,f="",h=!1;if(r&&r.event)if(h={products:[],currency_code:"",total_price:0},"purchase"===r.event&&r.ecommerce.purchase)if(0<i&&0<y){h.currency_code=l;for(p=r.ecommerce.purchase.products.length,w=[],s=0;s<p;s++)g=r.ecommerce.purchase.products[s],h.products.push({id:g.id||g.uid||g.name,price:g.price||0}),h.total_price=i;f="init_checkout"}else f="t-purchase";else if("addToCart"===r.event&&r.ecommerce.add)if(0<i&&0<y){h.currency_code=l;for(p=r.ecommerce.add.products.length,w=[],s=0;s<p;s++)g=r.ecommerce.add.products[s],h.products.push({id:g.id||g.uid||g.name,price:g.price||0}),h.total_price=i;f="add_to_cart"}else f="t-add-to-cart",r.ecommerce.add[0]&&r.ecommerce.add[0].uid&&(f+="-"+r.ecommerce.add[0].uid);else if("viewProduct"===r.event&&r.ecommerce.detail)if(0<i&&0<y){h.currency_code=l;for(p=r.ecommerce.detail.products.length,w=[],s=0;s<p;s++)g=r.ecommerce.detail.products[s],h.products.push({id:g.id||g.uid||g.name,price:g.price||0}),h.total_price=i;f="view_product"}else f="t-view-product",r.ecommerce.detail[0]&&r.ecommerce.detail[0].uid&&(f+="-"+r.ecommerce.detail[0].uid);else if("removeFromCart"===r.event&&r.ecommerce.remmove)if(0<i&&0<y){h.currency_code=l;for(p=r.ecommerce.remove.products.length,w=[],s=0;s<p;s++)g=r.ecommerce.remove.products[s],h.products.push({id:g.id||g.uid||g.name,price:g.price||0}),h.total_price=i;f="remove_from_cart"}else f="t-remove-product",r.ecommerce.remove[0]&&r.ecommerce.remove[0].uid&&(f+="-"+r.ecommerce.remove[0].uid);else f=r.event;else f=-1!==e.indexOf("tilda/")&&-1!==e.indexOf("/payment/")?"t-purchase-"+e.replace("/tilda/","").replace("tilda/","").replace("/payment/",""):-1!==e.indexOf("tilda/")&&-1!==e.indexOf("/submitted/")?"t-lead-"+e.replace("/tilda/","").replace("tilda/","").replace("/submitted/",""):-1!==e.indexOf("tilda/popup")||-1!==e.indexOf("tilda/click")?"t-"+e.replace("/tilda/","").replace("/","-"):"t-"+e.replace("/","-");0<y&&h&&h.currency_code?(VK.Retargeting.Event("purchase"),VK.Retargeting.ProductEvent(y,f,h)):(VK.Retargeting.Event(f),"t-purchase"===f.substring(0,10)?VK.Goal("purchase"):"t-lead"===f.substring(0,6)&&VK.Goal("lead"))}else VK.Retargeting.Event(e)}catch(e){}"0"<window.mainMailruId&&(o=window._tmr||(window._tmr=[]),d?0<i?o.push({id:""+window.mainMailruId,type:"pageView",url:e,value:i,start:(new Date).getTime()}):o.push({id:""+window.mainMailruId,type:"pageView",url:e,start:(new Date).getTime()}):0<i?o.push({id:""+window.mainMailruId,type:"reachGoal",goal:e,value:i}):o.push({id:""+window.mainMailruId,type:"reachGoal",goal:e})),"function"==typeof window.tildastat&&(d?(0<e.indexOf("payment")&&-1<e.indexOf("tilda/form")&&(e=e.replace("tilda/form","tilda/rec")),window.tildastat("pageview",{page:e})):window.tildastat("pageview",{page:"/tilda/event/"+e}))},Tilda.saveUTM=function(){try{var e=window.location.href,t="",r="";if(-1!==e.toLowerCase().indexOf("utm_")&&"string"==typeof(t=(t=(e=e.toLowerCase()).split("?"))[1])){var i,a=t.split("&");for(i in a)"utm_"===a[i].split("=")[0].substring(0,4)&&(r=r+a[i]+"|||");0<r.length&&((t=new Date).setDate(t.getDate()+30),document.cookie="TILDAUTM="+encodeURIComponent(r)+"; path=/; expires="+t.toUTCString())}}catch(e){}},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}();
