function t_menusub_init(u){$("#rec"+u+" .t-menusub").each(function(){var t,e,n=$(this).attr("data-submenu-hook");void 0!==n&&""!=n&&(t="",e=!1,$("#rec"+u+" a.t-menu__link-item").each(function(){$(this).attr("data-menu-submenu-hook")&&(e=!0)}),(t=e?$('a[data-menu-submenu-hook="'+n+'"]'):$('a[href="'+n+'"]')).addClass("t-menusub__target-link"),t.attr("data-tooltip-menu-id",u),t_menusub_add_arrow(u,t,n),t_menusub_set_up_menu(u,t,n),t_menusub_highlight(),t_menusub_checkAnchorLinks(u))}),window.isMobile?$(window).bind("orientationchange",function(){$("#rec"+u+" .t-menusub").each(function(){t_menusub_hide_submenu($(this).find(".t-menusub__menu"))})}):$(window).bind("resize",t_throttle(function(){$("#rec"+u+" .t-menusub").each(function(){t_menusub_hide_submenu($(this).find(".t-menusub__menu"))})}))}function t_menusub_set_up_menu(t,e,n){var u=$("#rec"+t+' .t-menusub[data-submenu-hook="'+n+'"] .t-menusub__menu'),s=u.find(".t-menusub__content");(window.isMobile?t_menusub_set_up_menu_mobile:t_menusub_set_up_menu_desktop)(t,e,u),$(window).bind("scroll",t_throttle(function(){s.hover(function(){},function(){window.isMobile||u.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(u)})}))}function t_menusub_open_inME401(t){t.find(".t280__menu__wrapper").hasClass("t280__menu_static")||(t.find(".t280__menu").css("transition","none"),t.find(".t280__bottom").css("transition","none"),t.find(".t280__menu__wrapper").addClass("t280__menu_static"))}function t_menusub_close_inME401(t){t.find(".t280__menu__wrapper").hasClass("t280__menu_static")&&t.find(".t280__menu__wrapper").removeClass("t280__menu_static")}function t_menusub_set_up_menu_mobile(u,t,s){var _=$("#rec"+u+" .t-menusub").attr("data-submenu-margin");t.on("click",function(t){var e,n;980<$(window).width()&&$("#rec"+u+" .t-menusub__menu").each(function(){t_menusub_hide_submenu($(this))}),s.hasClass("t-menusub__menu_show")?t_menusub_hide_submenu(s):(t_menusub_show($(this),s,_),n=t_menusub_is_mobile_ME401(e=$(this).parents(".t280")),t_menusub_is_static_ME401(e),"n"==e.find(".t280__menu__wrapper").attr("data-submenu-static")&&0<e.length&&n&&t_menusub_open_inME401(e)),t.preventDefault()}),$(document).click(function(t){var e=$(t.target).hasClass("t-menusub__menu")||0<$(t.target).parents(".t-menusub__menu").length,n=$(t.target).hasClass("t-menusub__target-link")||0<$(t.target).parents(".t-menusub__target-link").length;$(t.target).is(".t794__tm-link")||$(t.target).is(".t966__tm-link")||(!n||($(t.target).hasClass("t-menusub__target-link")?$(t.target):$(t.target).parents(".t-menusub__target-link")).attr("data-tooltip-menu-id")!=u&&s.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(s),e||n||!s.hasClass("t-menusub__menu_show")||t_menusub_hide_submenu(s))})}function t_menusub_set_up_menu_desktop(t,e,n){var u,s=$("#rec"+t+" .t-menusub").attr("data-submenu-margin");e.add(n).on("mouseover",function(){$(this).hasClass("t-menusub__menu")&&!$(this).hasClass("t-menusub__menu_show")||(clearTimeout(u),$(this).hasClass("t-menusub__menu")&&n.hasClass("t-menusub__menu_show")||t_menusub_show($(this),n,s))}),e.add(n).on("mouseout",function(){u=setTimeout(function(){t_menusub_hide_submenu(n)},300)}),e.on("click auxclick",function(t){t.preventDefault()})}function t_menusub_show(t,e,n){var u=e.outerHeight(),s=e.outerWidth(),_=t.height(),i=t.outerWidth(),a=parseInt(t.css("margin-left")),o=$(window).height(),m=$(window).width(),r=$(window).scrollTop(),h=t.position().left;void 0!==n&&""!=n&&(n=+n.replace("px",""),n+=10);var l=t.position().top+_+n,h=h;r+o<l+u?(l=Math.max(l-u-_-2*n,r),e.removeClass("t-menusub__menu_bottom").addClass("t-menusub__menu_top")):e.removeClass("t-menusub__menu_top").addClass("t-menusub__menu_bottom"),$(window).width()<=980&&(l=0),h+s/2<m?(h=h+(i-s)/2+a)<0&&(h=10):h=m-s-10,e.css({display:"block",left:h,top:l}),e.offsetHeight,e.addClass("t-menusub__menu_show"),t.addClass("t-menusub__target-link_active")}function t_menusub_hide_submenu(t){var e=t.parents(".t280"),n=t_menusub_is_mobile_ME401(e);t.css({display:"",left:"",top:""}),t.removeClass("t-menusub__menu_show"),$(".t-menusub__target-link_active").removeClass("t-menusub__target-link_active"),"n"==e.find(".t280__menu__wrapper").attr("data-submenu-static")&&window.isMobile&&n&&0==e.find(".t280__menu .t-menusub__menu_show").length&&t_menusub_close_inME401(e)}function t_menusub_add_arrow(t,e,n){n=$("#rec"+t+' .t-menusub[data-submenu-hook="'+n+'"]').attr("data-add-submenu-arrow");void 0!==n&&""!=n&&e.each(function(){$(this).append('<div class="t-menusub__arrow"></div>')})}function t_menusub_highlight(){var t=window.location.href,e=window.location.pathname;"/"==t.substr(t.length-1)&&(t=t.slice(0,-1)),"/"==e.substr(e.length-1)&&(e=e.slice(0,-1)),"/"==e.charAt(0)&&(e=e.slice(1)),""==e&&(e="/"),$('.t-menusub__list-item a[href="'+t+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+t+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'/"]').addClass("t-active")}function t_menusub_is_static_ME401(t){t.find(".t280__menu__wrapper").hasClass("t280__menu_static")||t.find(".t280__menu__wrapper").attr("data-submenu-static","n")}function t_menusub_is_mobile_ME401(t){var e=t.find(".t280__menu").height(),n=t.find(".t280__bottom").height(),t=t.find(".t280__container").height();return $(window).height()-n-t-40<e}function t_menusub_checkAnchorLinks(t){960<=$(window).width()&&(0<(t=$("#rec"+t).find('a:not(.tooltipstered)[href*="#"].t-menusub__link-item')).length&&t_menusub_catchScroll(t))}function t_menusub_catchScroll(e){var n,u,s=null,_=[],i=[];(e=$(e.get().reverse())).each(function(){var t=t_menusub_getSectionByHref($(this));void 0!==t&&(void 0!==t.attr("id")&&_.push(t),i[t.attr("id")]=$(this))}),t_menusub_highlightNavLinks(e,_,i,s),$(window).bind("resize",t_throttle(function(){t_menusub_updateSectionsOffsets(_)})),setTimeout(function(){t_menusub_updateSectionsOffsets(_),t_menusub_highlightNavLinks(e,_,i,s)},1e3),e.click(function(){var t;$(this).hasClass("tooltipstered")||(e.removeClass("t-active"),null!=(t=t_menusub_getSectionByHref($(this)))&&(t=t.attr("id"),i[t].addClass("t-active"),s=t))}),$(window).on("scroll",function(){var t=(new Date).getTime();n&&t<n+100?(clearTimeout(u),u=setTimeout(function(){n=t,s=t_menusub_highlightNavLinks(e,_,i,s)},100-(t-n))):(n=t,s=t_menusub_highlightNavLinks(e,_,i,s))})}function t_menusub_getSectionByHref(t){var e=t.attr("href").replace(/\s+/g,"").substring(1),t=$('.r[id="'+e+'"]'),e=$('.r[data-record-type="215"]').has('a[name="'+e+'"]');return 1===t.length?t:1===e.length?e:void 0}function t_menusub_highlightNavLinks(u,s,_,i){var a=$(window).scrollTop(),o=i;return 0!=s.length&&null==i&&s[s.length-1].attr("data-offset-top")>a+300?(u.removeClass("t-active"),null):($(s).each(function(){var t=$(this),e=t.attr("data-offset-top"),n=t.attr("id"),t=_[n];if(e<=a+300||s[0].attr("id")==n&&a>=$(document).height()-$(window).height())return null!=i||t.hasClass("t-active")?null!=i&&n==i&&(o=null):(u.removeClass("t-active"),t.addClass("t-active"),o=null),!1}),o)}function t_menusub_updateSectionsOffsets(t){$(t).each(function(){var t=$(this);t.attr("data-offset-top",t.offset().top)})}
