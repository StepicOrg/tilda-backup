function t_menusub_init(s){$("#rec"+s+" .t-menusub").each(function(){var t=$(this).attr("data-submenu-hook");if(void 0!==t&&""!=t){var e=$('a[href="'+t+'"]');e.addClass("t-menusub__target-link"),e.attr("data-tooltip-menu-id",s),t_menusub_add_arrow(s,e,t),t_menusub_set_up_menu(s,e,t),t_menusub_highlight()}})}function t_menusub_set_up_menu(t,e,s){console.log("Setup");var u=$("#rec"+t+' .t-menusub[data-submenu-hook="'+s+'"] .t-menusub__menu');isMobile?t_menusub_set_up_menu_mobile(t,e,u):t_menusub_set_up_menu_desktop(t,e,u,s),$(window).bind("scroll",t_throttle(function(){isMobile||u.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(u)},300))}function t_menusub_set_up_menu_mobile(u,t,n){var e=$("#rec"+u+" .t-menusub").attr("data-submenu-margin");console.log(t),t.on("click",function(t){(console.log($(this)),n.hasClass("t-menusub__menu_show"))?t_menusub_hide_submenu(n):t_menusub_show($(this),n,e);t.preventDefault()}),$(document).click(function(t){var e=$(t.target).hasClass("t-menusub__menu")||0<$(t.target).parents(".t-menusub__menu").length,s=$(t.target).hasClass("t-menusub__target-link")||0<$(t.target).parents(".t-menusub__target-link").length;s&&($(t.target).hasClass("t-menusub__target-link")?$(t.target):$(t.target).parents(".t-menusub__target-link")).attr("data-tooltip-menu-id")!=u&&n.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(n);e||s||!n.hasClass("t-menusub__menu_show")||t_menusub_hide_submenu(n)})}function t_menusub_set_up_menu_desktop(t,e,s,u){var n,_=$("#rec"+t+" .t-menusub").attr("data-submenu-margin");e.add(s).on("mouseover",function(){$(this).hasClass("t-menusub__menu")&&!$(this).hasClass("t-menusub__menu_show")||(clearTimeout(n),$(this).hasClass("t-menusub__menu")&&s.hasClass("t-menusub__menu_show")||t_menusub_show($(this),s,_))}),e.add(s).on("mouseout",function(){n=setTimeout(function(){t_menusub_hide_submenu(s)},300)}),e.on("click",function(t){t.preventDefault()})}function t_menusub_show(t,e,s){var u=e.outerHeight(),n=e.outerWidth(),_=t.height(),a=t.width(),i=$(window).height(),m=$(window).width(),o=$(window).scrollTop(),l=t.position().left;void 0!==s&&""!=s&&(s=1*s.replace("px",""),s+=10);var b=t.position().top+_+s,h=l;o+i<b+u?(b=Math.max(b-u-_-2*s,o),e.removeClass("t-menusub__menu_bottom").addClass("t-menusub__menu_top")):e.removeClass("t-menusub__menu_top").addClass("t-menusub__menu_bottom"),isMobile&&(b=0),h+n/2<m?(h+=(a-n)/2)<0&&(h=10):h=m-n-10,e.css({display:"block",left:h,top:b}),e.offsetHeight,e.addClass("t-menusub__menu_show"),t.addClass("t-menusub__target-link_active")}function t_menusub_hide_submenu(t){t.css({display:"",left:"",top:""}),t.removeClass("t-menusub__menu_show"),$(".t-menusub__target-link_active").removeClass("t-menusub__target-link_active")}function t_menusub_add_arrow(t,e,s){var u=$("#rec"+t+' .t-menusub[data-submenu-hook="'+s+'"]').attr("data-add-submenu-arrow");void 0!==u&&""!=u&&e.each(function(){var t=$(this).height();$(this).append('<div class="t-menusub__arrow" style="height: '+t+'px;"></div>')})}function t_menusub_highlight(){var t=window.location.href,e=window.location.pathname;"/"==t.substr(t.length-1)&&(t=t.slice(0,-1)),"/"==e.substr(e.length-1)&&(e=e.slice(0,-1)),"/"==e.charAt(0)&&(e=e.slice(1)),""==e&&(e="/"),$('.t-menusub__list-item a[href="'+t+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+t+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'/"]').addClass("t-active")}
