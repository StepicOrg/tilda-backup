function t_prod__init(e){var t=document.querySelector("#rec"+e);if(t){var r=t.querySelectorAll(".js-product");Array.prototype.forEach.call(r,(function(e){e.querySelector(".js-product-option")&&t_prod__initProduct(e)}))}}function t_prod__initProduct(e,t){t_prod__initPrice(e),t_prod__addEvents__options(e),t_prod__updatePrice(e,t)}function t_prod__initPrice(e){if(e instanceof Element||(e=e[0]),e){var t=e.querySelector(".js-product-price");t||(e.insertAdjacentHTML("beforeend",'<div style="display:none;" class="js-product-price"></div>'),t=e.querySelector(".js-product-price"));var r=t.textContent,o=t.getAttribute("data-product-price-def"),c=t.getAttribute("data-product-price-def-str");if(r){if(!o&&!c){var n=t_prod__cleanPrice(r);t.setAttribute("data-product-price-def",n),t.setAttribute("data-product-price-def-str",r.replace(/"/g,""))}}else t.setAttribute("data-product-price-def",0)}}function t_prod__updatePrice(e,t){if(e instanceof Element||(e=e[0]),e){var r=e.querySelector(".js-product-price:not(.js-store-prod-price-range-val)"),o=e.querySelectorAll(".js-product-option-variants"),c=0,n=0;if(r){var i=r.getAttribute("data-product-price-def");i*=1,Array.prototype.forEach.call(o,(function(e){if(e){var t=e.querySelector("option:checked").getAttribute("data-product-variant-price");if(t){var r=t_prod__cleanPrice(t);-1!==t.indexOf("+")?n+=r:0!==parseFloat(r)&&(i=r)}}})),c=i+n,r.innerHTML=c>0?t_prod__showPrice(t_prod__roundPrice(c),t):r.getAttribute("data-product-price-def-str")}}}function t_prod__addEvents__options(e){if(e instanceof Element||(e=e[0]),e){var t=e.querySelectorAll(".js-product-option-variants");Array.prototype.forEach.call(t,(function(e){var t=e.closest(".js-product");e.addEventListener("change",(function(){t_prod__updatePrice(t),t_prod__triggerEvent(document.body,"twishlist_addbtn")}))}))}}function t_prod__cleanPrice(e){return e?(e=(e=e.toString()).replace(",",".").replace(/[^0-9.]/g,""),e=parseFloat(e).toFixed(2),isNaN(e)&&(e=0),e=parseFloat(e),(e*=1)<0&&(e=0)):e=0,e}function t_prod__roundPrice(e){return e?(e=parseFloat(e).toFixed(2),e=parseFloat(e),(e*=1)<0&&(e=0)):e=0,e}function t_prod__showPrice(e,t){if(e){var r;if(e=e.toString(),window.tcart&&window.tcart.currency_dec&&"00"===window.tcart.currency_dec||t&&t.currencyDecimal&&"00"===t.currencyDecimal)if(-1===e.indexOf(".")&&-1===e.indexOf(","))e+=".00";else 1===e.substr(e.indexOf(".")+1).length&&(e+="0");e=e.replace(/\B(?=(\d{3})+(?!\d))/g," "),e=window.tcart&&window.tcart.currency_sep&&"."===window.tcart.currency_sep||t&&t.currencySeparator&&"."===t.currencySeparator?e.replace(",","."):e.replace(".",",")}else e="";return e}function t_prod__triggerEvent(e,t){var r;document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent(t,!0,!1):document.createEventObject&&((r=document.createEventObject()).eventType=t),r.eventName=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent?e.fireEvent("on"+r.eventType,r):e[t]?e[t]():e["on"+t]&&e["on"+t]()}Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),r=t.length>>>0,o=arguments.length>=2?arguments[1]:void 0,c=0;c<r;c++)if(c in t&&e.call(o,t[c],c,t))return!0;return!1}),function(e){var t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;e.matches=e.matchesSelector=t||function e(t){var e=document.querySelectorAll(t),r=this;return Array.prototype.some.call(e,(function(e){return e===r}))}}(Element.prototype),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}return null});