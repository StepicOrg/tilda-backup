function t_prod__init(t){t=document.querySelector("#rec"+t);t&&(t=t.querySelectorAll(".js-product"),Array.prototype.forEach.call(t,function(t){t.querySelector(".js-product-option")&&t_prod__initProduct(t)}))}function t_prod__initProduct(t,r){"string"==typeof t&&(t=r),t_prod__initPrice(t),t_prod__addEvents__options(t),t_prod__updatePrice(t,r)}function t_prod__initPrice(t){var r,e,c;t instanceof Element||(t=t[0]),t&&((r=t.querySelector(".js-product-price"))||(t.insertAdjacentHTML("beforeend",'<div style="display:none;" class="js-product-price"></div>'),r=t.querySelector(".js-product-price")),e=r.textContent,c=r.getAttribute("data-product-price-def"),t=r.getAttribute("data-product-price-def-str"),e?c||t||(t=t_prod__cleanPrice(e),r.setAttribute("data-product-price-def",t),r.setAttribute("data-product-price-def-str",e.replace(/"/g,""))):r.setAttribute("data-product-price-def",0))}function t_prod__updatePrice(t,r){var e,c,o,n;t instanceof Element||(t=t[0]),t&&(e=t.querySelector(".js-product-price:not(.js-store-prod-price-range-val)"),c=t.querySelectorAll(".js-product-option-variants"),o=t=0,e&&(n=+(n=e.getAttribute("data-product-price-def")),Array.prototype.forEach.call(c,function(t){var r;!t||(r=t.querySelector("option:checked").getAttribute("data-product-variant-price"))&&(t=t_prod__cleanPrice(r),-1!==r.indexOf("+")?o+=t:0!==parseFloat(t)&&(n=t))}),t=n+o,e.innerHTML=0<t?t_prod__showPrice(t_prod__roundPrice(t),r):e.getAttribute("data-product-price-def-str")))}function t_prod__addEvents__options(t){t instanceof Element||(t=t[0]),t&&(t=t.querySelectorAll(".js-product-option-variants"),Array.prototype.forEach.call(t,function(t){var r=t.closest(".js-product");t.addEventListener("change",function(){t_prod__updatePrice(r),t_triggerEvent(document.body,"twishlist_addbtn")})}))}function t_prod__cleanPrice(t){return t?(t=(t=t.toString()).replace(",",".").replace(/[^0-9.]/g,""),t=parseFloat(t).toFixed(2),isNaN(t)&&(t=0),(t=+(t=parseFloat(t)))<0&&(t=0)):t=0,t}function t_prod__roundPrice(t){return t?(t=parseFloat(t).toFixed(2),(t=+(t=parseFloat(t)))<0&&(t=0)):t=0,t}function t_prod__showPrice(t,r){return t=t?(t=t.toString(),(window.tcart&&window.tcart.currency_dec&&"00"===window.tcart.currency_dec||r&&r.currencyDecimal&&"00"===r.currencyDecimal)&&(-1===t.indexOf(".")&&-1===t.indexOf(",")?t+=".00":1===t.substr(t.indexOf(".")+1).length&&(t+="0")),t=t.replace(/\B(?=(\d{3})+(?!\d))/g," "),window.tcart&&window.tcart.currency_sep&&"."===window.tcart.currency_sep||r&&r.currencySeparator&&"."===r.currencySeparator?t.replace(",","."):t.replace(".",",")):""}
