function setWidthAndHeightVideo(e,t,o){console.log("set width and height "+o+"-video: "+t);var i,n=e.querySelector("iframe");"html5"===o&&(n=(e=(i=e).closest(".t-cover__carrier")).querySelector("video"));var r,s,d,l,a,p=e.getAttribute("data-content-video-nocover"),u=e.getAttribute("data-content-video-noadcut-youtube"),c=e.getAttribute("data-content-video-ratio"),h=.5625;c&&!isNaN(Number(c))&&0<c&&(h=parseFloat(c)),"yes"!==p?(l=-1!==(t=t||"100vh").indexOf("vh")?(d=window.innerHeight,r=parseInt(t)||0,Math.floor(d*(r/100))):parseInt(t)||0,c=s=(a=window.innerWidth)*h,p=s,d=1,"youtube"===o&&"yes"!==u&&(c+=220,p=s-220),p<l&&(d=s<l?l/s+.02:s/l+.02),p=Math.floor(a*d),l=(d=Math.floor(c*d))-l,a=p-a,n.style.height=d+"px",n.style.width=p+"px","html5"===o&&(i.style.height=d+"px",i.style.width=p+"px"),n.style.marginTop=0<l?-Math.floor(l/2)+"px":"0",n.style.marginLeft=0<a?-Math.floor(a/2)+"px":"0"):(t||(s=Math.floor(e.offsetWidth*h)),t&&-1<t.indexOf("vh")?(r=parseInt(t)||0,s=Math.floor(window.innerHeight*(r/100))):t&&(s=parseInt(t)||0),n.style.width="100%",n.style.height=s+"px")}function processSrc(e,t,o){-1===e.indexOf("https://www.youtube.com/embed")&&(e="https://www.youtube.com/embed"+("/"===e[0]?e:"/"+e)),-1!==e.indexOf("?")?e+="&":e+="?";var i=location.protocol+"//"+location.host;return e="yes"!==t?(e[e.length-1],e+"autoplay=1&loop=1&enablejsapi=1&&playerapiid=featuredytplayer&controls=0&modestbranding=1&rel=0&showinfo=0&color=white&iv_load_policy=3&theme=light&wmode=transparent&origin="+i+"&playlist="+function(e){for(var t=e.split("/"),o=null,i=0,n=t.length;i<n;i++)"embed"===t[i]&&(o=t[i+1]);return-1!==o.indexOf("?")&&(o=o.split("?")[0]),o}(e)):(e[e.length-1],e+"autoplay=0&loop=0&enablejsapi=1&&playerapiid=featuredytplayer&controls=1&modestbranding=1&rel=0&showinfo=0&color=black&iv_load_policy=3&theme=dark&wmode=transparent&origin="+i),"yes"!==o&&(e+="&mute=1"),e}function onYouTubePlayerReady_do(e,t,o){var i,n=0;window.addEventListener("scroll",function(){i&&(window.clearTimeout(i),15<=n&&(timer_player_do(e,t,o),n=0),n++),i=window.setTimeout(function(){timer_player_do(e,t,o),n=0},100)})}function timer_player_do(e,t,o){var i=e.getBoundingClientRect().top+window.pageYOffset,n=e.offsetWidth,r=window.pageYOffset,s=window.innerHeight,e=t.getPlayerState();i<r+s&&r<=i+n?(1!==e&&t.playVideo(),"yes"===o&&(i+n-100<r?t.setVolume(30):i+n-200<r?t.setVolume(70):r+s<i+200?t.setVolume(30):t.setVolume(100))):r+s<i&&i-500<r+s?2!==e&&(t.playVideo(),t.pauseVideo()):2!==e&&t.pauseVideo()}function load_youtube_api(){var e,t;"yes"!==window.loadytapi_flag&&(window.loadytapi_flag="yes",(e=document.createElement("script")).src="https://www.youtube.com/iframe_api",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t))}function videoProcessor_onFuncLoad(e,t){var o;"object"==typeof window[e]&&"function"==typeof window[e].Player?t():o=setInterval(function(){"object"==typeof window[e]&&"function"==typeof window[e].Player&&(t(),clearInterval(o),o=0)},100),window.addEventListener("load",function(){setTimeout(function(){if(o){if("object"!=typeof window[e]||"function"!=typeof window[e].Player)throw clearInterval(o),new Error(e+" is undefined");t(),clearInterval(o)}},5e3)})}!function(){window.processYoutubeVideo=function(s,d){load_youtube_api();videoProcessor_onFuncLoad("YT",function(){var t,e=s.getAttribute("data-content-video-url-youtube"),i=s.getAttribute("data-content-video-nomute"),n=s.getAttribute("data-content-video-noloop"),o=s.getAttribute("data-content-video-nocover"),r=document.createElement("iframe");r.src=processSrc(e,o,i),r.frameBorder="0",r.allow="fullscreen",s.appendChild(r),window.isMobile||"undefined"==typeof YT||new YT.Player(r,{events:{onReady:function(e){onYouTubePlayerReady_do(s,e.target,i),e.target.setVolume&&"yes"!==i&&e.target.setVolume(0),e.target.setLoop(!0)},onStateChange:function(o){var e;o.target.setVolume&&"yes"!==i&&o.target.setVolume(0),-1!==o.data||0<=(e=window.fix_scrolltop_beforestop_youtube)&&(window.scrollTo(0,e),delete window.fix_scrolltop_beforestop_youtube),o.data===YT.PlayerState.PLAYING?t=window.setInterval(function(){var e=o.target.getCurrentTime(),t=o.target.getDuration();t<e+1&&0!==t&&(o.target.seekTo(0),"yes"===n&&(o.target.stopVideo(),o.target.clearVideo()))},1e3):window.clearInterval(t)}}}),setWidthAndHeightVideo(s,d,"youtube")})};window.videoBG=function(e,t){var o={};if("object"==typeof t)o=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var o in arguments[t])arguments[t].hasOwnProperty(o)&&(e[o]=arguments[t][o]);return e}({},window.videoBG.defaults,t);else{if(t)return t.videoBG(o);o=window.videoBG.defaults}t=e;if(t){"static"!==t.style.position&&t.style.position||(t.style.position="relative"),0===o.width&&(o.width=t.offsetWidth),0===o.height&&(o.height=t.offsetHeight),o.textReplacement&&(o.scale=!0,t.style.width=o.width+"px",t.style.height=o.height+"px",t.style.textIndent="-9999px");e=window.videoBG.video(o);return o.scale&&(e.style.height=o.height+"px",e.style.width=o.width+"px"),t.insertAdjacentElement("beforeend",e),!t.getAttribute("data-content-video-nomute")||(t=t.querySelector("video"))&&t.setAttribute("muted","true"),setWidthAndHeightVideo(e,o.height+"px","html5"),e.querySelector("video")}},window.videoBG.setFullscreen=function(e){var t,o=window.innerWidth,i=window.innerHeight;e.style.minHeight=0,e.style.minWidth=0,e.parentNode&&(e.parentNode.style.width=o+"px",e.parentNode.style.height=i+"px"),o/i>e.aspectRatio?(e.style.width=o+"px",e.style.height="auto",n=0<((t=e.offsetHeight)-o)/2?(t-o)/2:0,e.style.top=-n+"px"):(e.style.width="auto",e.style.height=i+"px",n=0<((t=e.offsetWidth)-o)/2?(t-o)/2:0,e.style.left=-n+"px",0===n&&setTimeout(function(){window.videoBG.setFullscreen(e)},500));var n=document.querySelectorAll("body > .videoBG_wrapper");Array.prototype.forEach.call(n,function(e){e.style.width=o+"px",e.style.height=i+"px"})},window.videoBG.video=function(e){var t=document.createElement("div");t.classList.add("videoBG"),t.style.position=e.position,t.style.zIndex=e.zIndex,t.style.top="0",t.style.left="0",t.style.height=e.height+"px",t.style.width=e.width+"px",t.style.opacity=e.opacity,t.style.overflow="hidden";var o,i,n=document.createElement("video");n.style.position="relative",n.style.zIndex=e.zIndex,n.style.poster=e.poster,n.style.top="0",n.style.left="0",n.style.minHeight="100%",n.style.minWidth="100%",n.setAttribute("autoplay",e.autoplay),n.setAttribute("loop",e.loop),n.setAttribute("muted",e.muted),0<e.volume?n.setAttribute("volume",e.volume):n.setAttribute("volume","0"),e.fullscreen&&(n.addEventListener("canplay",function(){n.aspectRatio=n.offsetWidth/n.offsetHeight,window.videoBG.setFullscreen(n)}),window.addEventListener("resize",function(){clearTimeout(o),o=setTimeout(function(){window.videoBG.setFullscreen(n)},100)}),window.videoBG.setFullscreen(n)),e.loop&&(i=e.loop,n.addEventListener("ended",function(){i&&(n.muted=!0,n.play()),!0!==i&&i--})),n.addEventListener("canplay",function(){e.autoplay&&(n.muted=!0,n.play())}),window.videoBG.supportsVideo()&&(window.videoBG.supportType("webm")&&""!==e.webm?n.setAttribute("src",e.webm):window.videoBG.supportType("mp4")&&""!==e.mp4?n.setAttribute("src",e.mp4):n.setAttribute("src",e.ogv));var r=document.createElement("img");return r.setAttribute("src",e.poster),r.style.position="absolute",r.style.zIndex=e.zIndex,r.style.top="0",r.style.left="0",r.style.minHeight="100%",r.style.minWidth="100%",window.videoBG.supportsVideo()?t.insertAdjacentElement("beforeend",n):t.insertAdjacentElement("beforeend",r),e.textReplacement&&(t.style.minHeight="1px",t.style.minWidth="1px",n.style.minHeight="1px",n.style.minWidth="1px",r.style.minHeight="1px",r.style.minWidth="1px",t.style.height=e.height+"px",t.style.width=e.width+"px",n.style.height=e.height+"px",n.style.width=e.width+"px",r.style.height=e.height+"px",r.style.width=e.width+"px"),window.videoBG.supportsVideo(),t},window.videoBG.supportsVideo=function(){return document.createElement("video").canPlayType},window.videoBG.supportType=function(e){if(!window.videoBG.supportsVideo())return!1;var t=document.createElement("video");switch(e){case"webm":return t.canPlayType('video/webm; codecs="vp8, vorbis"');case"mp4":return t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');case"ogv":return t.canPlayType('video/ogg; codecs="theora, vorbis"')}return!1},window.videoBG.wrapper=function(){var e=document.createElement("div");return e.classList.add("videoBG_wrapper"),e.style.position="absolute",e.style.top="0",e.style.left="0",e},window.videoBG.defaults={mp4:"",ogv:"",webm:"",poster:"",autoplay:!0,loop:!0,scale:!1,position:"absolute",opacity:1,textReplacement:!1,zIndex:0,width:0,height:0,fullscreen:!1,imgFallback:!0}}(),function(){function e(){this.setScrollListener()}e.prototype.videoTags=[],e.prototype.defaultConfig={isNeedStop:!1},e.prototype.videoConfigs=[],e.prototype.registerNewVideo=function(e,t){if(!(e instanceof HTMLVideoElement))throw new Error("Wrong tag passed into registerNewVideo");return-1===this.videoTags.indexOf(e)&&(this.videoTags.push(e),this.videoConfigs.push(void 0===t?this.defaultConfig:t),this.scrollCb("",!0),!0)},e.prototype.unergisterVideo=function(e){if(!(e instanceof HTMLVideoElement))throw new Error("Wrong tag passed into unregisterNewVideo");var t;return-1!==(t=this.videoTags.indexOf(e))&&("function"==typeof e.remove?null!==e.parentNode&&e.parentNode.removeChild(e):e.parentNode&&e.parentNode.removeChild(e),this.pauseVideo(e,this.videoConfigs[t]),this.videoTags.splice(t,1),this.videoConfigs.splice(t,1),!0)},e.prototype.pauseVideo=function(e,t){if(!t)throw new Error("Wrong config type!");e.pause(),t.isNeedStop&&e.load()},e.prototype.setScrollListener=function(){window.addEventListener("scroll",t_throttle(this.scrollCb.bind(this),200))},e.prototype.scrollCb=function(e,t){for(var o=window.innerHeight,i=null,n=0,r=this.videoTags.length;n<r;n++){var s,i=this.videoTags[n],d=this.getVideoBoundingRect(i,!1);Math.abs(d.top)<o&&Math.abs(d.top)>o/2&&(0<(s=1-(Math.abs(d.top)-o/2)/(o/2)-.2)&&s<=1&&0!=i.volume&&(i.volume=s)),Math.abs(d.top)>o||0==d.height?this.pauseVideo(i,this.videoConfigs[n]):(t&&(i.muted=!0,i.play()),i.paused&&i.loop&&(i.muted=!0,i.play()))}},e.prototype.getVideoObject=function(e){for(var t=this.videoTags.length,o=0;o<t;o++){var i=this.videoTags[o];if(i.v===e)return i}return null},e.prototype.getVideoBoundingRect=function(e,t){void 0===t&&(t=!0);return(t&&e.closest(".r")||e).getBoundingClientRect()},window.videoLoadProcessor=new e}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}return null});
