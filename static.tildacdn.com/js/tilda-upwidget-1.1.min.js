if(void 0!==t_upwidget_lock);else{var t_upwidget_lock=!0,t_upwidget__maxFiles=10,t_upwidget__userLang=window.browserLang;"undefined"!=typeof UPLOADCARE_LOCALE&&""!==UPLOADCARE_LOCALE&&(t_upwidget__userLang=UPLOADCARE_LOCALE.toUpperCase());var t_upwidget_translation={RU:{0:"Ошибка при загрузке файла",1:"Вы можете загрузить не более "+t_upwidget__maxFiles+" файлов",2:"Загрузить файл",3:"Ошибка: ",4:"Загрузить файлы",5:"Загрузка ",6:"Загружено ",7:" файла(ов)",8:"Заменить",9:"Добавить файлы",10:"Максимум "+t_upwidget__maxFiles+" файлов",11:"Не указан TILDA UPLOAD WIDGET KEY",12:'<a target="_blank" href="https://help-ru.tilda.cc/upwidget-api-key">Инструкция</a>'},EN:{0:"File upload error",1:"You can upload no more than "+t_upwidget__maxFiles+" files",2:"Add file",3:"Upload error: ",4:"Add files",5:"Uploading ",6:"Uploaded ",7:" files",8:"Replace",9:"Add more files",10:"Maximum "+t_upwidget__maxFiles+" files",11:"TILDA UPLOAD WIDGET KEY is not specified",12:'<a target="_blank" href="https://help.tilda.cc/upwidget-api-key">Detailed instruction</a>'},UK:{0:"Помилка при завантаженні файлу",1:"Ви можете завантажити не більше "+t_upwidget__maxFiles+" файлів ",2:"Завантажити файл",3:"Помилка: ",4:"Завантажити файли",5:"Завантаження ",6:"Завантажено ",7:" файл(ів)",8:"Замінити",9:"Додати файли",10:"Максимум "+t_upwidget__maxFiles+" файлів",11:"Не вказано TILDA UPLOAD WIDGET KEY",12:'<a target="_blank" href="https://help.tilda.cc/upwidget-api-key">Інструкція</a>'},PL:{0:"Błąd ładowania pliku",1:"Nie można załadować więcej "+t_upwidget__maxFiles+" plików",2:"Dodaj plik",3:"Błąd: ",4:"Dodaj pliki",5:"Ładowanie ",6:"Dodano ",7:" plika(ów)",8:"Zmień",9:"Dodać pliki",10:"Max "+t_upwidget__maxFiles+" plików",11:"Nie dodano TILDA UPLOAD WIDGET KEY",12:'<a target="_blank" href="https://help.tilda.cc/upwidget-api-key">Instrukcja</a>'}},t_upwidget__cLang=t_upwidget_translation[t_upwidget__userLang],t_upwidget__progressObj={},t_upwidget__errorUpload={},t_upwidget__count=0;function t_upwidget__init(){0===$(".t-upwidget-container").length&&0===$("style#t-upwidget-styles").length&&$("body").append('<style id="t-upwidget-styles">.t-upwidget-container{position:relative}.t-upwidget-container__image-done{vertical-align:middle;margin-left:0;margin-right:8px;filter:contrast(4) invert(1)}.t-upwidget-container__button,.t-upwidget-container__button-indiv{font-weight:400;white-space:nowrap;background-color:#000;color:#fff;text-align:center;cursor:pointer}.t-upwidget-container__button-indiv{line-height:30px;width:150px;padding:0;vertical-align:middle;height:30px;margin:0 0 30px 30px}.t-upwidget__show-files.t-upwidget-container__data{display:block;width:300px!important;text-align:left;overflow-y:auto;max-height:80vh;background-color:#fff;z-index:9999;padding-top:20px;position:absolute;box-shadow:0 2px 10px rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.05)}.t-upwidget-container__button{max-width:250px;overflow:hidden;text-overflow:ellipsis;display:table;padding:0 20px;line-height:38px!important}.t-upwidget-container__button.t-upwidget-container__button_error{text-align:left;color:red;padding:0 12px;font-size:small}.t-upwidget-container__button.t-upwidget-container__button_fileholder{text-align:left;color:#fff;padding:0 12px}.t-upwidget-container__button_disabled{opacity:.6;cursor:default}.t-upwidget-container__data{display:none}.t-upwidget-container__data_table{table-layout:fixed;width:298px;font-size:14px;padding:0;margin:0 0 15px}.t-upwidget-container__data_table_image{width:35px;padding:0;margin:0;text-align:center}.t-upwidget-container__data_table_fileinfo{white-space:nowrap;padding:0;margin:0;vertical-align:bottom}.t-upwidget-container__data_table_actions_remove svg{cursor:pointer}.t-upwidget-container__data_filename{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:120px}.t-upwidget-container__data_fileextension,.t-upwidget-container__data_filename{padding:0;margin:0;display:inline-block;vertical-align:middle}.t-upwidget-container__data_filesize{padding-left:2px;opacity:.6;display:inline-block;vertical-align:middle}.t-upwidget-container__data_progress{width:65%;height:6px;vertical-align:middle;display:inline-block;border:1px solid gray;opacity:.7}.t-upwidget-container__data_progress_back{background-color:gray;width:0;height:100%}.t-upwidget-container__globalerror{font-weight:700;margin:10px;display:block}.t-form.js-error-control-box.t-upwidget-container__button{border:1px solid red!important}</style>'),Object.size=function(obj){var size=0,key;for(key in obj)obj.hasOwnProperty(key)&&size++;return size};var upload_counter=0;function t_upwidget__inputInit(input){$(input).css("display","none"),$(input).wrap('<div class="t-upwidget-container"></div>');var container=$(input).parent("div"),key=$(input).attr("data-tilda-upwidget-key"),container_id=(Math.random()+"").substr(2),fs=$(input).closest("form").find(".t-submit"),style_ar=fs.attr("style").split(";"),color_set=!1,bgcolor_set=!1,getstyle=[],gs=[];for(var i in style_ar)if(parseInt(i)==i&&void 0!==style_ar[i]&&""!=style_ar[i]){var aaa=style_ar[i].split(":");getstyle[aaa[0]]=aaa[1]}void 0===getstyle.color?gs.color=stringToRGBArray(fs.css("color")):(gs.color=hexToRgb(getstyle.color),color_set=!0),void 0===getstyle["background-color"]||getstyle["background-color"].indexOf("transparent")>-1?gs["background-color"]=stringToRGBArray(fs.css("background-color")):(gs["background-color"]=hexToRgb(getstyle["background-color"]),bgcolor_set=!0),void 0===getstyle["border-radius"]?gs["border-radius"]=fs.css("border-radius"):gs["border-radius"]=getstyle["border-radius"],void 0===getstyle["font-family"]?gs["font-family"]=fs.css("font-family"):gs["font-family"]=getstyle["font-family"],void 0===getstyle["font-size"]?gs["font-size"]=fs.css("font-size"):gs["font-size"]=getstyle["font-size"];var style="";if(!0===bgcolor_set&&!0===color_set&&gs["background-color"]&&gs.color&&deltaE(gs.color,gs["background-color"])>40){for(var i in gs.color=rgbToHex(gs.color[0],gs.color[1],gs.color[2]),gs["background-color"]=rgbToHex(gs["background-color"][0],gs["background-color"][1],gs["background-color"][2]),gs)style+=i+":"+gs[i]+";";style='style="'+style+'"'}$(container).attr("data-tilda-name",$(input).attr("name")).attr("data-tilda-upwidget-key",$(input).attr("data-tilda-upwidget-key")).attr("data-tilda-req",$(input).attr("data-tilda-req")).attr("id",container_id),null!=$(input).attr("data-tilda-upwidget-multiple")?$(container).attr("data-tilda-upwidget-multiple","true").append("<div "+style+' class="t-upwidget-container__button t-text">'+t_upwidget__cLang[4]+"</div>"):$(container).attr("data-tilda-upwidget-multiple","false").append("<div "+style+' class="t-upwidget-container__button t-text">'+t_upwidget__cLang[2]+"</div>"),$(container).append('<div class="t-upwidget-container__data"><div class="t-upwidget-container__button-indiv t-text">'+t_upwidget__cLang[9]+"</div></div>"),"1"==$(container).attr("data-tilda-req")&&$(container).append('<input type="hidden" value="" class="js-tilda-rule" name="'+$(container).attr("data-tilda-name")+'" data-tilda-req="1">'),t_upwidget__getAcceptMime($(container)),$("#"+container_id).on("click",".t-upwidget-container__button",t_upwidget__containerButtonClick),$("#"+container_id).on("click",".t-upwidget-container__button-indiv",t_upwidget__containerClickButtonIndiv),$("#"+container_id).on("click",".t-upwidget-container__data_table_actions_remove svg",t_upwidget__containerClickTableActions),$("#"+container_id).on("click",".t-upwidget-container__data_progress_stop",t_upwidget__containerProgressStop),$("#"+container_id).on("click",".t-upwidget-multi-button",t_upwidget__containerMultiButton),$("#"+container_id).on("dragover dragleave",".t-upwidget-container__button",t_upwidget__containerButtonDrag),$("#"+container_id).on("drop",".t-upwidget-container__button",t_upwidget__containerButtonDrop),$(input).remove()}$("input[role=upwidget-uploader]").each((function(){return t_upwidget__count++,t_upwidget__inputInit(this),"true"}));var done_svg='<svg xmlns="http://www.w3.org/2000/svg" class="t-upwidget-container__image-done" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>',stop_svg='<svg class="t-upwidget-container__data_progress_stop" width="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                    viewBox="0 0 72.434 72.44" style="margin-left: 15px; cursor: pointer; vertical-align: middle; enable-background:new 0 0 72.434 72.44;" xml:space="preserve">\n                            <path style="fill:#231F20;" d="M36.22,0C16.212,0,0,16.216,0,36.227c0,19.999,16.212,36.214,36.22,36.214\n                                c20.011,0,36.214-16.215,36.214-36.214C72.434,16.215,56.231,0,36.22,0z M52.058,46.82c1.379,1.424,0.953,4.078-0.959,5.932\n                                c-1.911,1.854-4.577,2.209-5.959,0.785l-9.027-9.295l-9.298,9.027c-1.421,1.379-4.075,0.947-5.929-0.961s-2.206-4.574-0.785-5.956\n                                l9.298-9.027l-9.027-9.298c-1.379-1.421-0.946-4.078,0.962-5.932c1.905-1.851,4.577-2.204,5.953-0.785l9.027,9.297l9.301-9.023\n                            c1.424-1.382,4.078-0.95,5.929,0.958c1.857,1.908,2.206,4.577,0.785,5.959l-9.295,9.024L52.058,46.82z"/>\n                    </svg>';function t_upwidget__containerButtonClick(event){if(!$(this).hasClass("t-upwidget-container__button_disabled")&&!$(this).hasClass("t-upwidget-multi-button")){var container=$(this).parent("div");if(!$(container).attr("data-tilda-upwidget-key"))return $(this).css("pointer-events","none"),void $(this).after(t_upwidget__cLang[11]+"<br>"+t_upwidget__cLang[12]);if(0==$(container).find("input[type=file]").length){var multiple="true"==$(container).attr("data-tilda-upwidget-multiple")?'multiple="true"':"";$(container).append('<input type="file" size="'+$(container).attr("data-tilda-upwidget-file-size")+'" role="upwidget-uploader-file" '+multiple+' accept="'+$(container).attr("data-tilda-accept")+'" style="display: none;">')}$(container).find("input[type=file]").click(),$(".t-upwidget-container").off("change","input[type=file][role=upwidget-uploader-file]",t_upwidget__ListenFileChange),$(".t-upwidget-container").on("change","input[type=file][role=upwidget-uploader-file]",t_upwidget__ListenFileChange)}}function t_upwidget__containerClickButtonIndiv(event){if(!$(this).hasClass("t-upwidget-container__button_disabled")){var container=$(this).parent("div").parent("div"),multiple="";0==$(container).find("input[type=file]").length&&(multiple="true"==$(container).attr("data-tilda-upwidget-multiple")?'multiple="true"':"",$(container).append('<input type="file" size="'+$(container).attr("data-tilda-upwidget-file-size")+'" role="upwidget-uploader-file" '+multiple+' accept="'+$(container).attr("data-tilda-accept")+'" style="display: none;">')),""==multiple&&delete t_upwidget__errorUpload[$(container).attr("id")],$(container).find("input[type=file]").click(),$(".t-upwidget-container").off("change","input[type=file][role=upwidget-uploader-file]",t_upwidget__ListenFileChange),$(".t-upwidget-container").on("change","input[type=file][role=upwidget-uploader-file]",t_upwidget__ListenFileChange)}}function t_upwidget__containerClickTableActions(event){var fileId=$(this).parent("div").attr("fileid"),container=$(this).parents("div.t-upwidget-container__data");$(container).find("input[type=hidden]").each((function(){$(this).val()==fileId&&$(this).remove()})),$(this).parents(".t-upwidget-container__data_table").fadeOut(300,(function(){$(this).remove(),t_upwidget__rewriteInputs(container),t_upwidget__buttonValue($(container).parent("div"),$(container).parent("div").attr("id"))})),t_upwidget__countFilesInContainer(container)<t_upwidget__maxFiles&&($($(container).parent("div").find(".t-upwidget-container__button-indiv")[0]).removeClass("t-upwidget-container__button_disabled"),$($(container).parent("div").find(".t-upwidget-container__globalerror")[0]).fadeOut(300,(function(){$(this).remove()})))}function t_upwidget__ListenFileChange(){t_upwidget__getFiles($(this).parent("div"),this.files),$(this).remove()}function t_upwidget__containerProgressStop(event){var container=$(this).parents("div.t-upwidget-container")[0];null!=$(this).data("curXHR")&&($(this).data("curXHR").abort(),t_upwidget__progressObj[$(container).attr("id")][$(this).data("curUPL")]=100),null!=t_upwidget__errorUpload[$(container).attr("id")][$(this).data("curUPL")]&&delete t_upwidget__errorUpload[$(container).attr("id")][$(this).data("curUPL")],$(this).parents("table").fadeOut(300,(function(){$(this).remove(),t_upwidget__buttonValue(container,$(container).attr("id"))})),t_upwidget__countFilesInContainer(container)<t_upwidget__maxFiles&&($($(container).parent("div").find(".t-upwidget-container__button-indiv")[0]).removeClass("t-upwidget-container__button_disabled"),$($(container).parent("div").find(".t-upwidget-container__globalerror")[0]).fadeOut(300,(function(){$(this).remove()})))}function t_upwidget__containerMultiButton(event){if(!(t_upwidget__hideFilelist()>0)){var aaa=$(this).parent("div").find(".t-upwidget-container__data")[0];$(aaa).addClass("t-upwidget__show-files")}}function t_upwidget__waitESCpressed(e){27==e.keyCode&&t_upwidget__hideFilelist()}function t_upwidget__waitCLICKdone(e){$(e.target).hasClass("t-upwidget-container__button")||$(e.target).is("input[type=file]")||$(e.target).hasClass("t-upwidget-container__data_filename")||$(e.target).hasClass("t-upwidget-container__data_fileextension")||$(e.target).closest(".t-upwidget-container__data").length||t_upwidget__hideFilelist()}function t_upwidget__getFiles(container,files){var container_data=$($(container).find("div.t-upwidget-container__data")[0]);if(""!=files.length){var fileCount=t_upwidget__countFilesInContainer(container_data),canUpload=t_upwidget__maxFiles-fileCount,id=$(container).attr("id");if(files.length>t_upwidget__maxFiles)$($(container).find("div.t-upwidget-container__button")[0]).text(t_upwidget__cLang[10]).addClass("t-upwidget-container__button_error").removeClass("t-upwidget-container__button_fileholder");else for("true"==$(container).attr("data-tilda-upwidget-multiple")?fileCount+files.length>=t_upwidget__maxFiles&&t_upwidget__showGlobalError(container_data):canUpload=1,files.length<canUpload&&(canUpload=files.length),i=0;i<canUpload;i++){"false"==$(container).attr("data-tilda-upwidget-multiple")&&(container_data.html(""),$(container_data).append('<div class="t-upwidget-container__button-indiv  t-text">'+t_upwidget__cLang[8]+"</div>")),$(container_data).append(t_upwidget__getFileDescription(files[i]));var progress=$(container_data).children("table:last").find("div.t-upwidget-container__data_progress_back");t_upwidget__sendFile(files[i],container,progress,id)}}}function t_upwidget__sendFile(file,container,progress,id){var uri="https://upwidget.tildacdn.com/upload/",upKey=$(container).attr("data-tilda-upwidget-key"),xhr=new XMLHttpRequest,fd=new FormData,container_data=$(container).find("div.t-upwidget-container__data")[0],button=$(container).find(".t-upwidget-container__button")[0],current_upload=++upload_counter;null==t_upwidget__progressObj[id]&&(t_upwidget__progressObj[id]={}),t_upwidget__progressObj[id][current_upload]=0,null==t_upwidget__errorUpload[id]&&(t_upwidget__errorUpload[id]=[]),$(progress).parent("div").parent("td").children("svg").data("curXHR",xhr),$(progress).parent("div").parent("td").children("svg").data("curUPL",current_upload),xhr.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var percentage=Math.round(100*e.loaded/e.total);100==percentage&&(percentage=99),t_upwidget__progressObj[id][current_upload]=percentage,$(progress).css("width",percentage+"%"),t_upwidget__buttonValue(container,id)}}),!1),xhr.open("POST",uri,!0),xhr.onreadystatechange=function(){if(4==xhr.readyState&&200==xhr.status){var response=JSON.parse(xhr.response);if("fail"==response.status)return t_upwidget__progressObj[id][current_upload]=100,t_upwidget__errorUpload[id][current_upload]=t_upwidget__cLang[3]+response.error,$(progress).parent("div").parent("td").html('<span style="font-size: small; color: red">'+t_upwidget__cLang[3]+response.error+"</span>"+stop_svg),void t_upwidget__buttonValue(container,id);t_upwidget__buttonValue(container,id),t_upwidget__progressObj[id][current_upload]=100;var fileLink=response[0];$(progress).parent("div").parent("td").html('<div class="t-upwidget-container__data_table_actions_remove" fileid="'+fileLink.url+"/"+encodeURIComponent(fileLink.filename)+'"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 14 18"><g style="fill:none;stroke-width:1;stroke:none"><g fill="#000"><path d="M1 16C1 17.1 1.9 18 3 18L11 18C12.1 18 13 17.1 13 16L13 4 1 4 1 16ZM14 1L10.5 1 9.5 0 4.5 0 3.5 1 0 1 0 3 14 3 14 1Z"/></g></g></svg>\n</div>');var html='<input type="hidden" value="'+fileLink.url+"/"+encodeURIComponent(fileLink.filename)+'">';$(container_data).append(html),t_upwidget__rewriteInputs(container_data),t_upwidget__buttonValue(container,id)}},xhr.onerror=function(){t_upwidget__progressObj[id][current_upload]=100,t_upwidget__buttonValue(container,id),$(progress).parent("div").parent("td").html(t_upwidget__cLang[0]+stop_svg)},fd.append(upKey,file),xhr.send(fd)}function t_upwidget__rewriteInputs(container_data){var name=$(container_data).parent("div").attr("data-tilda-name"),button=$(container_data).parent("div").find(".t-upwidget-container__button")[0],upFiles=[];$(container_data).find("input[type=hidden]").each((function(){upFiles.push($(this).val()),$(this).remove()}));var html="",i=0;for(i=0;i<upFiles.length;i++)html+=t_upwidget__count>1?'<input name="'+name+"_"+i+'" type="hidden" value="'+upFiles[i]+'">':0==i?'<input name="'+name+'" type="hidden" value="'+upFiles[i]+'">':'<input name="'+name+"_"+i+'" type="hidden" value="'+upFiles[i]+'">';$(container_data).append(html)}function t_upwidget__buttonValue(container,id){var button=$(container).find("div.t-upwidget-container__button")[0],counter=0,percent_done=0;for(var t in t_upwidget__progressObj[id])counter++,percent_done+=t_upwidget__progressObj[id][t];if(100==(percent_done=Math.round(percent_done/counter))){var files_count=t_upwidget__countFilesInContainer($(container).find("div.t-upwidget-container__data")[0]),error="";if(null!=t_upwidget__errorUpload[id]&&t_upwidget__errorUpload[id].length>0){for(var e in t_upwidget__errorUpload[id])error=t_upwidget__errorUpload[id][e];return void $(button).text(error).addClass("t-upwidget-container__button_error").addClass("t-upwidget-multi-button").removeClass("t-upwidget-container__button_fileholder")}switch($(button).removeClass("t-upwidget-container__button_error"),files_count){case 0:t_upwidget__hideFilelist();var text="false"==$(container).attr("data-tilda-upwidget-multiple")?t_upwidget__cLang[2]:t_upwidget__cLang[4];$(button).text(text).removeClass("t-upwidget-multi-button").removeClass("t-upwidget-container__button_fileholder");break;case 1:var filename=$(container).find(".t-upwidget-container__data_filename")[0],fileextension=$(container).find(".t-upwidget-container__data_fileextension")[0];$(button).addClass("t-upwidget-multi-button").addClass("t-upwidget-container__button_fileholder"),$(button).text("").html(done_svg),$(filename).clone().appendTo($(button)),$(fileextension).clone().appendTo($(button));break;default:$(button).html(done_svg+t_upwidget__cLang[6]+files_count+t_upwidget__cLang[7]).addClass("t-upwidget-multi-button").addClass("t-upwidget-container__button_fileholder")}}else $(button).removeClass("t-upwidget-container__button_error"),$(button).addClass("t-upwidget-multi-button"),$(button).text(t_upwidget__cLang[5]+percent_done+"%").removeClass("t-upwidget-container__button_error");t_upwidget__ifFileRequired(container)}function t_upwidget__hideFilelist(){var count=0;return $(".t-upwidget-container__data").each((function(){$(this).hasClass("t-upwidget__show-files")&&(count++,$(this).removeClass("t-upwidget__show-files"))})),count}function t_upwidget__ifFileRequired(container){var files_count;0==t_upwidget__countFilesInContainer($(container).find("div.t-upwidget-container__data")[0])&&"1"==$(container).attr("data-tilda-req")?0==$(container).find('input[type=hidden][data-tilda-req="1"]').length&&$(container).append('<input type="hidden" class="js-tilda-rule" value="" name="'+$(container).attr("data-tilda-name")+'" data-tilda-req="1">'):$($(container).find('input[type=hidden][data-tilda-req="1"]')[0]).remove()}function t_upwidget__getFileDescription(file){var fileExtens="."+file.name.split(".").pop(),fileName=file.name.substr(0,file.name.length-fileExtens.length),fileTable;return fileName.length>14&&(fileExtens=fileName.substr(fileName.length-7).trim()+fileExtens,fileName=fileName.substr(0,fileName.length-7).trim()),'<table class="t-upwidget-container__data_table t-text">\n            <tbody>\n            <tr>\n                <td rowspan="2" class="t-upwidget-container__data_table_image">\n<svg xmlns="http://www.w3.org/2000/svg" width="28" style="vertical-align: middle;" viewBox="0 0 64 64"><style>.a{fill:none;stroke-width:2;stroke:#000;}</style><polygon points="23 1 55 1 55 63 9 63 9 15 " class="a"/><polyline points="9 15 23 15 23 1 " class="a"/></svg>\n                </td>\n                <td class="t-upwidget-container__data_table_fileinfo">\n                    <div class="t-upwidget-container__data_filename">'+fileName+'</div><div class="t-upwidget-container__data_fileextension">'+fileExtens+'</div>                    <div class="t-upwidget-container__data_filesize">'+t_upwidget__getHRFilesize(file.size)+'</div>                </td>\n            </tr>\n            <tr>\n                <td class="t-upwidget-container__data_table_actions">\n                    <div class="t-upwidget-container__data_progress">\n                        <div class="t-upwidget-container__data_progress_back"></div>\n                    </div>\n'+stop_svg+"                </td>\n            </tr>\n            </tbody>\n        </table>"}function t_upwidget__showGlobalError(container_data){0==$(container_data).find(".t-upwidget-container__globalerror").length&&($($(container_data).find(".t-upwidget-container__button-indiv")[0]).before('<span class="t-upwidget-container__globalerror">'+t_upwidget__cLang[1]+"</span>"),$($(container_data).find(".t-upwidget-container__button-indiv")[0]).addClass("t-upwidget-container__button_disabled"))}function t_upwidget__countFilesInContainer(container_data){return $(container_data).find("input[type=hidden]").length}function t_upwidget__getAcceptMime(container){$.get("https://upwidget.tildacdn.com/upload/?get_mime="+$(container).attr("data-tilda-upwidget-key"),(function(data){"ok"==data.status?($(container).attr("data-tilda-accept",data.mime),void 0!==data.size?$(container).attr("data-tilda-upwidget-file-size",data.size):$(container).attr("data-tilda-upwidget-file-size",31457280)):$(container).attr("data-tilda-accept","")}),"json")}function t_upwidget__containerButtonDrag(e){e.preventDefault(),e.stopPropagation()}function t_upwidget__containerButtonDrop(e){e.preventDefault(),e.stopPropagation();var files=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;t_upwidget__getFiles($(this).parent("div"),files)}function t_upwidget__getHRFilesize(size){var rSize=size,iterCount=-1,siZ={RU:["КБ","МБ","ГБ","ТБ"],EN:["KB","MB","GB","TB"]};do{rSize/=1e3,iterCount++}while(rSize>1e3);return(rSize=Math.round(10*rSize)/10)+siZ[t_upwidget__userLang][iterCount]}$("body").on("keyup",t_upwidget__waitESCpressed),$("body").on("click",t_upwidget__waitCLICKdone)}$(document).ready((function(){t_upwidget__init()}))}function tn_luma_rgb(color){if(void 0===color)return"black";if(0!=color.indexOf("rgb"))return"black";var rgb=color.split("(")[1].split(")")[0].split(",");return rgb.length<3?"black":.2126*rgb[0]+.7152*rgb[1]+.0722*rgb[2]>128?"black":"white"}function RGB_to_XYZ(rgb){return var_R=parseFloat(rgb[0]/255),var_G=parseFloat(rgb[1]/255),var_B=parseFloat(rgb[2]/255),var_R>.04045?var_R=Math.pow(parseFloat((var_R+.055)/1.055),2.4):var_R=parseFloat(var_R/12.92),var_G>.04045?var_G=Math.pow(parseFloat((var_G+.055)/1.055),2.4):var_G=parseFloat(var_G/12.92),var_B>.04045?var_B=Math.pow(parseFloat((var_B+.055)/1.055),2.4):var_B=parseFloat(var_B/12.92),var_R*=100,var_G*=100,var_B*=100,X=.4124*var_R+.3576*var_G+.1805*var_B,Y=.2126*var_R+.7152*var_G+.0722*var_B,Z=.0193*var_R+.1192*var_G+.9505*var_B,[X,Y,Z]}function XYZ_to_LAB(xyz){return var_X=parseFloat(xyz[0]/100),var_Y=parseFloat(xyz[1]/100),var_Z=parseFloat(xyz[2]/100),var_X>.008856?var_X=Math.pow(var_X,1/3):var_X=7.787*var_X+16/116,var_Y>.008856?var_Y=Math.pow(var_Y,1/3):var_Y=7.787*var_Y+16/116,var_Z>.008856?var_Z=Math.pow(var_Z,1/3):var_Z=7.787*var_Z+16/116,L=116*var_Y-16,a=500*(var_X-var_Y),b=200*(var_Y-var_Z),[L,a,b]}function RGB_to_LAB(rgb){return XYZ_to_LAB(RGB_to_XYZ(rgb))}function deltaE(rgb1,rgb2){var lab1=RGB_to_LAB(rgb1),lab2=RGB_to_LAB(rgb2),ret;return Math.sqrt((lab1[0]-lab2[0])*(lab1[0]-lab2[0])+(lab1[1]-lab2[1])*(lab1[1]-lab2[1])+(lab1[2]-lab2[2])*(lab1[2]-lab2[2]))}function stringToRGBArray(color){if(void 0===color)return[0,0,0];if(0!=color.indexOf("rgb"))return[0,0,0];var rgb=color.split("(")[1].split(")")[0].split(",");return rgb.length<3?[0,0,0]:rgb}function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,(function(m,r,g,b){return r+r+g+g+b+b}));var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex),aaa=result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;return result?[aaa.r,aaa.g,aaa.b]:null}function rgbToHex(r,g,b){return"#"+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}